var dN=Object.defineProperty,fN=Object.defineProperties;var hN=Object.getOwnPropertyDescriptors;var uc=Object.getOwnPropertySymbols;var FE=Object.prototype.hasOwnProperty,LE=Object.prototype.propertyIsEnumerable;var kE=(n,e,t)=>e in n?dN(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,V=(n,e)=>{for(var t in e||={})FE.call(e,t)&&kE(n,t,e[t]);if(uc)for(var t of uc(e))LE.call(e,t)&&kE(n,t,e[t]);return n},ee=(n,e)=>fN(n,hN(e));var is=(n,e)=>{var t={};for(var r in n)FE.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&uc)for(var r of uc(n))e.indexOf(r)<0&&LE.call(n,r)&&(t[r]=n[r]);return t};var $e=null,lc=!1,Af=1,pN=null,Dt=Symbol("SIGNAL");function J(n){let e=$e;return $e=n,e}function fc(){return $e}var os={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Mf(n){if(lc)throw new Error("");if($e===null)return;$e.consumerOnSignalRead(n);let e=$e.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=$e.recomputing;if(r&&(t=e!==void 0?e.nextProducer:$e.producers,t!==void 0&&t.producer===n)){$e.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===$e&&(!r||mN(i,$e)))return;let o=xi($e),s={producer:n,consumer:$e,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};$e.producersTail=s,e!==void 0?e.nextProducer=s:$e.producers=s,o&&UE(n,s)}function VE(){Af++}function Nf(n){if(!(xi(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Af)){if(!n.producerMustRecompute(n)&&!xf(n)){Sf(n);return}n.producerRecomputeValue(n),Sf(n)}}function Rf(n){if(n.consumers===void 0)return;let e=lc;lc=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||gN(r)}}finally{lc=e}}function Pf(){return $e?.consumerAllowSignalWrites!==!1}function gN(n){n.dirty=!0,Rf(n),n.consumerMarkedDirty?.(n)}function Sf(n){n.dirty=!1,n.lastCleanEpoch=Af}function hc(n){return n&&jE(n),J(n)}function jE(n){n.producersTail=void 0,n.recomputing=!0}function Of(n,e){J(e),n&&BE(n)}function BE(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(xi(n))do t=kf(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function xf(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(Nf(t),r!==t.version))return!0}return!1}function pc(n){if(xi(n)){let e=n.producers;for(;e!==void 0;)e=kf(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function UE(n,e){let t=n.consumersTail,r=xi(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)UE(i.producer,i)}function kf(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!xi(e)){let o=e.producers;for(;o!==void 0;)o=kf(o)}return t}function xi(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Ff(n){pN?.(n)}function mN(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Lf(n,e){return Object.is(n,e)}function gc(n,e){let t=Object.create(yN);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(Nf(t),Mf(t),t.value===dc)throw t.error;return t.value};return r[Dt]=t,Ff(t),r}var bf=Symbol("UNSET"),Cf=Symbol("COMPUTING"),dc=Symbol("ERRORED"),yN=ee(V({},os),{value:bf,dirty:!0,error:null,equal:Lf,kind:"computed",producerMustRecompute(n){return n.value===bf||n.value===Cf},producerRecomputeValue(n){if(n.value===Cf)throw new Error("");let e=n.value;n.value=Cf;let t=hc(n),r,i=!1;try{r=n.computation(),J(null),i=e!==bf&&e!==dc&&r!==dc&&n.equal(e,r)}catch(o){r=dc,n.error=o}finally{Of(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function vN(){throw new Error}var HE=vN;function $E(n){HE(n)}function Vf(n){HE=n}var _N=null;function jf(n,e){let t=Object.create(qE);t.value=n,e!==void 0&&(t.equal=e);let r=()=>GE(t);return r[Dt]=t,Ff(t),[r,s=>Bf(t,s),s=>zE(t,s)]}function GE(n){return Mf(n),n.value}function Bf(n,e){Pf()||$E(n),n.equal(n.value,e)||(n.value=e,EN(n))}function zE(n,e){Pf()||$E(n),Bf(n,e(n.value))}var qE=ee(V({},os),{equal:Lf,value:void 0,kind:"signal"});function EN(n){n.version++,VE(),Rf(n),_N?.(n)}function Uf(n){let e=J(null);try{return n()}finally{J(e)}}function ce(n){return typeof n=="function"}function mc(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var yc=mc(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ss(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Je=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ce(r))try{r()}catch(o){e=o instanceof yc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{WE(o)}catch(s){e=e??[],s instanceof yc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new yc(e)}}add(e){var t;if(e&&e!==this)if(this.closed)WE(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ss(t,e)}remove(e){let{_finalizers:t}=this;t&&ss(t,e),e instanceof n&&e._removeParent(this)}};Je.EMPTY=(()=>{let n=new Je;return n.closed=!0,n})();var Hf=Je.EMPTY;function vc(n){return n instanceof Je||n&&"closed"in n&&ce(n.remove)&&ce(n.add)&&ce(n.unsubscribe)}function WE(n){ce(n)?n():n.unsubscribe()}var Ot={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ki={setTimeout(n,e,...t){let{delegate:r}=ki;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ki;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function _c(n){ki.setTimeout(()=>{let{onUnhandledError:e}=Ot;if(e)e(n);else throw n})}function $f(){}var KE=Gf("C",void 0,void 0);function QE(n){return Gf("E",void 0,n)}function YE(n){return Gf("N",n,void 0)}function Gf(n,e,t){return{kind:n,value:e,error:t}}var xr=null;function Fi(n){if(Ot.useDeprecatedSynchronousErrorHandling){let e=!xr;if(e&&(xr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=xr;if(xr=null,t)throw r}}else n()}function JE(n){Ot.useDeprecatedSynchronousErrorHandling&&xr&&(xr.errorThrown=!0,xr.error=n)}var kr=class extends Je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,vc(e)&&e.add(this)):this.destination=DN}static create(e,t,r){return new Li(e,t,r)}next(e){this.isStopped?qf(YE(e),this):this._next(e)}error(e){this.isStopped?qf(QE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?qf(KE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},IN=Function.prototype.bind;function zf(n,e){return IN.call(n,e)}var Wf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ec(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ec(r)}else Ec(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ec(t)}}},Li=class extends kr{constructor(e,t,r){super();let i;if(ce(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Ot.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&zf(e.next,o),error:e.error&&zf(e.error,o),complete:e.complete&&zf(e.complete,o)}):i=e}this.destination=new Wf(i)}};function Ec(n){Ot.useDeprecatedSynchronousErrorHandling?JE(n):_c(n)}function wN(n){throw n}function qf(n,e){let{onStoppedNotification:t}=Ot;t&&ki.setTimeout(()=>t(n,e))}var DN={closed:!0,next:$f,error:wN,complete:$f};var Vi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ZE(n){return n}function XE(n){return n.length===0?ZE:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var De=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=bN(t)?t:new Li(t,r,i);return Fi(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=eI(r),new r((i,o)=>{let s=new Li({next:c=>{try{t(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Vi](){return this}pipe(...t){return XE(t)(this)}toPromise(t){return t=eI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function eI(n){var e;return(e=n??Ot.Promise)!==null&&e!==void 0?e:Promise}function TN(n){return n&&ce(n.next)&&ce(n.error)&&ce(n.complete)}function bN(n){return n&&n instanceof kr||TN(n)&&vc(n)}function CN(n){return ce(n?.lift)}function ji(n){return e=>{if(CN(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Bi(n,e,t,r,i){return new Kf(n,e,t,r,i)}var Kf=class extends kr{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(c){try{t(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var tI=mc(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Wt=(()=>{class n extends De{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Ic(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new tI}next(t){Fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Fi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Hf:(this.currentObservers=null,o.push(t),new Je(()=>{this.currentObservers=null,ss(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new De;return t.source=this,t}}return n.create=(e,t)=>new Ic(e,t),n})(),Ic=class extends Wt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Hf}};var Fr=class extends Wt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};function nI(n){return n&&ce(n.schedule)}function rI(n){return n[n.length-1]}function iI(n){return ce(rI(n))?n.pop():void 0}function oI(n){return nI(rI(n))?n.pop():void 0}function aI(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function c(f){try{l(r.next(f))}catch(p){s(p)}}function u(f){try{l(r.throw(f))}catch(p){s(p)}}function l(f){f.done?o(f.value):i(f.value).then(c,u)}l((r=r.apply(n,e||[])).next())})}function sI(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Lr(n){return this instanceof Lr?(this.v=n,this):new Lr(n)}function cI(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function c(y,S){r[y]&&(i[y]=function(R){return new Promise(function(M,j){o.push([y,R,M,j])>1||u(y,R)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(R){m(o[0][3],R)}}function l(y){y.value instanceof Lr?Promise.resolve(y.value.v).then(f,p):m(o[0][2],y)}function f(y){u("next",y)}function p(y){u("throw",y)}function m(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function uI(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof sI=="function"?sI(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(c,u){s=n[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var wc=n=>n&&typeof n.length=="number"&&typeof n!="function";function Dc(n){return ce(n?.then)}function Tc(n){return ce(n[Vi])}function bc(n){return Symbol.asyncIterator&&ce(n?.[Symbol.asyncIterator])}function Cc(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function SN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Sc=SN();function Ac(n){return ce(n?.[Sc])}function Mc(n){return cI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Lr(t.read());if(i)return yield Lr(void 0);yield yield Lr(r)}}finally{t.releaseLock()}})}function Nc(n){return ce(n?.getReader)}function Gn(n){if(n instanceof De)return n;if(n!=null){if(Tc(n))return AN(n);if(wc(n))return MN(n);if(Dc(n))return NN(n);if(bc(n))return lI(n);if(Ac(n))return RN(n);if(Nc(n))return PN(n)}throw Cc(n)}function AN(n){return new De(e=>{let t=n[Vi]();if(ce(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function MN(n){return new De(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function NN(n){return new De(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,_c)})}function RN(n){return new De(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function lI(n){return new De(e=>{ON(n,e).catch(t=>e.error(t))})}function PN(n){return lI(Mc(n))}function ON(n,e){var t,r,i,o;return aI(this,void 0,void 0,function*(){try{for(t=uI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Kt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Rc(n,e=0){return ji((t,r)=>{t.subscribe(Bi(r,i=>Kt(r,n,()=>r.next(i),e),()=>Kt(r,n,()=>r.complete(),e),i=>Kt(r,n,()=>r.error(i),e)))})}function Pc(n,e=0){return ji((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function dI(n,e){return Gn(n).pipe(Pc(e),Rc(e))}function fI(n,e){return Gn(n).pipe(Pc(e),Rc(e))}function hI(n,e){return new De(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function pI(n,e){return new De(t=>{let r;return Kt(t,e,()=>{r=n[Sc](),Kt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ce(r?.return)&&r.return()})}function Oc(n,e){if(!n)throw new Error("Iterable cannot be null");return new De(t=>{Kt(t,e,()=>{let r=n[Symbol.asyncIterator]();Kt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function gI(n,e){return Oc(Mc(n),e)}function mI(n,e){if(n!=null){if(Tc(n))return dI(n,e);if(wc(n))return hI(n,e);if(Dc(n))return fI(n,e);if(bc(n))return Oc(n,e);if(Ac(n))return pI(n,e);if(Nc(n))return gI(n,e)}throw Cc(n)}function as(n,e){return e?mI(n,e):Gn(n)}function Qf(...n){let e=oI(n);return as(n,e)}function Vr(n,e){return ji((t,r)=>{let i=0;t.subscribe(Bi(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:xN}=Array;function kN(n,e){return xN(e)?n(...e):n(e)}function yI(n){return Vr(e=>kN(n,e))}var{isArray:FN}=Array,{getPrototypeOf:LN,prototype:VN,keys:jN}=Object;function vI(n){if(n.length===1){let e=n[0];if(FN(e))return{args:e,keys:null};if(BN(e)){let t=jN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function BN(n){return n&&typeof n=="object"&&LN(n)===VN}function _I(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Yf(...n){let e=iI(n),{args:t,keys:r}=vI(n),i=new De(o=>{let{length:s}=t;if(!s){o.complete();return}let c=new Array(s),u=s,l=s;for(let f=0;f<s;f++){let p=!1;Gn(t[f]).subscribe(Bi(o,m=>{p||(p=!0,l--),c[f]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?_I(r,c):c),o.complete())}))}});return e?i.pipe(yI(e)):i}var Jf;function xc(){return Jf}function Qt(n){let e=Jf;return Jf=n,e}var EI=Symbol("NotFound");function Ui(n){return n===EI||n?.name==="\u0275NotFound"}var fh="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",q=class extends Error{code;constructor(e,t){super($r(e,t)),this.code=e}};function $N(n){return`NG0${Math.abs(n)}`}function $r(n,e){return`${$N(n)}${e?": "+e:""}`}function he(n){for(let e in n)if(n[e]===he)return e;throw Error("")}function bI(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function zn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(zn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function hh(n,e){return n?e?`${n} ${e}`:n:e||""}var GN=he({__forward_ref__:he});function pn(n){return n.__forward_ref__=pn,n.toString=function(){return zn(this())},n}function Be(n){return ph(n)?n():n}function ph(n){return typeof n=="function"&&n.hasOwnProperty(GN)&&n.__forward_ref__===pn}function le(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Qn(n){return{providers:n.providers||[],imports:n.imports||[]}}function jc(n){return zN(n,Bc)}function zN(n,e){return n.hasOwnProperty(e)&&n[e]||null}function qN(n){let e=n?.[Bc]??null;return e||null}function Xf(n){return n&&n.hasOwnProperty(Fc)?n[Fc]:null}var Bc=he({\u0275prov:he}),Fc=he({\u0275inj:he}),$=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=le({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function gh(n){return n&&!!n.\u0275providers}var mh=he({\u0275cmp:he}),yh=he({\u0275dir:he}),vh=he({\u0275pipe:he});var us=he({\u0275fac:he}),Gr=he({__NG_ELEMENT_ID__:he}),II=he({__NG_ENV_ID__:he});function Uc(n){return typeof n=="string"?n:n==null?"":String(n)}function CI(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Uc(n)}var SI=he({ngErrorCode:he}),WN=he({ngErrorMessage:he}),KN=he({ngTokenPath:he});function _h(n,e){return AI("",-200,e)}function Hc(n,e){throw new q(-201,!1)}function AI(n,e,t){let r=new q(e,n);return r[SI]=e,r[WN]=n,t&&(r[KN]=t),r}function QN(n){return n[SI]}var eh;function MI(){return eh}function Ze(n){let e=eh;return eh=n,e}function Eh(n,e,t){let r=jc(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;Hc(n,"Injector")}var YN={},jr=YN,JN="__NG_DI_FLAG__",th=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Br(t)||0;try{return this.injector.get(e,r&8?null:jr,r)}catch(i){if(Ui(i))return i;throw i}}};function ZN(n,e=0){let t=xc();if(t===void 0)throw new q(-203,!1);if(t===null)return Eh(n,void 0,e);{let r=XN(e),i=t.retrieve(n,r);if(Ui(i)){if(r.optional)return null;throw i}return i}}function fe(n,e=0){return(MI()||ZN)(Be(n),e)}function B(n,e){return fe(n,Br(e))}function Br(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function XN(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function nh(n){let e=[];for(let t=0;t<n.length;t++){let r=Be(n[t]);if(Array.isArray(r)){if(r.length===0)throw new q(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=eR(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(fe(i,o))}else e.push(fe(r))}return e}function eR(n){return n[JN]}function qn(n,e){let t=n.hasOwnProperty(us);return t?n[us]:null}function $c(n,e){n.forEach(t=>Array.isArray(t)?$c(t,e):e(t))}function Ih(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function hs(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function NI(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function RI(n,e,t){let r=$i(n,e);return r>=0?n[r|1]=t:(r=~r,NI(n,r,e,t)),r}function Gc(n,e){let t=$i(n,e);if(t>=0)return n[t|1]}function $i(n,e){return tR(n,e,1)}function tR(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Yn={},lt=[],gn=new $(""),wh=new $("",-1),Dh=new $(""),ls=class{get(e,t=jr){if(t===jr){let i=AI("",-201);throw i.name="\u0275NotFound",i}return t}};function Jn(n){return n[mh]||null}function zc(n){return n[yh]||null}function Th(n){return n[vh]||null}function Zn(n){return{\u0275providers:n}}function PI(n){return Zn([{provide:gn,multi:!0,useValue:n}])}function OI(...n){return{\u0275providers:qc(!0,n),\u0275fromNgModule:!0}}function qc(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return $c(e,s=>{let c=s;Lc(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&xI(i,o),t}function xI(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];bh(i,o=>{e(o,r)})}}function Lc(n,e,t,r){if(n=Be(n),!n)return!1;let i=null,o=Xf(n),s=!o&&Jn(n);if(!o&&!s){let u=n.ngModule;if(o=Xf(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Lc(l,e,t,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{$c(o.imports,f=>{Lc(f,e,t,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&xI(l,e)}if(!c){let l=qn(i)||(()=>new i);e({provide:i,useFactory:l,deps:lt},i),e({provide:Dh,useValue:i,multi:!0},i),e({provide:gn,useValue:()=>fe(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=n;bh(u,f=>{e(f,l)})}}else return!1;return i!==n&&n.providers!==void 0}function bh(n,e){for(let t of n)gh(t)&&(t=t.\u0275providers),Array.isArray(t)?bh(t,e):e(t)}var nR=he({provide:String,useValue:he});function kI(n){return n!==null&&typeof n=="object"&&nR in n}function rR(n){return!!(n&&n.useExisting)}function iR(n){return!!(n&&n.useFactory)}function Ur(n){return typeof n=="function"}function FI(n){return!!n.useClass}var ps=new $(""),kc={},wI={},Zf;function gs(){return Zf===void 0&&(Zf=new ls),Zf}var dt=class{},Hr=class extends dt{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,ih(e,s=>this.processProvider(s)),this.records.set(wh,Hi(void 0,this)),i.has("environment")&&this.records.set(dt,Hi(void 0,this));let o=this.records.get(ps);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Dh,lt,{self:!0}))}retrieve(e,t){let r=Br(t)||0;try{return this.get(e,jr,r)}catch(i){if(Ui(i))return i;throw i}}destroy(){cs(this),this._destroyed=!0;let e=J(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),J(e)}}onDestroy(e){return cs(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){cs(this);let t=Qt(this),r=Ze(void 0),i;try{return e()}finally{Qt(t),Ze(r)}}get(e,t=jr,r){if(cs(this),e.hasOwnProperty(II))return e[II](this);let i=Br(r),o,s=Qt(this),c=Ze(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let f=uR(e)&&jc(e);f&&this.injectableDefInScope(f)?l=Hi(rh(e),kc):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?gs():this.parent;return t=i&8&&t===jr?null:t,u.get(e,t)}catch(u){let l=QN(u);throw l===-200||l===-201?new q(l,null):u}finally{Ze(c),Qt(s)}}resolveInjectorInitializers(){let e=J(null),t=Qt(this),r=Ze(void 0),i;try{let o=this.get(gn,lt,{self:!0});for(let s of o)s()}finally{Qt(t),Ze(r),J(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(zn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Be(e);let t=Ur(e)?e:Be(e&&e.provide),r=sR(e);if(!Ur(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Hi(void 0,kc,!0),i.factory=()=>nh(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=J(null);try{if(t.value===wI)throw _h(zn(e));return t.value===kc&&(t.value=wI,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&cR(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{J(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Be(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function rh(n){let e=jc(n),t=e!==null?e.factory:qn(n);if(t!==null)return t;if(n instanceof $)throw new q(204,!1);if(n instanceof Function)return oR(n);throw new q(204,!1)}function oR(n){if(n.length>0)throw new q(204,!1);let t=qN(n);return t!==null?()=>t.factory(n):()=>new n}function sR(n){if(kI(n))return Hi(void 0,n.useValue);{let e=Ch(n);return Hi(e,kc)}}function Ch(n,e,t){let r;if(Ur(n)){let i=Be(n);return qn(i)||rh(i)}else if(kI(n))r=()=>Be(n.useValue);else if(iR(n))r=()=>n.useFactory(...nh(n.deps||[]));else if(rR(n))r=(i,o)=>fe(Be(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Be(n&&(n.useClass||n.provide));if(aR(n))r=()=>new i(...nh(n.deps));else return qn(i)||rh(i)}return r}function cs(n){if(n.destroyed)throw new q(205,!1)}function Hi(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function aR(n){return!!n.deps}function cR(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function uR(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function ih(n,e){for(let t of n)Array.isArray(t)?ih(t,e):t&&gh(t)?ih(t.\u0275providers,e):e(t)}function ms(n,e){let t;n instanceof Hr?(cs(n),t=n):t=new th(n);let r,i=Qt(t),o=Ze(void 0);try{return e()}finally{Qt(i),Ze(o)}}function LI(){return MI()!==void 0||xc()!=null}var Xe=0,U=1,K=2,Te=3,Tt=4,bt=5,ft=6,Gi=7,Ge=8,Ct=9,mn=10,ge=11,zi=12,Sh=13,zr=14,st=15,qr=16,Wr=17,Kr=18,ys=19,Ah=20,hn=21,Wc=22,vs=23,ht=24,Qr=25,_s=26,ye=27,VI=1,kt=6,Jt=7,Es=8,Is=9,et=10;function pt(n){return Array.isArray(n)&&typeof n[VI]=="object"}function gt(n){return Array.isArray(n)&&n[VI]===!0}function Mh(n){return(n.flags&4)!==0}function yn(n){return n.componentOffset>-1}function ws(n){return(n.flags&1)===1}function Zt(n){return!!n.template}function Yr(n){return(n[K]&512)!==0}function Xn(n){return(n[K]&256)===256}var Nh="svg",jI="math";function mt(n){for(;Array.isArray(n);)n=n[Xe];return n}function Rh(n,e){return mt(e[n])}function St(n,e){return mt(e[n.index])}function qi(n,e){return n.data[e]}function Ph(n,e){return n[e]}function Oh(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function At(n,e){let t=e[n];return pt(t)?t:t[Xe]}function Kc(n){return(n[K]&128)===128}function BI(n){return gt(n[Te])}function Jr(n,e){return e==null?null:n[e]}function xh(n){n[Wr]=0}function kh(n){n[K]&1024||(n[K]|=1024,Kc(n)&&Wi(n))}function UI(n,e){for(;n>0;)e=e[zr],n--;return e}function Ds(n){return!!(n[K]&9216||n[ht]?.dirty)}function Qc(n){n[mn].changeDetectionScheduler?.notify(8),n[K]&64&&(n[K]|=1024),Ds(n)&&Wi(n)}function Wi(n){n[mn].changeDetectionScheduler?.notify(0);let e=Wn(n);for(;e!==null&&!(e[K]&8192||(e[K]|=8192,!Kc(e)));)e=Wn(e)}function Fh(n,e){if(Xn(n))throw new q(911,!1);n[hn]===null&&(n[hn]=[]),n[hn].push(e)}function HI(n,e){if(n[hn]===null)return;let t=n[hn].indexOf(e);t!==-1&&n[hn].splice(t,1)}function Wn(n){let e=n[Te];return gt(e)?e[Te]:e}function $I(n){return n[Gi]??=[]}function GI(n){return n.cleanup??=[]}var Z={lFrame:ow(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var oh=!1;function zI(){return Z.lFrame.elementDepthCount}function qI(){Z.lFrame.elementDepthCount++}function Lh(){Z.lFrame.elementDepthCount--}function Vh(){return Z.bindingsEnabled}function jh(){return Z.skipHydrationRootTNode!==null}function Bh(n){return Z.skipHydrationRootTNode===n}function WI(n){Z.skipHydrationRootTNode=n}function Uh(){Z.skipHydrationRootTNode=null}function me(){return Z.lFrame.lView}function Mt(){return Z.lFrame.tView}function Ts(n){return Z.lFrame.contextLView=n,n[Ge]}function bs(n){return Z.lFrame.contextLView=null,n}function at(){let n=Hh();for(;n!==null&&n.type===64;)n=n.parent;return n}function Hh(){return Z.lFrame.currentTNode}function KI(){let n=Z.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ki(n,e){let t=Z.lFrame;t.currentTNode=n,t.isParent=e}function $h(){return Z.lFrame.isParent}function QI(){Z.lFrame.isParent=!1}function YI(){return Z.lFrame.contextLView}function Gh(){return oh}function zh(n){let e=oh;return oh=n,e}function JI(){let n=Z.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function ZI(n){return Z.lFrame.bindingIndex=n}function Yc(){return Z.lFrame.bindingIndex++}function XI(n){let e=Z.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function ew(){return Z.lFrame.inI18n}function tw(n,e){let t=Z.lFrame;t.bindingIndex=t.bindingRootIndex=n,Jc(e)}function nw(){return Z.lFrame.currentDirectiveIndex}function Jc(n){Z.lFrame.currentDirectiveIndex=n}function rw(n){let e=Z.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function qh(n){Z.lFrame.currentQueryIndex=n}function lR(n){let e=n[U];return e.type===2?e.declTNode:e.type===1?n[bt]:null}function Wh(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=lR(o),i===null||(o=o[zr],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Z.lFrame=iw();return r.currentTNode=e,r.lView=n,!0}function Zc(n){let e=iw(),t=n[U];Z.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function iw(){let n=Z.lFrame,e=n===null?null:n.child;return e===null?ow(n):e}function ow(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function sw(){let n=Z.lFrame;return Z.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Kh=sw;function Xc(){let n=sw();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function aw(n){return(Z.lFrame.contextLView=UI(n,Z.lFrame.contextLView))[Ge]}function Zr(){return Z.lFrame.selectedIndex}function er(n){Z.lFrame.selectedIndex=n}function Qh(){let n=Z.lFrame;return qi(n.tView,n.selectedIndex)}function tr(){Z.lFrame.currentNamespace=Nh}function Qi(){dR()}function dR(){Z.lFrame.currentNamespace=null}function Yh(){return Z.lFrame.currentNamespace}var cw=!0;function eu(){return cw}function vn(n){cw=n}function sh(n,e=null,t=null,r){let i=uw(n,e,t,r);return i.resolveInjectorInitializers(),i}function uw(n,e=null,t=null,r,i=new Set){let o=[t||lt,OI(n)];return r=r||(typeof n=="object"?void 0:zn(n)),new Hr(o,e||gs(),r||null,i)}var xt=class n{static THROW_IF_NOT_FOUND=jr;static NULL=new ls;static create(e,t){if(Array.isArray(e))return sh({name:""},t,e,"");{let r=e.name??"";return sh({name:r},e.parent,e.providers,r)}}static \u0275prov=le({token:n,providedIn:"any",factory:()=>fe(wh)});static __NG_ELEMENT_ID__=-1},Ft=new $(""),nr=(()=>{class n{static __NG_ELEMENT_ID__=fR;static __NG_ENV_ID__=t=>t}return n})(),ah=class extends nr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Xn(this._lView)}onDestroy(e){let t=this._lView;return Fh(t,e),()=>HI(t,e)}};function fR(){return new ah(me())}var lw=!1,rr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Fr(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new De(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=le({token:n,providedIn:"root",factory:()=>new n})}return n})(),ch=class extends Wt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,LI()&&(this.destroyRef=B(nr,{optional:!0})??void 0,this.pendingTasks=B(rr,{optional:!0})??void 0)}emit(e){let t=J(null);try{super.next(e)}finally{J(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof Je&&e.add(c),c}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},it=ch;function Vc(...n){}function Jh(n){let e,t;function r(){n=Vc;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Zh(n){return queueMicrotask(()=>n()),()=>{n=Vc}}var Xh="isAngularZone",ds=Xh+"_ID",hR=0,ot=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new it(!1);onMicrotaskEmpty=new it(!1);onStable=new it(!1);onError=new it(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=lw}=e;if(typeof Zone>"u")throw new q(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,mR(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Xh)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new q(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new q(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,pR,Vc,Vc);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},pR={};function ep(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function gR(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){Jh(()=>{n.callbackScheduled=!1,uh(n),n.isCheckStableRunning=!0,ep(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),uh(n)}function mR(n){let e=()=>{gR(n)},t=hR++;n._inner=n._inner.fork({name:"angular",properties:{[Xh]:!0,[ds]:t,[ds+t]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(yR(u))return r.invokeTask(o,s,c,u);try{return DI(n),r.invokeTask(o,s,c,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),TI(n)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return DI(n),r.invoke(o,s,c,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!vR(u)&&e(),TI(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,uh(n),ep(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function uh(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function DI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function TI(n){n._nesting--,ep(n)}var fs=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new it;onMicrotaskEmpty=new it;onStable=new it;onError=new it;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function yR(n){return dw(n,"__ignore_ng_zone__")}function vR(n){return dw(n,"__scheduler_tick__")}function dw(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Yt=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Xt=new $("",{factory:()=>{let n=B(ot),e=B(dt),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(Yt),t.handleError(r))})}}}),fw={provide:gn,useValue:()=>{let n=B(Yt,{optional:!0})},multi:!0},_R=new $("",{factory:()=>{let n=B(Ft).defaultView;if(!n)return;let e=B(Xt),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),B(nr).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function tp(){return Zn([PI(()=>void B(_R))])}function ct(n,e){let[t,r,i]=jf(n,e?.equal),o=t,s=o[Dt];return o.set=r,o.update=i,o.asReadonly=hw.bind(o),o}function hw(){let n=this[Dt];if(n.readonlyFn===void 0){let e=()=>this();e[Dt]=n,n.readonlyFn=e}return n.readonlyFn}var tu=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=ER}return n})();function ER(){return new tu(me(),at())}var Kn=class{},Cs=new $("",{factory:()=>!0});var np=new $(""),nu=(()=>{class n{internalPendingTasks=B(rr);scheduler=B(Kn);errorHandler=B(Xt);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=le({token:n,providedIn:"root",factory:()=>new n})}return n})(),rp=(()=>{class n{static \u0275prov=le({token:n,providedIn:"root",factory:()=>new lh})}return n})(),lh=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},dh=class{[Dt];constructor(e){this[Dt]=e}destroy(){this[Dt].destroy()}};function yt(n){return Uf(n)}var ru={JSACTION:"jsaction"};function ks(n){return{toString:n}.toString()}function AR(n){return typeof n=="function"}function Ww(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var lu=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},io=(()=>{let n=()=>Kw;return n.ngInherit=!0,n})();function Kw(n){return n.type.prototype.ngOnChanges&&(n.setInput=NR),MR}function MR(){let n=Yw(this),e=n?.current;if(e){let t=n.previous;if(t===Yn)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function NR(n,e,t,r,i){let o=this.declaredInputs[r],s=Yw(n)||RR(n,{previous:Yn,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new lu(l&&l.currentValue,t,u===Yn),Ww(n,e,i,t)}var Qw="__ngSimpleChanges__";function Yw(n){return n[Qw]||null}function RR(n,e){return n[Qw]=e}var pw=[];var ue=function(n,e=null,t){for(let r=0;r<pw.length;r++){let i=pw[r];i(n,e,t)}};function PR(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=Kw(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Jw(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(n.contentHooks??=[]).push(-t,s),c&&((n.contentHooks??=[]).push(t,c),(n.contentCheckHooks??=[]).push(t,c)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function ou(n,e,t){Zw(n,e,3,t)}function su(n,e,t,r){(n[K]&3)===t&&Zw(n,e,t,r)}function ip(n,e){let t=n[K];(t&3)===e&&(t&=16383,t+=1,n[K]=t)}function Zw(n,e,t,r){let i=r!==void 0?n[Wr]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(n[Wr]+=65536),(c<o||o==-1)&&(OR(n,t,e,u),n[Wr]=(n[Wr]&4294901760)+u+2),u++}function gw(n,e){ue(4,n,e);let t=J(null);try{e.call(n)}finally{J(t),ue(5,n,e)}}function OR(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],c=n[s];i?n[K]>>14<n[Wr]>>16&&(n[K]&3)===e&&(n[K]+=16384,gw(c,o)):gw(c,o)}var Ji=-1,ti=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function xR(n){return(n.flags&8)!==0}function kR(n){return(n.flags&16)!==0}function FR(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],c=t[r++];n.setAttribute(e,s,c,o)}else{let o=i,s=t[++r];VR(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function LR(n){return n===3||n===4||n===6}function VR(n){return n.charCodeAt(0)===64}function eo(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?mw(n,t,i,null,e[++r]):mw(n,t,i,null,null))}}return n}function mw(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let c=n[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<n.length;){let c=n[o];if(typeof c=="number")break;if(c===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function Xw(n){return n!==Ji}function du(n){return n&32767}function jR(n){return n>>16}function fu(n,e){let t=jR(n),r=e;for(;t>0;)r=r[zr],t--;return r}var yp=!0;function hu(n){let e=yp;return yp=n,e}var BR=256,eD=BR-1,tD=5,UR=0,en={};function HR(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Gr)&&(r=t[Gr]),r==null&&(r=t[Gr]=UR++);let i=r&eD,o=1<<i;e.data[n+(i>>tD)]|=o}function pu(n,e){let t=nD(n,e);if(t!==-1)return t;let r=e[U];r.firstCreatePass&&(n.injectorIndex=e.length,op(r.data,n),op(e,null),op(r.blueprint,null));let i=jp(n,e),o=n.injectorIndex;if(Xw(i)){let s=du(i),c=fu(i,e),u=c[U].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function op(n,e){n.push(0,0,0,0,0,0,0,0,e)}function nD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function jp(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=aD(i),r===null)return Ji;if(t++,i=i[zr],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ji}function vp(n,e,t){HR(n,e,t)}function rD(n,e,t){if(t&8||n!==void 0)return n;Hc(e,"NodeInjector")}function iD(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Ct],o=Ze(void 0);try{return i?i.get(e,r,t&8):Eh(e,r,t&8)}finally{Ze(o)}}return rD(r,e,t)}function oD(n,e,t,r=0,i){if(n!==null){if(e[K]&2048&&!(r&2)){let s=WR(n,e,t,r,en);if(s!==en)return s}let o=sD(n,e,t,r,en);if(o!==en)return o}return iD(e,t,r,i)}function sD(n,e,t,r,i){let o=zR(t);if(typeof o=="function"){if(!Wh(e,n,r))return r&1?rD(i,t,r):iD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Hc(t);else return s}finally{Kh()}}else if(typeof o=="number"){let s=null,c=nD(n,e),u=Ji,l=r&1?e[st][bt]:null;for((c===-1||r&4)&&(u=c===-1?jp(n,e):e[c+8],u===Ji||!vw(r,!1)?c=-1:(s=e[U],c=du(u),e=fu(u,e)));c!==-1;){let f=e[U];if(yw(o,c,f.data)){let p=$R(c,e,t,s,r,l);if(p!==en)return p}u=e[c+8],u!==Ji&&vw(r,e[U].data[c+8]===l)&&yw(o,c,e)?(s=f,c=du(u),e=fu(u,e)):c=-1}}return i}function $R(n,e,t,r,i,o){let s=e[U],c=s.data[n+8],u=r==null?yn(c)&&yp:r!=s&&(c.type&3)!==0,l=i&1&&o===c,f=GR(c,s,t,u,l);return f!==null?gu(e,s,f,c,i):en}function GR(n,e,t,r,i){let o=n.providerIndexes,s=e.data,c=o&1048575,u=n.directiveStart,l=n.directiveEnd,f=o>>20,p=r?c:c+f,m=i?c+f:l;for(let y=p;y<m;y++){let S=s[y];if(y<u&&t===S||y>=u&&S.type===t)return y}if(i){let y=s[u];if(y&&Zt(y)&&y.type===t)return u}return null}function gu(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof ti){let c=o;if(c.resolving){let y=CI(s[t]);throw _h(y)}let u=hu(c.canSeeViewProviders);c.resolving=!0;let l=s[t].type||s[t],f,p=c.injectImpl?Ze(c.injectImpl):null,m=Wh(n,r,0);try{o=n[t]=c.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&PR(t,s[t],e)}finally{p!==null&&Ze(p),hu(u),c.resolving=!1,Kh()}}return o}function zR(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Gr)?n[Gr]:void 0;return typeof e=="number"?e>=0?e&eD:qR:e}function yw(n,e,t){let r=1<<n;return!!(t[e+(n>>tD)]&r)}function vw(n,e){return!(n&2)&&!(n&1&&e)}var ei=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return oD(this._tNode,this._lView,e,Br(r),t)}};function qR(){return new ei(at(),me())}function Fs(n){return ks(()=>{let e=n.prototype.constructor,t=e[us]||_p(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[us]||_p(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function _p(n){return ph(n)?()=>{let e=_p(Be(n));return e&&e()}:qn(n)}function WR(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[K]&2048&&!Yr(s);){let c=sD(o,s,t,r|2,en);if(c!==en)return c;let u=o.parent;if(!u){let l=s[Ah];if(l){let f=l.get(t,en,r);if(f!==en)return f}u=aD(s),s=s[zr]}o=u}return i}function aD(n){let e=n[U],t=e.type;return t===2?e.declTNode:t===1?n[bt]:null}function KR(){return Tu(at(),me())}function Tu(n,e){return new oo(St(n,e))}var oo=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=KR}return n})();var cD="ngSkipHydration",QR="ngskiphydration";function uD(n){let e=n.mergedAttrs;if(e===null)return!1;for(let t=0;t<e.length;t+=2){let r=e[t];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===QR)return!0}return!1}function lD(n){return n.hasAttribute(cD)}function mu(n){return(n.flags&128)===128}function dD(n){if(mu(n))return!0;let e=n.parent;for(;e;){if(mu(n)||uD(e))return!0;e=e.parent}return!1}var Bp=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(Bp||{}),fD=new Map,YR=0;function JR(){return YR++}function ZR(n){fD.set(n[ys],n)}function Ep(n){fD.delete(n[ys])}var _w="__ngContext__";function to(n,e){pt(e)?(n[_w]=e[ys],ZR(e)):n[_w]=e}function hD(n){return gD(n[zi])}function pD(n){return gD(n[Tt])}function gD(n){for(;n!==null&&!gt(n);)n=n[Tt];return n}var Ip;function Up(n){Ip=n}function Ls(){if(Ip!==void 0)return Ip;if(typeof document<"u")return document;throw new q(210,!1)}var nn=new $("",{factory:()=>XR}),XR="ng";var bu=new $(""),_n=new $("",{providedIn:"platform",factory:()=>"unknown"});var Cu=new $("",{factory:()=>Ls().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function eP(){let n=new ii;return n.store=tP(Ls(),B(nn)),n}var ii=(()=>{class n{static \u0275prov=le({token:n,providedIn:"root",factory:eP});store={};onSerializeCallbacks={};get(t,r){return this.store[t]!==void 0?this.store[t]:r}set(t,r){this.store[t]=r}remove(t){delete this.store[t]}hasKey(t){return this.store.hasOwnProperty(t)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(t,r){this.onSerializeCallbacks[t]=r}toJson(){for(let t in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(t))try{this.store[t]=this.onSerializeCallbacks[t]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}}return n})();function tP(n,e){let t=n.getElementById(e+"-state");if(t?.textContent)try{return JSON.parse(t.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var mD="h",yD="b",nP="f",rP="n",vD="e",_D="t",Su="c",Hp="x",Ms="r",ED="i",ID="n",$p="d";var wD="di",DD="s",TD="p";var Vs=new $(""),bD=!1,Gp=new $("",{factory:()=>bD});var zp=new $(""),CD=!1,SD=new $(""),qp=new $("",{factory:()=>new Map});var js="ngb";var AD=(n,e,t)=>{let r=n,i=r.__jsaction_fns??new Map,o=i.get(e)??[];o.push(t),i.set(e,o),r.__jsaction_fns=i},MD=(n,e)=>{let t=n,r=t.getAttribute(js)??"",i=e.get(r)??new Set;i.has(t)||i.add(t),e.set(r,i)};var ND=n=>{n.removeAttribute(ru.JSACTION),n.removeAttribute(js),n.__jsaction_fns=void 0},RD=new $("",{factory:()=>({})});function Wp(n,e){let t=e?.__jsaction_fns?.get(n.type);if(!(!t||!e?.isConnected))for(let r of t)r(n)}var wp=new Map;function PD(n,e){return wp.set(n,e),()=>wp.delete(n)}var Ew=!1,OD=(n,e,t,r)=>{};function iP(n,e,t,r){OD(n,e,t,r)}function xD(){Ew||(OD=(n,e,t,r)=>{let i=n[Ct].get(nn);wp.get(i)?.(e,t,r)},Ew=!0)}var Au=new $("");function Mu(n){return(n.flags&32)===32}var oP="__nghData__",Kp=oP,sP="__nghDeferData__",kD=sP;var au="ngh",FD="nghm",LD=()=>null;function aP(n,e,t=!1){let r=n.getAttribute(au);if(r==null)return null;let[i,o]=r.split("|");if(r=t?o:i,!r)return null;let s=o?`|${o}`:"",c=t?i:s,u={};if(r!==""){let f=e.get(ii,null,{optional:!0});f!==null&&(u=f.get(Kp,[])[Number(r)])}let l={data:u,firstChild:n.firstChild??null};return t&&(l.firstChild=n,Nu(l,0,n.nextSibling)),c?n.setAttribute(au,c):n.removeAttribute(au),l}function VD(){LD=aP}function jD(n,e,t=!1){return LD(n,e,t)}function BD(n){let e=n._lView;return e[U].type===2?null:(Yr(e)&&(e=e[ye]),e)}function cP(n){return n.textContent?.replace(/\s/gm,"")}function uP(n){let e=Ls(),t=e.createNodeIterator(n,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=cP(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=t.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function Nu(n,e,t){n.segmentHeads??={},n.segmentHeads[e]=t}function Dp(n,e){return n.segmentHeads?.[e]??null}function UD(n){return n.get(SD,!1,{optional:!0})}function lP(n,e){let t=n.data,r=t[vD]?.[e]??null;return r===null&&t[Su]?.[e]&&(r=Qp(n,e)),r}function HD(n,e){return n.data[Su]?.[e]??null}function Qp(n,e){let t=HD(n,e)??[],r=0;for(let i of t)r+=i[Ms]*(i[Hp]??1);return r}function dP(n){if(typeof n.disconnectedNodes>"u"){let e=n.data[$p];n.disconnectedNodes=e?new Set(e):null}return n.disconnectedNodes}function $D(n,e){if(typeof n.disconnectedNodes>"u"){let t=n.data[$p];n.disconnectedNodes=t?new Set(t):null}return!!dP(n)?.has(e)}function Ru(n,e){let t=n[ft];return t!==null&&!jh()&&!Mu(e)&&!$D(t,e.index-ye)}function fP(n,e){let t=e.get(Au),i=e.get(ii).get(kD,{}),o=!1,s=n,c=null,u=[];for(;!o&&s;){o=t.has(s);let l=t.hydrating.get(s);if(c===null&&l!=null){c=l.promise;break}u.unshift(s),s=i[s][TD]}return{parentBlockPromise:c,hydrationQueue:u}}function sp(n){return!!n&&n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===FD}function Iw(n){for(;n&&n.nodeType===Node.TEXT_NODE;)n=n.previousSibling;return n}function GD(n){for(let r of n.body.childNodes)if(sp(r))return;let e=Iw(n.body.previousSibling);if(sp(e))return;let t=Iw(n.head.lastChild);if(!sp(t))throw new q(-507,!1)}function zD(n,e){let t=n.contentQueries;if(t!==null){let r=J(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let c=n.data[s];qh(o),c.contentQueries(2,e[s],s)}}}finally{J(r)}}}function Tp(n,e,t){qh(0);let r=J(null);try{e(n,t)}finally{J(r)}}function qD(n,e,t){if(Mh(e)){let r=J(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=n.data[s];if(c.contentQueries){let u=t[s];c.contentQueries(1,u,s)}}}finally{J(r)}}}var Vt=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(Vt||{});var bp=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${fh})`}};function Yp(n){return n instanceof bp?n.changingThisBreaksApplicationSecurity:n}var hP=/^>|^->|<!--|-->|--!>|<!-$/g,pP=/(<|>)/g,gP="\u200B$1\u200B";function mP(n){return n.replace(hP,e=>e.replace(pP,gP))}function WD(n){return n.ownerDocument.body}function yP(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var KD="ng-template";function vP(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&yP(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Jp(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Jp(n){return n.type===4&&n.value!==KD}function _P(n,e,t){let r=n.type===4&&!t?KD:n.value;return e===r}function EP(n,e,t){let r=4,i=n.attrs,o=i!==null?DP(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!Lt(r)&&!Lt(u))return!1;if(s&&Lt(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!_P(n,u,t)||u===""&&e.length===1){if(Lt(r))return!1;s=!0}}else if(r&8){if(i===null||!vP(n,i,u,t)){if(Lt(r))return!1;s=!0}}else{let l=e[++c],f=IP(u,i,Jp(n),t);if(f===-1){if(Lt(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(Lt(r))return!1;s=!0}}}}return Lt(r)||s}function Lt(n){return(n&1)===0}function IP(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return TP(e,n)}function wP(n,e,t=!1){for(let r=0;r<e.length;r++)if(EP(n,e[r],t))return!0;return!1}function DP(n){for(let e=0;e<n.length;e++){let t=n[e];if(LR(t))return e}return n.length}function TP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function ww(n,e){return n?":not("+e.trim()+")":e}function bP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let c=n[++t];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Lt(s)&&(e+=ww(o,i),i=""),r=s,o=o||!Lt(r);t++}return i!==""&&(e+=ww(o,i)),e}function CP(n){return n.map(bP).join(",")}function SP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Lt(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var En={};function QD(n,e){return n.createText(e)}function AP(n,e,t){n.setValue(e,t)}function YD(n,e){return n.createComment(mP(e))}function Zp(n,e,t){return n.createElement(e,t)}function yu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function JD(n,e,t){n.appendChild(e,t)}function Dw(n,e,t,r,i){r!==null?yu(n,e,t,r,i):JD(n,e,t)}function Xp(n,e,t,r){n.removeChild(null,e,t,r)}function ZD(n){n.textContent=""}function MP(n,e,t){n.setAttribute(e,"style",t)}function NP(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function XD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&FR(n,e,r),i!==null&&NP(n,e,i),o!==null&&MP(n,e,o)}function eg(n,e,t,r,i,o,s,c,u,l,f){let p=ye+r,m=p+i,y=RP(p,m),S=typeof l=="function"?l():l;return y[U]={type:n,blueprint:y,template:t,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:f}}function RP(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:En);return t}function PP(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=eg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function tg(n,e,t,r,i,o,s,c,u,l,f){let p=e.blueprint.slice();return p[Xe]=i,p[K]=r|4|128|8|64|1024,(l!==null||n&&n[K]&2048)&&(p[K]|=2048),xh(p),p[Te]=p[zr]=n,p[Ge]=t,p[mn]=s||n&&n[mn],p[ge]=c||n&&n[ge],p[Ct]=u||n&&n[Ct]||null,p[bt]=o,p[ys]=JR(),p[ft]=f,p[Ah]=l,p[st]=e.type==2?n[st]:p,p}function OP(n,e,t){let r=St(e,n),i=PP(t),o=n[mn].rendererFactory,s=ng(n,tg(n,i,null,eT(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function eT(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function tT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function ng(n,e){return n[zi]?n[Sh][Tt]=e:n[zi]=e,n[Sh]=e,e}function Ce(n=1){nT(Mt(),me(),Zr()+n,!1)}function nT(n,e,t,r){if(!r)if((e[K]&3)===3){let o=n.preOrderCheckHooks;o!==null&&ou(e,o,t)}else{let o=n.preOrderHooks;o!==null&&su(e,o,0,t)}er(t)}var Pu=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Pu||{});function Cp(n,e,t,r){let i=J(null);try{let[o,s,c]=n.inputs[t],u=null;(s&Pu.SignalBased)!==0&&(u=e[o][Dt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):Ww(e,u,o,r)}finally{J(i)}}var tn=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(tn||{}),xP;function rg(n,e){return xP(n,e)}var no=new Set,Ou=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Ou||{}),or=new $(""),Tw=new Set;function oi(n){Tw.has(n)||(Tw.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var ig=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=le({token:n,providedIn:"root",factory:()=>new n})}return n})(),rT=[0,1,2,3],iT=(()=>{class n{ngZone=B(ot);scheduler=B(Kn);errorHandler=B(Yt,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){B(or,{optional:!0})}execute(){let t=this.sequences.size>0;t&&ue(16),this.executing=!0;for(let r of rT)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&ue(17)}register(t){let{view:r}=t;r!==void 0?((r[Qr]??=[]).push(t),Wi(r),r[K]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Ou.AFTER_NEXT_RENDER,t):t()}static \u0275prov=le({token:n,providedIn:"root",factory:()=>new n})}return n})(),vu=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Qr];e&&(this.view[Qr]=e.filter(t=>t!==this))}};function og(n,e){let t=e?.injector??B(xt);return oi("NgAfterNextRender"),FP(n,t,e,!0)}function kP(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function FP(n,e,t,r){let i=e.get(ig);i.impl??=e.get(iT);let o=e.get(or,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(nr):null,c=e.get(tu,null,{optional:!0}),u=new vu(i.impl,kP(n),c?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var LP=new $("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function oT(n,e,t){let r=n.get(LP);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function VP(n,e){for(let[t,r]of e)oT(n,r.animateFns)}function bw(n,e,t,r){let i=n?.[_s]?.enter;e!==null&&i&&i.has(t.index)&&VP(r,i)}function Yi(n,e,t,r,i,o,s,c){if(i!=null){let u,l=!1;gt(i)?u=i:pt(i)&&(l=!0,i=i[Xe]);let f=mt(i);n===0&&r!==null?(bw(c,r,o,t),s==null?JD(e,r,f):yu(e,r,f,s||null,!0)):n===1&&r!==null?(bw(c,r,o,t),yu(e,r,f,s||null,!0)):n===2?Cw(c,o,t,p=>{Xp(e,f,l,p)}):n===3&&Cw(c,o,t,()=>{e.destroyNode(f)}),u!=null&&JP(e,n,t,u,o,r,s)}}function jP(n,e){sT(n,e),e[Xe]=null,e[bt]=null}function BP(n,e,t,r,i,o){r[Xe]=i,r[bt]=e,xu(n,r,t,1,i,o)}function sT(n,e){e[mn].changeDetectionScheduler?.notify(9),xu(n,e,e[ge],2,null,null)}function UP(n){let e=n[zi];if(!e)return ap(n[U],n);for(;e;){let t=null;if(pt(e))t=e[zi];else{let r=e[et];r&&(t=r)}if(!t){for(;e&&!e[Tt]&&e!==n;)pt(e)&&ap(e[U],e),e=e[Te];e===null&&(e=n),pt(e)&&ap(e[U],e),t=e&&e[Tt]}e=t}}function sg(n,e){let t=n[Is],r=t.indexOf(e);t.splice(r,1)}function ag(n,e){if(Xn(e))return;let t=e[ge];t.destroyNode&&xu(n,e,t,3,null,null),UP(e)}function ap(n,e){if(Xn(e))return;let t=J(null);try{e[K]&=-129,e[K]|=256,e[ht]&&pc(e[ht]),GP(n,e),$P(n,e),e[U].type===1&&e[ge].destroy();let r=e[qr];if(r!==null&&gt(e[Te])){r!==e[Te]&&sg(r,e);let i=e[Kr];i!==null&&i.detachView(n)}Ep(e)}finally{J(t)}}function Cw(n,e,t,r){let i=n?.[_s];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&no.add(n),oT(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),c=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:f}=l();c.push(f)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),HP(n,r)}else n&&no.delete(n),r(!1)},i)}function HP(n,e){let t=n[_s]?.running;if(t){t.then(()=>{n[_s].running=void 0,no.delete(n),e(!0)});return}e(!1)}function $P(n,e){let t=n.cleanup,r=e[Gi];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let c=t[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[t[s+1]];t[s].call(c)}r!==null&&(e[Gi]=null);let i=e[hn];if(i!==null){e[hn]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[vs];if(o!==null){e[vs]=null;for(let s of o)s.destroy()}}function GP(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof ti)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];ue(4,c,u);try{u.call(c)}finally{ue(5,c,u)}}else{ue(4,i,o);try{o.call(i)}finally{ue(5,i,o)}}}}}function zP(n,e,t){return qP(n,e.parent,t)}function qP(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Xe];if(yn(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===Vt.None||i===Vt.Emulated)return null}return St(r,t)}function WP(n,e,t){return QP(n,e,t)}function KP(n,e,t){return n.type&40?St(n,t):null}var QP=KP,Sw;function cg(n,e,t,r){let i=zP(n,r,e),o=e[ge],s=r.parent||e[bt],c=WP(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)Dw(o,i,t[u],c,!1);else Dw(o,i,t,c,!1);Sw!==void 0&&Sw(o,r,e,t,i)}function Ss(n,e){if(e!==null){let t=e.type;if(t&3)return St(e,n);if(t&4)return Sp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Ss(n,r);{let i=n[e.index];return gt(i)?Sp(-1,i):mt(i)}}else{if(t&128)return Ss(n,e.next);if(t&32)return rg(e,n)()||mt(n[e.index]);{let r=aT(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Wn(n[st]);return Ss(i,r)}else return Ss(n,e.next)}}}return null}function aT(n,e){if(e!==null){let r=n[st][bt],i=e.projection;return r.projection[i]}return null}function Sp(n,e){let t=et+n+1;if(t<e.length){let r=e[t],i=r[U].firstChild;if(i!==null)return Ss(r,i)}return e[Jt]}function ug(n,e,t,r,i,o,s){for(;t!=null;){let c=r[Ct];if(t.type===128){t=t.next;continue}let u=r[t.index],l=t.type;if(s&&e===0&&(u&&to(mt(u),r),t.flags|=2),!Mu(t))if(l&8)ug(n,e,t.child,r,i,o,!1),Yi(e,n,c,i,u,t,o,r);else if(l&32){let f=rg(t,r),p;for(;p=f();)Yi(e,n,c,i,p,t,o,r);Yi(e,n,c,i,u,t,o,r)}else l&16?YP(n,e,r,t,i,o):Yi(e,n,c,i,u,t,o,r);t=s?t.projectionNext:t.next}}function xu(n,e,t,r,i,o){ug(t,r,n.firstChild,e,i,o,!1)}function YP(n,e,t,r,i,o){let s=t[st],u=s[bt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];Yi(e,n,t[Ct],i,f,r,o,t)}else{let l=u,f=s[Te];mu(r)&&(l.flags|=128),ug(n,e,l,f,i,o,!0)}}function JP(n,e,t,r,i,o,s){let c=r[Jt],u=mt(r);c!==u&&Yi(e,n,t,o,c,i,s);for(let l=et;l<r.length;l++){let f=r[l];xu(f[U],f,n,e,o,c)}}function ZP(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:tn.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=tn.Important),n.setStyle(t,r,i,o))}}function cT(n,e,t,r,i){let o=Zr(),s=r&2;try{er(-1),s&&e.length>ye&&nT(n,e,ye,!1),ue(s?2:0,i,t),t(r,i)}finally{er(o),ue(s?3:1,i,t)}}function lg(n,e,t){sO(n,e,t),(t.flags&64)===64&&aO(n,e,t)}function dg(n,e,t=St){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?t(e,n):n[s];n[i++]=c}}}function XP(n,e,t,r){let o=r.get(Gp,bD)||t===Vt.ShadowDom||t===Vt.ExperimentalIsolatedShadowDom,s=n.selectRootElement(e,o);return eO(s),s}function eO(n){uT(n)}var uT=()=>null;function tO(n){lD(n)?ZD(n):uP(n)}function lT(){uT=tO}function nO(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function rO(n,e,t,r,i,o){let s=e[U];if(hg(n,s,e,t,r)){yn(n)&&oO(e,n.index);return}n.type&3&&(t=nO(t)),iO(n,e,t,r,i,o)}function iO(n,e,t,r,i,o){if(n.type&3){let s=St(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function oO(n,e){let t=At(e,n);t[K]&16||(t[K]|=64)}function sO(n,e,t){let r=t.directiveStart,i=t.directiveEnd;yn(t)&&OP(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||pu(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let c=n.data[s],u=gu(e,n,s,t);if(to(u,e),o!==null&&dO(e,s-r,u,c,t,o),Zt(c)){let l=At(t.index,e);l[Ge]=gu(e,n,s,t)}}}function aO(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=nw();try{er(o);for(let c=r;c<i;c++){let u=n.data[c],l=e[c];Jc(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&cO(u,l)}}finally{er(-1),Jc(s)}}function cO(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function dT(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];wP(e,o.selectors,!1)&&(r??=[],Zt(o)?r.unshift(o):r.push(o))}return r}function uO(n,e,t,r,i,o){let s=St(n,e);lO(e[ge],s,o,n.value,t,r,i)}function lO(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let c=s==null?Uc(o):s(o,r||"",i);n.setAttribute(e,i,c,t)}}function dO(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];Cp(r,t,u,l)}}function fT(n,e,t,r,i){let o=ye+t,s=e[U],c=i(s,e,n,r,t);e[o]=c,Ki(n,!0);let u=n.type===2;return u?(XD(e[ge],c,n),(zI()===0||ws(n))&&to(c,e),qI()):to(c,e),eu()&&(!u||!Mu(n))&&cg(s,e,c,n),n}function hT(n){let e=n;return $h()?QI():(e=e.parent,Ki(e,!1)),e}function fg(n,e){let t=n[Ct];if(!t)return;let r;try{r=t.get(Xt,null)}catch{r=null}r?.(e)}function hg(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],f=s[u+1],p=e.data[l];Cp(p,t[l],f,i),c=!0}if(o)for(let u of o){let l=t[u],f=e.data[u];Cp(f,l,r,i),c=!0}return c}function fO(n,e){let t=At(e,n),r=t[U];hO(r,t);let i=t[Xe];i!==null&&t[ft]===null&&(t[ft]=jD(i,t[Ct])),ue(18),pg(r,t,t[Ge]),ue(19,t[Ge])}function hO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function pg(n,e,t){Zc(e);try{let r=n.viewQuery;r!==null&&Tp(1,r,t);let i=n.template;i!==null&&cT(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Kr]?.finishViewCreation(n),n.staticContentQueries&&zD(n,e),n.staticViewQueries&&Tp(2,n.viewQuery,t);let o=n.components;o!==null&&pO(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[K]&=-5,Xc()}}function pO(n,e){for(let t=0;t<e.length;t++)fO(n,e[t])}function pT(n,e,t,r){let i=J(null);try{let o=e.tView,c=n[K]&4096?4096:16,u=tg(n,o,t,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[qr]=l;let f=n[Kr];return f!==null&&(u[Kr]=f.createEmbeddedView(o)),pg(o,u,t),u}finally{J(i)}}function Ap(n,e){return!e||e.firstChild===null||mu(n)}function Ns(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(mt(o)),gt(o)&&gT(o,r);let s=t.type;if(s&8)Ns(n,e,t.child,r);else if(s&32){let c=rg(t,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=aT(e,t);if(Array.isArray(c))r.push(...c);else{let u=Wn(e[st]);Ns(u[U],u,c,r,!0)}}t=i?t.projectionNext:t.next}return r}function gT(n,e){for(let t=et;t<n.length;t++){let r=n[t],i=r[U].firstChild;i!==null&&Ns(r[U],r,i,e)}n[Jt]!==n[Xe]&&e.push(n[Jt])}function mT(n){if(n[Qr]!==null){for(let e of n[Qr])e.impl.addSequence(e);n[Qr].length=0}}var yT=[];function gO(n){return n[ht]??mO(n)}function mO(n){let e=yT.pop()??Object.create(vO);return e.lView=n,e}function yO(n){n.lView[ht]!==n&&(n.lView=null,yT.push(n))}var vO=ee(V({},os),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Wi(n.lView)},consumerOnSignalRead(){this.lView[ht]=this}});function _O(n){let e=n[ht]??Object.create(EO);return e.lView=n,e}var EO=ee(V({},os),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Wn(n.lView);for(;e&&!vT(e[U]);)e=Wn(e);e&&kh(e)},consumerOnSignalRead(){this.lView[ht]=this}});function vT(n){return n.type!==2}function _T(n){if(n[vs]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[vs])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[K]&8192)}}var IO=100;function ET(n,e=0){let r=n[mn].rendererFactory,i=!1;i||r.begin?.();try{wO(n,e)}finally{i||r.end?.()}}function wO(n,e){let t=Gh();try{zh(!0),Mp(n,e);let r=0;for(;Ds(n);){if(r===IO)throw new q(103,!1);r++,Mp(n,1)}}finally{zh(t)}}function DO(n,e,t,r){if(Xn(e))return;let i=e[K],o=!1,s=!1;Zc(e);let c=!0,u=null,l=null;o||(vT(n)?(l=gO(e),u=hc(l)):fc()===null?(c=!1,l=_O(e),u=hc(l)):e[ht]&&(pc(e[ht]),e[ht]=null));try{xh(e),ZI(n.bindingStartIndex),t!==null&&cT(n,e,t,2,r);let f=(i&3)===3;if(!o)if(f){let y=n.preOrderCheckHooks;y!==null&&ou(e,y,null)}else{let y=n.preOrderHooks;y!==null&&su(e,y,0,null),ip(e,0)}if(s||TO(e),_T(e),IT(e,0),n.contentQueries!==null&&zD(n,e),!o)if(f){let y=n.contentCheckHooks;y!==null&&ou(e,y)}else{let y=n.contentHooks;y!==null&&su(e,y,1),ip(e,1)}CO(n,e);let p=n.components;p!==null&&DT(e,p,0);let m=n.viewQuery;if(m!==null&&Tp(2,m,r),!o)if(f){let y=n.viewCheckHooks;y!==null&&ou(e,y)}else{let y=n.viewHooks;y!==null&&su(e,y,2),ip(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Wc]){for(let y of e[Wc])y();e[Wc]=null}o||(mT(e),e[K]&=-73)}catch(f){throw o||Wi(e),f}finally{l!==null&&(Of(l,u),c&&yO(l)),Xc()}}function IT(n,e){for(let t=hD(n);t!==null;t=pD(t))for(let r=et;r<t.length;r++){let i=t[r];wT(i,e)}}function TO(n){for(let e=hD(n);e!==null;e=pD(e)){if(!(e[K]&2))continue;let t=e[Is];for(let r=0;r<t.length;r++){let i=t[r];kh(i)}}}function bO(n,e,t){ue(18);let r=At(e,n);wT(r,t),ue(19,r[Ge])}function wT(n,e){Kc(n)&&Mp(n,e)}function Mp(n,e){let r=n[U],i=n[K],o=n[ht],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&xf(o)),s||=!1,o&&(o.dirty=!1),n[K]&=-9217,s)DO(r,n,r.template,n[Ge]);else if(i&8192){let c=J(null);try{_T(n),IT(n,1);let u=r.components;u!==null&&DT(n,u,1),mT(n)}finally{J(c)}}}function DT(n,e,t){for(let r=0;r<e.length;r++)bO(n,e[r],t)}function CO(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)er(~i);else{let o=i,s=t[++r],c=t[++r];tw(s,o);let u=e[o];ue(24,u),c(2,u),ue(25,u)}}}finally{er(-1)}}function ku(n,e){let t=Gh()?64:1088;for(n[mn].changeDetectionScheduler?.notify(e);n;){n[K]|=t;let r=Wn(n);if(Yr(n)&&!r)return n;n=r}return null}function TT(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function bT(n,e,t,r=!0){let i=e[U];if(AO(i,e,n,t),r){let s=Sp(t,n),c=e[ge],u=c.parentNode(n[Jt]);u!==null&&BP(i,n[bt],c,e,u,s)}let o=e[ft];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function SO(n,e){let t=_u(n,e);return t!==void 0&&ag(t[U],t),t}function _u(n,e){if(n.length<=et)return;let t=et+e,r=n[t];if(r){let i=r[qr];i!==null&&i!==n&&sg(i,r),e>0&&(n[t-1][Tt]=r[Tt]);let o=hs(n,et+e);jP(r[U],r);let s=o[Kr];s!==null&&s.detachView(o[U]),r[Te]=null,r[Tt]=null,r[K]&=-129}return r}function AO(n,e,t,r){let i=et+r,o=t.length;r>0&&(t[i-1][Tt]=e),r<o-et?(e[Tt]=t[i],Ih(t,et+r,e)):(t.push(e),e[Tt]=null),e[Te]=t;let s=e[qr];s!==null&&t!==s&&CT(s,e);let c=e[Kr];c!==null&&c.insertView(n),Qc(e),e[K]|=128}function CT(n,e){let t=n[Is],r=e[Te];if(pt(r))n[K]|=2;else{let i=r[Te][st];e[st]!==i&&(n[K]|=2)}t===null?n[Is]=[e]:t.push(e)}var ir=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[U];return Ns(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Ge]}set context(e){this._lView[Ge]=e}get destroyed(){return Xn(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Te];if(gt(e)){let t=e[Es],r=t?t.indexOf(this):-1;r>-1&&(_u(e,r),hs(t,r))}this._attachedToViewContainer=!1}ag(this._lView[U],this._lView)}onDestroy(e){Fh(this._lView,e)}markForCheck(){ku(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[K]&=-129}reattach(){Qc(this._lView),this._lView[K]|=128}detectChanges(){this._lView[K]|=1024,ET(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Yr(this._lView),t=this._lView[qr];t!==null&&!e&&sg(t,this._lView),sT(this._lView[U],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new q(902,!1);this._appRef=e;let t=Yr(this._lView),r=this._lView[qr];r!==null&&!t&&CT(r,this._lView),Qc(this._lView)}};var Bs=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=MO;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let o=pT(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new ir(o)}}return n})();function MO(){return ST(at(),me())}function ST(n,e){return n.type&4?new Bs(e,n,Tu(n,e)):null}function Fu(n,e,t,r,i){let o=n.data[e];if(o===null)o=NO(n,e,t,r,i),ew()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=KI();o.injectorIndex=s===null?-1:s.injectorIndex}return Ki(o,!0),o}function NO(n,e,t,r,i){let o=Hh(),s=$h(),c=s?o:o&&o.parent,u=n.data[e]=PO(n,c,t,e,r,i);return RO(n,u,o,s),u}function RO(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function PO(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,c=0;return jh()&&(c|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var OO=new RegExp(`^(\\d+)*(${yD}|${mD})*(.*)`);function xO(n){let e=n.match(OO),[t,r,i,o]=e,s=r?parseInt(r,10):i,c=[];for(let[u,l,f]of o.matchAll(/(f|n)(\d*)/g)){let p=parseInt(f,10)||1;c.push(l,p)}return[s,...c]}function kO(n){return!n.prev&&n.parent?.type===8}function cp(n){return n.index-ye}function FO(n,e){let t=n.i18nNodes;if(t)return t.get(e)}function Lu(n,e,t,r){let i=cp(r),o=FO(n,i);if(o===void 0){let s=n.data[ID];if(s?.[i])o=VO(s[i],t);else if(e.firstChild===r)o=n.firstChild;else{let c=r.prev===null,u=r.prev??r.parent;if(kO(r)){let l=cp(r.parent);o=Dp(n,l)}else{let l=St(u,t);if(c)o=l.firstChild;else{let f=cp(u),p=Dp(n,f);if(u.type===2&&p){let y=Qp(n,f)+1;o=Vu(y,p)}else o=l.nextSibling}}}}return o}function Vu(n,e){let t=e;for(let r=0;r<n;r++)t=t.nextSibling;return t}function LO(n,e){let t=n;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case nP:t=t.firstChild;break;case rP:t=t.nextSibling;break}}return t}function VO(n,e){let[t,...r]=xO(n),i;if(t===mD)i=e[st][Xe];else if(t===yD)i=WD(e[st][Xe]);else{let o=Number(t);i=mt(e[o+ye])}return LO(i,r)}var jO=!1;function AT(n){jO=n}function BO(n){let e=n[ft];if(e){let{i18nNodes:t,dehydratedIcuData:r}=e;if(t&&r){let i=n[ge];for(let o of r.values())UO(i,t,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function UO(n,e,t){for(let r of t.node.cases[t.case]){let i=e.get(r.index-ye);i&&Xp(n,i,!1)}}function gg(n){let e=n[kt]??[],r=n[Te][ge],i=[];for(let o of e)o.data[wD]!==void 0?i.push(o):MT(o,r);n[kt]=i}function HO(n){let{lContainer:e}=n,t=e[kt];if(t===null)return;let i=e[Te][ge];for(let o of t)MT(o,i)}function MT(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[Ms];for(;t<i;){let o=r.nextSibling;Xp(e,r,!1),r=o,t++}}}function ju(n){gg(n);let e=n[Xe];pt(e)&&Eu(e);for(let t=et;t<n.length;t++)Eu(n[t])}function Eu(n){BO(n);let e=n[U];for(let t=ye;t<e.bindingStartIndex;t++)if(gt(n[t])){let r=n[t];ju(r)}else pt(n[t])&&Eu(n[t])}function mg(n){let e=n._views;for(let t of e){let r=BD(t);r!==null&&r[Xe]!==null&&(pt(r)?Eu(r):ju(r))}}function $O(n,e,t,r){n!==null&&(t.cleanup(e),ju(n.lContainer),mg(r))}function GO(n,e){let t=[];for(let r of e)for(let i=0;i<(r[Hp]??1);i++){let o={data:r,firstChild:null};r[Ms]>0&&(o.firstChild=n,n=Vu(r[Ms],n)),t.push(o)}return[n,t]}var NT=()=>null,zO=()=>null;function RT(){NT=qO,zO=WO}function qO(n,e){return PT(n,e)?n[kt].shift():(gg(n),null)}function Np(n,e){return NT(n,e)}function WO(n,e,t){if(e.tView.ssrId===null)return null;let r=Np(n,e.tView.ssrId);return t[U].firstUpdatePass&&r===null&&KO(t,e),r}function KO(n,e){let t=e;for(;t;){if(Aw(n,t))return;if((t.flags&256)===256)break;t=t.prev}for(t=e.next;t&&(t.flags&512)===512;){if(Aw(n,t))return;t=t.next}}function PT(n,e){let t=n[kt];return!e||t===null||t.length===0?!1:t[0].data[ED]===e}function Aw(n,e){let t=e.tView?.ssrId;if(t==null)return!1;let r=n[e.index];return gt(r)&&PT(r,t)?(gg(r),!0):!1}var OT=class{},Bu=class{},Rp=class{resolveComponentFactory(e){throw new q(917,!1)}},Uu=class{static NULL=new Rp},ni=class{},Us=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>QO()}return n})();function QO(){let n=me(),e=at(),t=At(e.index,n);return(pt(t)?t:n)[ge]}var xT=(()=>{class n{static \u0275prov=le({token:n,providedIn:"root",factory:()=>null})}return n})();var cu={},Zi=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,cu,r);return i!==cu||t===cu?i:this.parentInjector.get(e,t,r)}};function Iu(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=hh(i,c);else if(o==2){let u=c,l=e[++s];r=hh(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function se(n,e=0){let t=me();if(t===null)return fe(n,e);let r=at();return oD(r,t,Be(n),e)}function kT(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let c=s,u=null,l=null;for(let f of s)if(f.resolveHostDirectives!==null){[c,u,l]=f.resolveHostDirectives(s);break}ZO(n,e,t,c,o,u,l)}o!==null&&r!==null&&YO(t,r,o)}function YO(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new q(-301,!1);r.push(e[i],o)}}function JO(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function ZO(n,e,t,r,i,o,s){let c=r.length,u=!1;for(let m=0;m<c;m++){let y=r[m];!u&&Zt(y)&&(u=!0,JO(n,t,m)),vp(pu(t,e),n,y.type)}ix(t,n.data.length,c);for(let m=0;m<c;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,f=!1,p=tT(n,e,c,null);c>0&&(t.directiveToIndex=new Map);for(let m=0;m<c;m++){let y=r[m];if(t.mergedAttrs=eo(t.mergedAttrs,y.hostAttrs),ex(n,t,e,p,y),rx(p,y,i),s!==null&&s.has(y)){let[R,M]=s.get(y);t.directiveToIndex.set(y.type,[p,R+t.directiveStart,M+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let S=y.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!f&&(S.ngOnChanges||S.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),p++}XO(n,t,o)}function XO(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))Mw(0,e,i,r),Mw(1,e,i,r),Rw(e,r,!1);else{let o=t.get(i);Nw(0,e,o,r),Nw(1,e,o,r),Rw(e,r,!0)}}}function Mw(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),FT(e,o)}}function Nw(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;n===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),FT(e,s)}}function FT(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function Rw(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||Jp(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let f of l)if(f===e){s??=[],s.push(u,r[c+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let f=0;f<l.length;f+=2)if(l[f]===e){s??=[],s.push(l[f+1],r[c+1]);break}}c+=2}n.initialInputs??=[],n.initialInputs.push(s)}function ex(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=qn(i.type,!0)),s=new ti(o,Zt(i),se,null);n.blueprint[r]=s,t[r]=s,tx(n,e,r,tT(n,t,i.hostVars,En),i)}function tx(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let c=~e.index;nx(s)!=c&&s.push(c),s.push(t,r,o)}}function nx(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function rx(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Zt(e)&&(t[""]=n)}}function ix(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function LT(n,e,t,r,i,o,s,c){let u=e[U],l=u.consts,f=Jr(l,s),p=Fu(u,n,t,r,f);return o&&kT(u,e,p,Jr(l,c),i),p.mergedAttrs=eo(p.mergedAttrs,p.attrs),p.attrs!==null&&Iu(p,p.attrs,!1),p.mergedAttrs!==null&&Iu(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function VT(n,e){Jw(n,e),Mh(e)&&n.queries.elementEnd(e)}function ox(n,e,t,r,i,o){let s=e.consts,c=Jr(s,i),u=Fu(e,n,t,r,c);if(u.mergedAttrs=eo(u.mergedAttrs,u.attrs),o!=null){let l=Jr(s,o);u.localNames=[];for(let f=0;f<l.length;f+=2)u.localNames.push(l[f],-1)}return u.attrs!==null&&Iu(u,u.attrs,!1),u.mergedAttrs!==null&&Iu(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function yg(n){return BT(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function jT(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function BT(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function sx(n,e,t){return n[e]=t}function Hs(n,e,t){if(t===En)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function up(n,e,t){return function r(i){let o=yn(n)?At(n.index,e):e;ku(o,5);let s=e[Ge],c=Pw(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)c=Pw(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function Pw(n,e,t,r){let i=J(null);try{return ue(6,e,t),t(r)!==!1}catch(o){return fg(n,o),!1}finally{ue(7,e,t),J(i)}}function ax(n,e,t,r,i,o,s,c){let u=ws(n),l=!1,f=null;if(!r&&u&&(f=ux(e,t,o,n.index)),f!==null){let p=f.__ngLastListenerFn__||f;p.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,l=!0}else{let p=St(n,t),m=r?r(p):p;iP(t,m,o,c);let y=i.listen(m,o,c);if(!cx(o)){let S=r?R=>r(mt(R[n.index])):n.index;UT(S,e,t,o,c,y,!1)}}return l}function cx(n){return n.startsWith("animation")||n.startsWith("transition")}function ux(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let c=e[Gi],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function UT(n,e,t,r,i,o,s){let c=e.firstCreatePass?GI(e):null,u=$I(t),l=u.length;u.push(i,o),c&&c.push(r,n,l,(l+1)*(s?-1:1))}function Ow(n,e,t,r,i,o){let s=e[t],c=e[U],l=c.data[t].outputs[r],p=s[l].subscribe(o);UT(n.index,c,e,i,o,p,!0)}var Pp=Symbol("BINDING");var Op=class extends Uu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Jn(e);return new Rs(t,this.ngModule)}};function lx(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&Pu.SignalBased)!==0};return i&&(o.transform=i),o})}function dx(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function fx(n,e,t){let r=e instanceof dt?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Zi(t,r):t}function hx(n){let e=n.get(ni,null);if(e===null)throw new q(407,!1);let t=n.get(xT,null),r=n.get(Kn,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function px(n,e){let t=HT(n);return Zp(e,t,t==="svg"?Nh:t==="math"?jI:null)}function HT(n){return(n.selectors[0][0]||"div").toLowerCase()}var Rs=class extends Bu{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=lx(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=dx(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=CP(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){ue(22);let c=J(null);try{let u=this.componentDef,l=gx(r,u,s,o),f=fx(u,i||this.ngModule,e),p=hx(f),m=p.rendererFactory.createRenderer(null,u),y=r?XP(m,r,u.encapsulation,f):px(u,m),S=s?.some(xw)||o?.some(j=>typeof j!="function"&&j.bindings.some(xw)),R=tg(null,l,null,512|eT(u),null,null,p,m,f,null,jD(y,f,!0));R[ye]=y,Zc(R);let M=null;try{let j=LT(ye,R,2,"#host",()=>l.directiveRegistry,!0,0);XD(m,y,j),to(y,R),lg(l,R,j),qD(l,j,R),VT(l,j),t!==void 0&&yx(j,this.ngContentSelectors,t),M=At(j.index,R),R[Ge]=M[Ge],pg(l,R,null)}catch(j){throw M!==null&&Ep(M),Ep(R),j}finally{ue(23),Xc()}return new wu(this.componentType,R,!!S)}finally{J(c)}}};function gx(n,e,t,r){let i=n?["ng-version","21.0.0"]:SP(e.selectors[0]),o=null,s=null,c=0;if(t)for(let f of t)c+=f[Pp].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let p=r[f];if(typeof p!="function")for(let m of p.bindings){c+=m[Pp].requiredVars;let y=f+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let f of r){let p=typeof f=="function"?f:f.type,m=zc(p);u.push(m)}return eg(0,null,mx(o,s),1,c,u,null,null,null,[i],null)}function mx(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function xw(n){let e=n[Pp].kind;return e==="input"||e==="twoWay"}var wu=class extends OT{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=qi(t[U],ye),this.location=Tu(this._tNode,t),this.instance=At(this._tNode.index,t)[Ge],this.hostView=this.changeDetectorRef=new ir(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=hg(r,i[U],i,e,t);this.previousInputValues.set(e,t);let s=At(r.index,i);ku(s,1)}get injector(){return new ei(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function yx(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var $s=(()=>{class n{static __NG_ELEMENT_ID__=vx}return n})();function vx(){let n=at();return Ex(n,me())}var _x=$s,$T=class extends _x{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Tu(this._hostTNode,this._hostLView)}get injector(){return new ei(this._hostTNode,this._hostLView)}get parentInjector(){let e=jp(this._hostTNode,this._hostLView);if(Xw(e)){let t=fu(e,this._hostLView),r=du(e),i=t[U].data[r+8];return new ei(i,t)}else return new ei(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=kw(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-et}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Np(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(c,i,Ap(this._hostTNode,s)),c}createComponent(e,t,r,i,o,s,c){let u=e&&!AR(e),l;if(u)l=t;else{let M=t||{};l=M.index,r=M.injector,i=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef,s=M.directives,c=M.bindings}let f=u?e:new Rs(Jn(e)),p=r||this.parentInjector;if(!o&&f.ngModule==null){let j=(u?p:this.parentInjector).get(dt,null);j&&(o=j)}let m=Jn(f.componentType??{}),y=Np(this._lContainer,m?.id??null),S=y?.firstChild??null,R=f.create(p,i,S,o,s,c);return this.insertImpl(R.hostView,l,Ap(this._hostTNode,y)),R}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(BI(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[Te],l=new $T(u,u[bt],u[Te]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return bT(s,i,o,r),e.attachToViewContainerRef(),Ih(lp(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=kw(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=_u(this._lContainer,t);r&&(hs(lp(this._lContainer),t),ag(r[U],r))}detach(e){let t=this._adjustIndex(e,-1),r=_u(this._lContainer,t);return r&&hs(lp(this._lContainer),t)!=null?new ir(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function kw(n){return n[Es]}function lp(n){return n[Es]||(n[Es]=[])}function Ex(n,e){let t,r=e[n.index];return gt(r)?t=r:(t=TT(r,e,null,n),e[n.index]=t,ng(e,t)),GT(t,e,n,r),new $T(t,n,e)}function Ix(n,e){let t=n[ge],r=t.createComment(""),i=St(e,n),o=t.parentNode(i);return yu(t,o,r,t.nextSibling(i),!1),r}var GT=zT,vg=()=>!1;function wx(n,e,t){return vg(n,e,t)}function zT(n,e,t,r){if(n[Jt])return;let i;t.type&8?i=mt(r):i=Ix(e,t),n[Jt]=i}function Dx(n,e,t){if(n[Jt]&&n[kt])return!0;let r=t[ft],i=e.index-ye;if(!r||dD(e)||$D(r,i))return!1;let s=Dp(r,i),c=r.data[Su]?.[i],[u,l]=GO(s,c);return n[Jt]=u,n[kt]=l,!0}function Tx(n,e,t,r){vg(n,t,e)||zT(n,e,t,r)}function qT(){GT=Tx,vg=Dx}var Ps=class{};var Os=class extends Ps{injector;componentFactoryResolver=new Op(this);instance=null;constructor(e){super();let t=new Hr([...e.providers,{provide:Ps,useValue:this},{provide:Uu,useValue:this.componentFactoryResolver}],e.parent||gs(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function _g(n,e,t=null){return new Os({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var bx=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=qc(!1,t.type),i=r.length>0?_g([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=le({token:n,providedIn:"environment",factory:()=>new n(fe(dt))})}return n})();function jt(n){return ks(()=>{let e=WT(n),t=ee(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Bp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(bx).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Vt.Emulated,styles:n.styles||lt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&oi("NgStandalone"),KT(t);let r=n.dependencies;return t.directiveDefs=Fw(r,Cx),t.pipeDefs=Fw(r,Th),t.id=Mx(t),t})}function Cx(n){return Jn(n)||zc(n)}function si(n){return ks(()=>({type:n.type,bootstrap:n.bootstrap||lt,declarations:n.declarations||lt,imports:n.imports||lt,exports:n.exports||lt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Sx(n,e){if(n==null)return Yn;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=Pu.None,u=null),t[o]=[r,c,u],e[o]=s}return t}function Ax(n){if(n==null)return Yn;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function ze(n){return ks(()=>{let e=WT(n);return KT(e),e})}function Eg(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function WT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Yn,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||lt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Sx(n.inputs,e),outputs:Ax(n.outputs),debugInfo:null}}function KT(n){n.features?.forEach(e=>e(n))}function Fw(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function Mx(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Nx(n){return Object.getPrototypeOf(n.prototype).constructor}function Bt(n){let e=Nx(n.type),t=!0,r=[n];for(;e;){let i;if(Zt(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new q(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=dp(n.inputs),s.declaredInputs=dp(n.declaredInputs),s.outputs=dp(n.outputs);let c=i.hostBindings;c&&kx(n,c);let u=i.viewQuery,l=i.contentQueries;if(u&&Ox(n,u),l&&xx(n,l),Rx(n,i),bI(n.outputs,i.outputs),Zt(i)&&i.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let c=o[s];c&&c.ngInherit&&c(n),c===Bt&&(t=!1)}}e=Object.getPrototypeOf(e)}Px(r)}function Rx(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function Px(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=eo(i.hostAttrs,t=eo(t,i.hostAttrs))}}function dp(n){return n===Yn?{}:n===lt?[]:n}function Ox(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function xx(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function kx(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Fx(n,e,t,r,i,o,s,c){if(t.firstCreatePass){n.mergedAttrs=eo(n.mergedAttrs,n.attrs);let f=n.tView=eg(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),f.queries=t.queries.embeddedTView(n))}c&&(n.flags|=c),Ki(n,!1);let u=QT(t,e,n,r);eu()&&cg(t,e,u,n),to(u,e);let l=TT(u,e,u,n);e[r+ye]=l,ng(e,l),wx(l,n,e)}function Lx(n,e,t,r,i,o,s,c,u,l,f){let p=t+ye,m;return e.firstCreatePass?(m=Fu(e,p,4,s||null,c||null),Vh()&&kT(e,n,m,Jr(e.consts,l),dT),Jw(e,m)):m=e.data[p],Fx(m,n,e,t,r,i,o,u),ws(m)&&lg(e,n,m),l!=null&&dg(n,m,f),m}function _t(n,e,t,r,i,o,s,c){let u=me(),l=Mt(),f=Jr(l.consts,o);return Lx(u,l,n,e,t,r,i,f,void 0,s,c),_t}var QT=YT;function YT(n,e,t,r){return vn(!0),e[ge].createComment("")}function Vx(n,e,t,r){let i=!Ru(e,t);vn(i);let o=e[ft]?.data[_D]?.[r]??null;if(o!==null&&t.tView!==null&&t.tView.ssrId===null&&(t.tView.ssrId=o),i)return YT(n,e);let s=e[ft],c=Lu(s,n,e,t);Nu(s,r,c);let u=Qp(s,r);return Vu(u,c)}function JT(){QT=Vx}var vt=(function(n){return n[n.NOT_STARTED=0]="NOT_STARTED",n[n.IN_PROGRESS=1]="IN_PROGRESS",n[n.COMPLETE=2]="COMPLETE",n[n.FAILED=3]="FAILED",n})(vt||{}),Lw=0,jx=1,be=(function(n){return n[n.Placeholder=0]="Placeholder",n[n.Loading=1]="Loading",n[n.Complete=2]="Complete",n[n.Error=3]="Error",n})(be||{});var Bx=0,Gs=1;var Ux=4,Hx=5;var $x=7,Xi=8,Gx=9,Ig=(function(n){return n[n.Manual=0]="Manual",n[n.Playthrough=1]="Playthrough",n})(Ig||{});function uu(n,e){let t=qx(n),r=e[t];if(r!==null){for(let i of r)i();e[t]=null}}function zx(n){uu(1,n),uu(0,n),uu(2,n)}function qx(n){let e=Ux;return n===1?e=Hx:n===2&&(e=Gx),e}function ZT(n){return n+1}function so(n,e){let t=n[U],r=ZT(e.index);return n[r]}function zs(n,e){let t=ZT(e.index);return n.data[t]}function Wx(n,e,t){let r=e[U],i=zs(r,t);switch(n){case be.Complete:return i.primaryTmplIndex;case be.Loading:return i.loadingTmplIndex;case be.Error:return i.errorTmplIndex;case be.Placeholder:return i.placeholderTmplIndex;default:return null}}function Vw(n,e){return e===be.Placeholder?n.placeholderBlockConfig?.[Lw]??null:e===be.Loading?n.loadingBlockConfig?.[Lw]??null:null}function Kx(n){return n.loadingBlockConfig?.[jx]??null}function jw(n,e){if(!n||n.length===0)return e;let t=new Set(n);for(let r of e)t.add(r);return n.length===t.size?n:Array.from(t)}function Qx(n,e){let t=e.primaryTmplIndex+ye;return qi(n,t)}var Yx=(()=>{class n{cachedInjectors=new Map;getOrCreateInjector(t,r,i,o){if(!this.cachedInjectors.has(t)){let s=i.length>0?_g(i,r,o):null;this.cachedInjectors.set(t,s)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=le({token:n,providedIn:"environment",factory:()=>new n})}return n})();var XT=new $("");function fp(n,e,t){return n.get(Yx).getOrCreateInjector(e,n,t,"")}function Jx(n,e,t){if(n instanceof Zi){let i=n.injector,o=n.parentInjector,s=fp(o,e,t);return new Zi(i,s)}let r=n.get(dt);if(r!==n){let i=fp(r,e,t);return new Zi(n,i)}return fp(n,e,t)}function Xr(n,e,t,r=!1){let i=t[Te],o=i[U];if(Xn(i))return;let s=so(i,e),c=s[Gs],u=s[$x];if(!(u!==null&&n<u)&&Bw(c,n)&&Bw(s[Bx]??-1,n)){let l=zs(o,e),p=!r&&!0&&(Kx(l)!==null||Vw(l,be.Loading)!==null||Vw(l,be.Placeholder))?ek:Xx;try{p(n,s,t,e,i)}catch(m){fg(i,m)}}}function Zx(n,e){let t=n[kt]?.findIndex(i=>i.data[DD]===e[Gs])??-1;return{dehydratedView:t>-1?n[kt][t]:null,dehydratedViewIx:t}}function Xx(n,e,t,r,i){ue(20);let o=Wx(n,i,r);if(o!==null){e[Gs]=n;let s=i[U],c=o+ye,u=qi(s,c),l=0;SO(t,l);let f;if(n===be.Complete){let S=zs(s,r),R=S.providers;R&&R.length>0&&(f=Jx(i[Ct],S,R))}let{dehydratedView:p,dehydratedViewIx:m}=Zx(t,e),y=pT(i,u,null,{injector:f,dehydratedView:p});if(bT(t,y,l,Ap(u,p)),ku(y,2),m>-1&&t[kt]?.splice(m,1),(n===be.Complete||n===be.Error)&&Array.isArray(e[Xi])){for(let S of e[Xi])S();e[Xi]=null}}ue(21)}function Bw(n,e){return n<e}function Uw(n,e,t){n.loadingPromise.then(()=>{n.loadingState===vt.COMPLETE?Xr(be.Complete,e,t):n.loadingState===vt.FAILED&&Xr(be.Error,e,t)})}var ek=null;var wg=new $("");function ai(n){return!!n&&typeof n.then=="function"}function Hu(n){return!!n&&typeof n.subscribe=="function"}var eb=new $("");var Dg=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=B(eb,{optional:!0})??[];injector=B(xt);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=ms(this.injector,i);if(ai(o))t.push(o);else if(Hu(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ao=new $("");function tb(){Vf(()=>{let n="";throw new q(600,n)})}function nb(n){return n.isBoundToModule}var tk=10;var Nt=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=B(Xt);afterRenderManager=B(ig);zonelessEnabled=B(Cs);rootEffectScheduler=B(rp);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Wt;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=B(rr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Vr(t=>!t))}constructor(){B(or,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=B(dt);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=xt.NULL){return this._injector.get(ot).run(()=>{ue(10);let s=t instanceof Bu;if(!this._injector.get(Dg).done){let S="";throw new q(405,S)}let u;s?u=t:u=this._injector.get(Uu).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=nb(u)?void 0:this._injector.get(Ps),f=r||u.selector,p=u.create(i,[],f,l),m=p.location.nativeElement,y=p.injector.get(wg,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),As(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),ue(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ue(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ou.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new q(101,!1);let t=J(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,J(t),this.afterTick.next(),ue(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(ni,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<tk;)ue(14),this.synchronizeOnce(),ue(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ds(i))continue;let o=r&&!this.zonelessEnabled?0:1;ET(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Ds(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;As(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(ao,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>As(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new q(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function As(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function nk(){let n,e;return{promise:new Promise((r,i)=>{n=r,e=i}),resolve:n,reject:e}}function rb(n,e,t){let r=e[Ct],i=e[U];if(n.loadingState!==vt.NOT_STARTED)return n.loadingPromise??Promise.resolve();let o=so(e,t),s=Qx(i,n);n.loadingState=vt.IN_PROGRESS,uu(1,o);let c=n.dependencyResolverFn,u=r.get(nu).add();return c?(n.loadingPromise=Promise.allSettled(c()).then(l=>{let f=!1,p=[],m=[];for(let y of l)if(y.status==="fulfilled"){let S=y.value,R=Jn(S)||zc(S);if(R)p.push(R);else{let M=Th(S);M&&m.push(M)}}else{f=!0;break}if(f){if(n.loadingState=vt.FAILED,n.errorTmplIndex===null){let S=new q(-750,!1);fg(e,S)}}else{n.loadingState=vt.COMPLETE;let y=s.tView;if(p.length>0){y.directiveRegistry=jw(y.directiveRegistry,p);let S=p.map(M=>M.type),R=qc(!1,...S);n.providers=R}m.length>0&&(y.pipeRegistry=jw(y.pipeRegistry,m))}}),n.loadingPromise.finally(()=>{n.loadingPromise=null,u()})):(n.loadingPromise=Promise.resolve().then(()=>{n.loadingPromise=null,n.loadingState=vt.COMPLETE,u()}),n.loadingPromise)}function rk(n,e){return e[Ct].get(XT,null,{optional:!0})?.behavior!==Ig.Manual}function ik(n,e,t){let r=e[U],i=e[t.index];if(!rk(n,e))return;let o=so(e,t),s=zs(r,t);switch(zx(o),s.loadingState){case vt.NOT_STARTED:Xr(be.Loading,t,i),rb(s,e,t),s.loadingState===vt.IN_PROGRESS&&Uw(s,t,i);break;case vt.IN_PROGRESS:Xr(be.Loading,t,i),Uw(s,t,i);break;case vt.COMPLETE:Xr(be.Complete,t,i);break;case vt.FAILED:Xr(be.Error,t,i);break;default:}}async function ib(n,e,t){let r=n.get(Au);if(r.hydrating.has(e))return;let{parentBlockPromise:o,hydrationQueue:s}=fP(e,n);if(s.length===0)return;o!==null&&s.shift(),ak(r,s),o!==null&&await o;let c=s[0];r.has(c)?await Hw(n,s,t):r.awaitParentBlock(c,async()=>await Hw(n,s,t))}async function Hw(n,e,t){let r=n.get(Au),i=r.hydrating,o=n.get(rr),s=o.add();for(let u=0;u<e.length;u++){let l=e[u],f=r.get(l);if(f!=null){if(await uk(f),await ck(n),ok(f)){HO(f),$w(e.slice(u),r);break}i.get(l).resolve()}else{sk(u,e,r),$w(e.slice(u),r);break}}let c=e[e.length-1];await i.get(c)?.promise,o.remove(s),t&&t(e),$O(r.get(c),e,r,n.get(Nt))}function ok(n){return so(n.lView,n.tNode)[Gs]===be.Error}function sk(n,e,t){let r=n-1,i=r>-1?t.get(e[r]):null;i&&ju(i.lContainer)}function $w(n,e){let t=e.hydrating;for(let r in n)t.get(r)?.reject();e.cleanup(n)}function ak(n,e){for(let t of e)n.hydrating.set(t,nk())}function ck(n){return new Promise(e=>og(e,{injector:n}))}async function uk(n){let{tNode:e,lView:t}=n,r=so(t,e);return new Promise(i=>{lk(r,i),ik(2,t,e)})}function lk(n,e){Array.isArray(n[Xi])||(n[Xi]=[]),n[Xi].push(e)}function $u(n,e,t,r){let i=me(),o=Yc();if(Hs(i,o,e)){let s=Mt(),c=Qh();uO(c,i,n,e,t,r)}return $u}var U6=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function tt(n,e,t){let r=me(),i=Yc();if(Hs(r,i,e)){let o=Mt(),s=Qh();rO(s,r,n,e,r[ge],t)}return tt}function Gw(n,e,t,r,i){hg(e,n,t,i?"class":"style",r)}function O(n,e,t,r){let i=me(),o=i[U],s=n+ye,c=o.firstCreatePass?LT(s,i,2,e,dT,Vh(),t,r):o.data[s];if(fT(c,i,n,e,Tg),ws(c)){let u=i[U];lg(u,i,c),qD(u,c,i)}return r!=null&&dg(i,c),O}function k(){let n=Mt(),e=at(),t=hT(e);return n.firstCreatePass&&VT(n,t),Bh(t)&&Uh(),Lh(),t.classesWithoutHost!=null&&xR(t)&&Gw(n,t,me(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&kR(t)&&Gw(n,t,me(),t.stylesWithoutHost,!1),k}function Se(n,e,t,r){return O(n,e,t,r),k(),Se}function ci(n,e,t,r){let i=me(),o=i[U],s=n+ye,c=o.firstCreatePass?ox(s,o,2,e,t,r):o.data[s];return fT(c,i,n,e,Tg),r!=null&&dg(i,c),ci}function qs(){let n=at(),e=hT(n);return Bh(e)&&Uh(),Lh(),qs}function Ws(n,e,t,r){return ci(n,e,t,r),qs(),Ws}var Tg=(n,e,t,r,i)=>(vn(!0),Zp(e[ge],r,Yh()));function dk(n,e,t,r,i){let o=!Ru(e,t);if(vn(o),o)return Zp(e[ge],r,Yh());let s=e[ft],c=Lu(s,n,e,t);return HD(s,i)&&Nu(s,i,c.nextSibling),s&&(uD(t)||lD(c))&&yn(t)&&(WI(t),ZD(c)),c}function ob(){Tg=dk}var fk=(n,e,t,r,i)=>(vn(!0),YD(e[ge],""));function hk(n,e,t,r,i){let o,s=!Ru(e,t);if(vn(s),s)return YD(e[ge],"");let c=e[ft],u=Lu(c,n,e,t),l=lP(c,i);return Nu(c,i,u),o=Vu(l,u),o}function sb(){fk=hk}function Gu(){return me()}var Ks="en-US";var pk=Ks;function ab(n){typeof n=="string"&&(pk=n.toLowerCase().replace(/_/g,"-"))}function sr(n,e,t){let r=me(),i=Mt(),o=at();return gk(i,r,r[ge],o,n,e,t),sr}function gk(n,e,t,r,i,o,s){let c=!0,u=null;if((r.type&3||s)&&(u??=up(r,e,o),ax(r,n,e,s,t,i,o,u)&&(c=!1)),c){let l=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let p=0;p<f.length;p+=2){let m=f[p],y=f[p+1];u??=up(r,e,o),Ow(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=up(r,e,o),Ow(r,e,p,i,i,u)}}function In(n=1){return aw(n)}function Qs(n){let e=YI();return Ph(e,ye+n)}function iu(n,e){return n<<17|e<<2}function ri(n){return n>>17&32767}function mk(n){return(n&2)==2}function yk(n,e){return n&131071|e<<17}function xp(n){return n|2}function ro(n){return(n&131068)>>2}function hp(n,e){return n&-131069|e<<2}function vk(n){return(n&1)===1}function kp(n){return n|1}function _k(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,c=ri(s),u=ro(s);n[r]=t;let l=!1,f;if(Array.isArray(t)){let p=t;f=p[1],(f===null||$i(p,f)>0)&&(l=!0)}else f=t;if(i)if(u!==0){let m=ri(n[c+1]);n[r+1]=iu(m,c),m!==0&&(n[m+1]=hp(n[m+1],r)),n[c+1]=yk(n[c+1],r)}else n[r+1]=iu(c,0),c!==0&&(n[c+1]=hp(n[c+1],r)),c=r;else n[r+1]=iu(u,0),c===0?c=r:n[u+1]=hp(n[u+1],r),u=r;l&&(n[r+1]=xp(n[r+1])),zw(n,f,r,!0),zw(n,f,r,!1),Ek(e,f,n,r,o),s=iu(c,u),o?e.classBindings=s:e.styleBindings=s}function Ek(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&$i(o,e)>=0&&(t[r+1]=kp(t[r+1]))}function zw(n,e,t,r){let i=n[t+1],o=e===null,s=r?ri(i):ro(i),c=!1;for(;s!==0&&(c===!1||o);){let u=n[s],l=n[s+1];Ik(u,e)&&(c=!0,n[s+1]=r?kp(l):xp(l)),s=r?ri(l):ro(l)}c&&(n[t+1]=r?xp(i):kp(i))}function Ik(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?$i(n,e)>=0:!1}function wn(n,e){return wk(n,e,null,!0),wn}function wk(n,e,t,r){let i=me(),o=Mt(),s=XI(2);if(o.firstUpdatePass&&Tk(o,n,s,r),e!==En&&Hs(i,s,e)){let c=o.data[Zr()];Mk(o,c,i,i[ge],n,i[s+1]=Nk(e,t),r,s)}}function Dk(n,e){return e>=n.expandoStartIndex}function Tk(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Zr()],s=Dk(n,t);Rk(o,r)&&e===null&&!s&&(e=!1),e=bk(i,o,e,r),_k(i,o,e,t,s,r)}}function bk(n,e,t,r){let i=rw(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=pp(null,n,e,t,r),t=xs(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=pp(i,n,e,t,r),o===null){let u=Ck(n,e,r);u!==void 0&&Array.isArray(u)&&(u=pp(null,n,e,u[1],r),u=xs(u,e.attrs,r),Sk(n,e,r,u))}else o=Ak(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function Ck(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ro(r)!==0)return n[ri(r)]}function Sk(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ri(i)]=r}function Ak(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=xs(r,s,t)}return xs(r,e.attrs,t)}function pp(n,e,t,r,i){let o=null,s=t.directiveEnd,c=t.directiveStylingLast;for(c===-1?c=t.directiveStart:c++;c<s&&(o=e[c],r=xs(r,o.hostAttrs,i),o!==n);)c++;return n!==null&&(t.directiveStylingLast=c),r}function xs(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),RI(n,s,t?!0:e[++o]))}return n===void 0?null:n}function Mk(n,e,t,r,i,o,s,c){if(!(e.type&3))return;let u=n.data,l=u[c+1],f=vk(l)?qw(u,e,t,i,ro(l),s):void 0;if(!Du(f)){Du(o)||mk(l)&&(o=qw(u,null,t,i,c,s));let p=Rh(Zr(),t);ZP(r,s,p,i,o)}}function qw(n,e,t,r,i,o){let s=e===null,c;for(;i>0;){let u=n[i],l=Array.isArray(u),f=l?u[1]:u,p=f===null,m=t[i+1];m===En&&(m=p?lt:void 0);let y=p?Gc(m,r):f===r?m:void 0;if(l&&!Du(y)&&(y=Gc(u,r)),Du(y)&&(c=y,s))return c;let S=n[i+1];i=s?ri(S):ro(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=Gc(u,r))}return c}function Du(n){return n!==void 0}function Nk(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=zn(Yp(n)))),n}function Rk(n,e){return(n.flags&(e?8:16))!==0}function L(n,e=""){let t=me(),r=Mt(),i=n+ye,o=r.firstCreatePass?Fu(r,i,1,e,null):r.data[i],s=cb(r,t,o,e,n);t[i]=s,eu()&&cg(r,t,s,o),Ki(o,!1)}var cb=(n,e,t,r,i)=>(vn(!0),QD(e[ge],r));function Pk(n,e,t,r,i){let o=!Ru(e,t);if(vn(o),o)return QD(e[ge],r);let s=e[ft];return Lu(s,n,e,t)}function ub(){cb=Pk}function Ok(n,e,t,r=""){return Hs(n,Yc(),t)?e+Uc(t)+r:En}function Ys(n){return Js("",n),Ys}function Js(n,e,t){let r=me(),i=Ok(r,n,e,t);return i!==En&&xk(r,Zr(),i),Js}function xk(n,e,t){let r=Rh(e,n);AP(n[ge],r,t)}function kk(n,e,t){let r=Mt();if(r.firstCreatePass){let i=Zt(n);Fp(t,r.data,r.blueprint,i,!0),Fp(e,r.data,r.blueprint,i,!1)}}function Fp(n,e,t,r,i){if(n=Be(n),Array.isArray(n))for(let o=0;o<n.length;o++)Fp(n[o],e,t,r,i);else{let o=Mt(),s=me(),c=at(),u=Ur(n)?n:Be(n.provide),l=Ch(n),f=c.providerIndexes&1048575,p=c.directiveStart,m=c.providerIndexes>>20;if(Ur(n)||!n.multi){let y=new ti(l,i,se,null),S=mp(u,e,i?f:f+m,p);S===-1?(vp(pu(c,s),o,u),gp(o,n,e.length),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(y),s.push(y)):(t[S]=y,s[S]=y)}else{let y=mp(u,e,f+m,p),S=mp(u,e,f,f+m),R=y>=0&&t[y],M=S>=0&&t[S];if(i&&!M||!i&&!R){vp(pu(c,s),o,u);let j=Vk(i?Lk:Fk,t.length,i,r,l,n);!i&&M&&(t[S].providerFactory=j),gp(o,n,e.length,0),e.push(u),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(j),s.push(j)}else{let j=lb(t[i?S:y],l,!i&&r);gp(o,n,y>-1?y:S,j)}!i&&r&&M&&t[S].componentProviders++}}}function gp(n,e,t,r){let i=Ur(e),o=FI(e);if(i||o){let u=(o?Be(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let f=l.indexOf(t);f===-1?l.push(t,[r,u]):l[f+1].push(r,u)}else l.push(t,u)}}}function lb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function mp(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Fk(n,e,t,r,i){return Lp(this.multi,[])}function Lk(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let c=this.providerFactory.componentProviders,u=gu(r,r[U],this.providerFactory.index,i);s=u.slice(0,c),Lp(o,s);for(let l=c;l<u.length;l++)s.push(u[l])}else s=[],Lp(o,s);return s}function Lp(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Vk(n,e,t,r,i,o){let s=new ti(n,t,se,null);return s.multi=[],s.index=e,s.componentProviders=0,lb(s,i,r&&!t),s}function co(n,e=[]){return t=>{t.providersResolver=(r,i)=>kk(r,i?i(n):n,e)}}function jk(n,e){let t=n[e];return t===En?void 0:t}function Bk(n,e,t,r,i,o){let s=e+t;return Hs(n,s,i)?sx(n,s+1,o?r.call(o,i):r(i)):jk(n,s+1)}function zu(n,e){let t=Mt(),r,i=n+ye;t.firstCreatePass?(r=Uk(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=qn(r.type,!0)),s,c=Ze(se);try{let u=hu(!1),l=o();return hu(u),Oh(t,me(),i,l),l}finally{Ze(c)}}function Uk(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function qu(n,e,t){let r=n+ye,i=me(),o=Ph(i,r);return Hk(i,r)?Bk(i,JI(),e,o.transform,t,o):o.transform(t)}function Hk(n,e){return n[U].data[e].pure}function Zs(n,e){return ST(n,e)}var db=(()=>{class n{applicationErrorHandler=B(Xt);appRef=B(Nt);taskService=B(rr);ngZone=B(ot);zonelessEnabled=B(Cs);tracing=B(or,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ds):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(B(np,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Zh:Jh;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ds+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Zh(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function fb(){return[{provide:Kn,useExisting:db},{provide:ot,useClass:fs},{provide:Cs,useValue:!0}]}function $k(){return typeof $localize<"u"&&$localize.locale||Ks}var Wu=new $("",{factory:()=>B(Wu,{optional:!0,skipSelf:!0})||$k()});function ui(n,e){return gc(n,e?.equal)}var Mg={JSACTION:"__jsaction",OWNER:"__owner"},mb={};function Gk(n){return n[Mg.JSACTION]}function hb(n,e){n[Mg.JSACTION]=e}function zk(n){return mb[n]}function qk(n,e){mb[n]=e}var G={AUXCLICK:"auxclick",CHANGE:"change",CLICK:"click",CLICKMOD:"clickmod",CLICKONLY:"clickonly",DBLCLICK:"dblclick",FOCUS:"focus",FOCUSIN:"focusin",BLUR:"blur",FOCUSOUT:"focusout",SUBMIT:"submit",KEYDOWN:"keydown",KEYPRESS:"keypress",KEYUP:"keyup",MOUSEUP:"mouseup",MOUSEDOWN:"mousedown",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",MOUSEMOVE:"mousemove",POINTERUP:"pointerup",POINTERDOWN:"pointerdown",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERMOVE:"pointermove",POINTERCANCEL:"pointercancel",GOTPOINTERCAPTURE:"gotpointercapture",LOSTPOINTERCAPTURE:"lostpointercapture",ERROR:"error",LOAD:"load",UNLOAD:"unload",TOUCHSTART:"touchstart",TOUCHEND:"touchend",TOUCHMOVE:"touchmove",INPUT:"input",SCROLL:"scroll",TOGGLE:"toggle",CUSTOM:"_custom"},Wk=[G.MOUSEENTER,G.MOUSELEAVE,"pointerenter","pointerleave"],W6=[G.CLICK,G.DBLCLICK,G.FOCUSIN,G.FOCUSOUT,G.KEYDOWN,G.KEYUP,G.KEYPRESS,G.MOUSEOVER,G.MOUSEOUT,G.SUBMIT,G.TOUCHSTART,G.TOUCHEND,G.TOUCHMOVE,"touchcancel","auxclick","change","compositionstart","compositionupdate","compositionend","beforeinput","input","select","copy","cut","paste","mousedown","mouseup","wheel","contextmenu","dragover","dragenter","dragleave","drop","dragstart","dragend","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","gotpointercapture","lostpointercapture","ended","loadedmetadata","pagehide","pageshow","visibilitychange","beforematch"],Kk=[G.FOCUS,G.BLUR,G.ERROR,G.LOAD,G.TOGGLE],Ng=n=>Kk.indexOf(n)>=0;function Qk(n){return n===G.MOUSEENTER?G.MOUSEOVER:n===G.MOUSELEAVE?G.MOUSEOUT:n===G.POINTERENTER?G.POINTEROVER:n===G.POINTERLEAVE?G.POINTEROUT:n}function Yk(n,e,t,r){let i=!1;Ng(e)&&(i=!0);let o=typeof r=="boolean"?{capture:i,passive:r}:i;return n.addEventListener(e,t,o),{eventType:e,handler:t,capture:i,passive:r}}function Jk(n,e){if(n.removeEventListener){let t=typeof e.passive=="boolean"?{capture:e.capture}:e.capture;n.removeEventListener(e.eventType,e.handler,t)}else n.detachEvent&&n.detachEvent(`on${e.eventType}`,e.handler)}function Zk(n){n.preventDefault?n.preventDefault():n.returnValue=!1}var pb=typeof navigator<"u"&&/Macintosh/.test(navigator.userAgent);function Xk(n){return n.which===2||n.which==null&&n.button===4}function e1(n){return pb&&n.metaKey||!pb&&n.ctrlKey||Xk(n)||n.shiftKey}function t1(n,e,t){let r=n.relatedTarget;return(n.type===G.MOUSEOVER&&e===G.MOUSEENTER||n.type===G.MOUSEOUT&&e===G.MOUSELEAVE||n.type===G.POINTEROVER&&e===G.POINTERENTER||n.type===G.POINTEROUT&&e===G.POINTERLEAVE)&&(!r||r!==t&&!t.contains(r))}function n1(n,e){let t={};for(let r in n){if(r==="srcElement"||r==="target")continue;let i=r,o=n[i];typeof o!="function"&&(t[i]=o)}return n.type===G.MOUSEOVER?t.type=G.MOUSEENTER:n.type===G.MOUSEOUT?t.type=G.MOUSELEAVE:n.type===G.POINTEROVER?t.type=G.POINTERENTER:t.type=G.POINTERLEAVE,t.target=t.srcElement=e,t.bubbles=!1,t._originalEvent=n,t}var r1=typeof navigator<"u"&&/iPhone|iPad|iPod/.test(navigator.userAgent),Ju=class{element;handlerInfos=[];constructor(e){this.element=e}addEventListener(e,t,r){r1&&(this.element.style.cursor="pointer"),this.handlerInfos.push(Yk(this.element,e,t(this.element),r))}cleanUp(){for(let e=0;e<this.handlerInfos.length;e++)Jk(this.element,this.handlerInfos[e]);this.handlerInfos=[]}},i1={NAMESPACE_ACTION_SEPARATOR:".",EVENT_ACTION_SEPARATOR:":"};function ar(n){return n.eventType}function Rg(n,e){n.eventType=e}function Qu(n){return n.event}function yb(n,e){n.event=e}function vb(n){return n.targetElement}function _b(n,e){n.targetElement=e}function Eb(n){return n.eic}function o1(n,e){n.eic=e}function s1(n){return n.timeStamp}function a1(n,e){n.timeStamp=e}function Yu(n){return n.eia}function Ib(n,e,t){n.eia=[e,t]}function bg(n){n.eia=void 0}function Ku(n){return n[1]}function c1(n){return n.eirp}function wb(n,e){n.eirp=e}function Db(n){return n.eir}function Tb(n,e){n.eir=e}function bb(n){return{eventType:n.eventType,event:n.event,targetElement:n.targetElement,eic:n.eic,eia:n.eia,timeStamp:n.timeStamp,eirp:n.eirp,eiack:n.eiack,eir:n.eir}}function u1(n,e,t,r,i,o,s,c){return{eventType:n,event:e,targetElement:t,eic:r,timeStamp:i,eia:o,eirp:s,eiack:c}}var Cg=class n{eventInfo;constructor(e){this.eventInfo=e}getEventType(){return ar(this.eventInfo)}setEventType(e){Rg(this.eventInfo,e)}getEvent(){return Qu(this.eventInfo)}setEvent(e){yb(this.eventInfo,e)}getTargetElement(){return vb(this.eventInfo)}setTargetElement(e){_b(this.eventInfo,e)}getContainer(){return Eb(this.eventInfo)}setContainer(e){o1(this.eventInfo,e)}getTimestamp(){return s1(this.eventInfo)}setTimestamp(e){a1(this.eventInfo,e)}getAction(){let e=Yu(this.eventInfo);if(e)return{name:e[0],element:e[1]}}setAction(e){if(!e){bg(this.eventInfo);return}Ib(this.eventInfo,e.name,e.element)}getIsReplay(){return c1(this.eventInfo)}setIsReplay(e){wb(this.eventInfo,e)}getResolved(){return Db(this.eventInfo)}setResolved(e){Tb(this.eventInfo,e)}clone(){return new n(bb(this.eventInfo))}},l1={},d1=/\s*;\s*/,f1=G.CLICK,Sg=class{a11yClickSupport=!1;clickModSupport=!0;syntheticMouseEventSupport;updateEventInfoForA11yClick=void 0;preventDefaultForA11yClick=void 0;populateClickOnlyAction=void 0;constructor({syntheticMouseEventSupport:e=!1,clickModSupport:t=!0}={}){this.syntheticMouseEventSupport=e,this.clickModSupport=t}resolveEventType(e){this.clickModSupport&&ar(e)===G.CLICK&&e1(Qu(e))?Rg(e,G.CLICKMOD):this.a11yClickSupport&&this.updateEventInfoForA11yClick(e)}resolveAction(e){Db(e)||(this.populateAction(e,vb(e)),Tb(e,!0))}resolveParentAction(e){let t=Yu(e),r=t&&Ku(t);bg(e);let i=r&&this.getParentNode(r);i&&this.populateAction(e,i)}populateAction(e,t){let r=t;for(;r&&r!==Eb(e)&&(r.nodeType===Node.ELEMENT_NODE&&this.populateActionOnElement(r,e),!Yu(e));)r=this.getParentNode(r);let i=Yu(e);if(i&&(this.a11yClickSupport&&this.preventDefaultForA11yClick(e),this.syntheticMouseEventSupport&&(ar(e)===G.MOUSEENTER||ar(e)===G.MOUSELEAVE||ar(e)===G.POINTERENTER||ar(e)===G.POINTERLEAVE)))if(t1(Qu(e),ar(e),Ku(i))){let o=n1(Qu(e),Ku(i));yb(e,o),_b(e,Ku(i))}else bg(e)}getParentNode(e){let t=e[Mg.OWNER];if(t)return t;let r=e.parentNode;return r?.nodeName==="#document-fragment"?r?.host??null:r}populateActionOnElement(e,t){let r=this.parseActions(e),i=r[ar(t)];i!==void 0&&Ib(t,i,e),this.a11yClickSupport&&this.populateClickOnlyAction(e,t,r)}parseActions(e){let t=Gk(e);if(!t){let r=e.getAttribute(ru.JSACTION);if(!r)t=l1,hb(e,t);else{if(t=zk(r),!t){t={};let i=r.split(d1);for(let o=0;o<i.length;o++){let s=i[o];if(!s)continue;let c=s.indexOf(i1.EVENT_ACTION_SEPARATOR),u=c!==-1,l=u?s.substr(0,c).trim():f1,f=u?s.substr(c+1).trim():s;t[l]=f}qk(r,t)}hb(e,t)}}return t}addA11yClickSupport(e,t,r){this.a11yClickSupport=!0,this.updateEventInfoForA11yClick=e,this.preventDefaultForA11yClick=t,this.populateClickOnlyAction=r}},Cb=(function(n){return n[n.I_AM_THE_JSACTION_FRAMEWORK=0]="I_AM_THE_JSACTION_FRAMEWORK",n})(Cb||{}),Ag=class{dispatchDelegate;actionResolver;eventReplayer;eventReplayScheduled=!1;replayEventInfoWrappers=[];constructor(e,{actionResolver:t,eventReplayer:r}={}){this.dispatchDelegate=e,this.actionResolver=t,this.eventReplayer=r}dispatch(e){let t=new Cg(e);this.actionResolver?.resolveEventType(e),this.actionResolver?.resolveAction(e);let r=t.getAction();if(r&&h1(r.element,t)&&Zk(t.getEvent()),this.eventReplayer&&t.getIsReplay()){this.scheduleEventInfoWrapperReplay(t);return}this.dispatchDelegate(t)}scheduleEventInfoWrapperReplay(e){this.replayEventInfoWrappers.push(e),!this.eventReplayScheduled&&(this.eventReplayScheduled=!0,Promise.resolve().then(()=>{this.eventReplayScheduled=!1,this.eventReplayer(this.replayEventInfoWrappers)}))}};function h1(n,e){return n.tagName==="A"&&(e.getEventType()===G.CLICK||e.getEventType()===G.CLICKMOD)}var Sb=Symbol.for("propagationStopped"),Pg={REPLAY:101};var p1="`preventDefault` called during event replay.";var g1="`composedPath` called during event replay.",Zu=class{dispatchDelegate;clickModSupport;actionResolver;dispatcher;constructor(e,t=!0){this.dispatchDelegate=e,this.clickModSupport=t,this.actionResolver=new Sg({clickModSupport:t}),this.dispatcher=new Ag(r=>{this.dispatchToDelegate(r)},{actionResolver:this.actionResolver})}dispatch(e){this.dispatcher.dispatch(e)}dispatchToDelegate(e){for(e.getIsReplay()&&v1(e),m1(e);e.getAction();){if(_1(e),Ng(e.getEventType())&&e.getAction().element!==e.getTargetElement()||(this.dispatchDelegate(e.getEvent(),e.getAction().name),y1(e)))return;this.actionResolver.resolveParentAction(e.eventInfo)}}};function m1(n){let e=n.getEvent(),t=n.getEvent().stopPropagation.bind(e),r=()=>{e[Sb]=!0,t()};li(e,"stopPropagation",r),li(e,"stopImmediatePropagation",r)}function y1(n){return!!n.getEvent()[Sb]}function v1(n){let e=n.getEvent(),t=n.getTargetElement(),r=e.preventDefault.bind(e);li(e,"target",t),li(e,"eventPhase",Pg.REPLAY),li(e,"preventDefault",()=>{throw r(),new Error(p1+"")}),li(e,"composedPath",()=>{throw new Error(g1+"")})}function _1(n){let e=n.getEvent(),t=n.getAction()?.element;t&&li(e,"currentTarget",t,{configurable:!0})}function li(n,e,t,{configurable:r=!1}={}){Object.defineProperty(n,e,{value:t,configurable:r})}function Ab(n,e){n.ecrd(t=>{e.dispatch(t)},Cb.I_AM_THE_JSACTION_FRAMEWORK)}function E1(n){return n?.q??[]}function I1(n){n&&(gb(n.c,n.et,n.h),gb(n.c,n.etc,n.h,!0))}function gb(n,e,t,r){for(let i=0;i<e.length;i++)n.removeEventListener(e[i],t,r)}var w1=!1,Mb=(()=>{class n{static MOUSE_SPECIAL_SUPPORT=w1;containerManager;eventHandlers={};browserEventTypeToExtraEventTypes={};dispatcher=null;queuedEventInfos=[];constructor(t){this.containerManager=t}handleEvent(t,r,i){let o=u1(t,r,r.target,i,Date.now());this.handleEventInfo(o)}handleEventInfo(t){if(!this.dispatcher){wb(t,!0),this.queuedEventInfos?.push(t);return}this.dispatcher(t)}addEvent(t,r,i){if(t in this.eventHandlers||!this.containerManager||!n.MOUSE_SPECIAL_SUPPORT&&Wk.indexOf(t)>=0)return;let o=(c,u,l)=>{this.handleEvent(c,u,l)};this.eventHandlers[t]=o;let s=Qk(r||t);if(s!==t){let c=this.browserEventTypeToExtraEventTypes[s]||[];c.push(t),this.browserEventTypeToExtraEventTypes[s]=c}this.containerManager.addEventListener(s,c=>u=>{o(t,u,c)},i)}replayEarlyEvents(t=window._ejsa){t&&(this.replayEarlyEventInfos(t.q),I1(t),delete window._ejsa)}replayEarlyEventInfos(t){for(let r=0;r<t.length;r++){let i=t[r],o=this.getEventTypesForBrowserEventType(i.eventType);for(let s=0;s<o.length;s++){let c=bb(i);Rg(c,o[s]),this.handleEventInfo(c)}}}getEventTypesForBrowserEventType(t){let r=[];return this.eventHandlers[t]&&r.push(t),this.browserEventTypeToExtraEventTypes[t]&&r.push(...this.browserEventTypeToExtraEventTypes[t]),r}handler(t){return this.eventHandlers[t]}cleanUp(){this.containerManager?.cleanUp(),this.containerManager=null,this.eventHandlers={},this.browserEventTypeToExtraEventTypes={},this.dispatcher=null,this.queuedEventInfos=[]}registerDispatcher(t,r){this.ecrd(t,r)}ecrd(t,r){if(this.dispatcher=t,this.queuedEventInfos?.length){for(let i=0;i<this.queuedEventInfos.length;i++)this.handleEventInfo(this.queuedEventInfos[i]);this.queuedEventInfos=null}}}return n})();function Nb(n,e=window){return E1(e._ejsas?.[n])}function Og(n,e=window){e._ejsas&&(e._ejsas[n]=void 0)}var xg=new $(""),J1=new $("");function Xs(n){return!n.moduleRef}function Z1(n){let e=Xs(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ot);return t.run(()=>{Xs(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Xt),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Xs(n)){let o=()=>e.destroy(),s=n.platformInjector.get(xg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(xg);s.add(o),n.moduleRef.onDestroy(()=>{As(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return eF(r,t,()=>{let o=e.get(rr),s=o.add(),c=e.get(Dg);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get(Wu,Ks);if(ab(u||Ks),!e.get(J1,!0))return Xs(n)?e.get(Nt):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Xs(n)){let f=e.get(Nt);return n.rootComponent!==void 0&&f.bootstrap(n.rootComponent),f}else return X1?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var X1;function eF(n,e,t){try{let r=t();return ai(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var el=null;function tF(n=[],e){return xt.create({name:e,providers:[{provide:ps,useValue:"platform"},{provide:xg,useValue:new Set([()=>el=null])},...n]})}function nF(n=[]){if(el)return el;let e=tF(n);return el=e,tb(),rF(e),e}function rF(n){let e=n.get(bu,null);ms(n,()=>{e?.forEach(t=>t())})}var jg=(()=>{class n{static __NG_ELEMENT_ID__=iF}return n})();function iF(n){return oF(at(),me(),(n&16)===16)}function oF(n,e,t){if(yn(n)&&!t){let r=At(n.index,e);return new ir(r,r)}else if(n.type&175){let r=e[st];return new ir(r,e)}return null}var kg=class{constructor(){}supports(e){return yg(e)}create(e){return new Fg(e)}},sF=(n,e)=>e,Fg=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||sF}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<Rb(r,i,o)?t:r,c=Rb(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=c-i,f=u-i;if(l!=f){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,S=y+m;f<=S&&S<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=f-l}}c!==u&&e(s,c,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!yg(e))throw new q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let c=0;c<this.length;c++)o=e[c],s=this._trackByFn(c,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,c),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,c)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,jT(e,c=>{s=this._trackByFn(i,c),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,c,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,c,s,i)),Object.is(t.item,c)||this._addIdentityChange(t,c)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Lg(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new nl),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new nl),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Lg=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},Vg=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},nl=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Vg,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Rb(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function Pb(){return new Bg([new kg])}var Bg=(()=>{class n{factories;static \u0275prov=le({token:n,providedIn:"root",factory:Pb});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:()=>{let r=B(n,{optional:!0,skipSelf:!0});return n.create(t,r||Pb())}}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new q(901,!1)}}return n})();function Lb(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;ue(8);try{let o=i?.injector??nF(r),s=[fb(),fw,...t||[]],c=new Os({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return Z1({r3Injector:c.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{ue(9)}}var Xu=new WeakSet,Ob="",tl=[];function xb(n){return n.get(zp,CD)}function Vb(){let n=[{provide:zp,useFactory:()=>{let e=!0;{let t=B(nn);e=!!window._ejsas?.[t]}return e&&oi("NgEventReplay"),e}}];return n.push({provide:gn,useValue:()=>{let e=B(Nt),{injector:t}=e;if(!Xu.has(e)){let r=B(qp);if(xb(t)){xD();let i=t.get(nn),o=PD(i,(s,c,u)=>{s.nodeType===Node.ELEMENT_NODE&&(AD(s,c,u),MD(s,r))});e.onDestroy(o)}}},multi:!0},{provide:ao,useFactory:()=>{let e=B(Nt),{injector:t}=e;return()=>{if(!xb(t)||Xu.has(e))return;Xu.add(e);let r=t.get(nn);e.onDestroy(()=>{Xu.delete(e),Og(r)}),e.whenStable().then(()=>{if(e.destroyed)return;let i=t.get(RD);aF(i,t);let o=t.get(qp);o.get(Ob)?.forEach(ND),o.delete(Ob);let s=i.instance;UD(t)?e.onDestroy(()=>s.cleanUp()):s.cleanUp()})}},multi:!0}),n}var aF=(n,e)=>{let t=e.get(nn),r=window._ejsas[t],i=n.instance=new Mb(new Ju(r.c));for(let c of r.et)i.addEvent(c);for(let c of r.etc)i.addEvent(c);let o=Nb(t);i.replayEarlyEventInfos(o),Og(t);let s=new Zu(c=>{cF(e,c,c.currentTarget)});Ab(i,s)};function cF(n,e,t){let r=(t&&t.getAttribute(js))??"";/d\d+/.test(r)?uF(r,n,e,t):e.eventPhase===Pg.REPLAY&&Wp(e,t)}function uF(n,e,t,r){tl.push({event:t,currentTarget:r}),ib(e,n,lF)}function lF(n){let e=[...tl],t=new Set(n);tl=[];for(let{event:r,currentTarget:i}of e){let o=i.getAttribute(js);t.has(o)?Wp(r,i):tl.push({event:r,currentTarget:i})}}var kb=!1;function dF(){kb||(kb=!0,VD(),ob(),ub(),sb(),JT(),qT(),RT(),lT())}function fF(n){return n.whenStable()}function jb(){let n=[{provide:Vs,useFactory:()=>{let e=!0;return e=!!B(ii,{optional:!0})?.get(Kp,null),e&&oi("NgHydration"),e}},{provide:gn,useValue:()=>{AT(!1),B(Vs)&&(GD(Ls()),dF())},multi:!0}];return n.push({provide:Gp,useFactory:()=>B(Vs)},{provide:ao,useFactory:()=>{if(B(Vs)){let e=B(Nt);return()=>{fF(e).then(()=>{e.destroyed||mg(e)})}}return()=>{}},multi:!0}),Zn(n)}function Bb(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var Ub=null;function cr(){return Ub}function Ug(n){Ub??=n}var ta=class{};var rl=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ol=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new rl(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,s),Hb(c,i)}});for(let i=0,o=r.length;i<o;i++){let c=r.get(i).context;c.index=i,c.count=o,c.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Hb(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(se($s),se(Bs),se(Bg))};static \u0275dir=ze({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function Hb(n,e){n.context.$implicit=e.item}var na=(()=>{class n{_viewContainer;_context=new il;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){$b(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){$b(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(se($s),se(Bs))};static \u0275dir=ze({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),il=class{$implicit=null;ngIf=null};function $b(n,e){if(n&&!n.createEmbeddedView)throw new q(2020,!1)}function hF(n,e){return new q(2100,!1)}var Hg=class{createSubscription(e,t,r){return yt(()=>e.subscribe({next:t,error:r}))}dispose(e){yt(()=>e.unsubscribe())}},$g=class{createSubscription(e,t,r){return e.then(i=>t?.(i),i=>r?.(i)),{unsubscribe:()=>{t=null,r=null}}}dispose(e){e.unsubscribe()}},pF=new $g,gF=new Hg,Gg=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=B(Xt);constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r),r=>this.applicationErrorHandler(r))}_selectStrategy(t){if(ai(t))return pF;if(Hu(t))return gF;throw hF(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(se(jg,16))};static \u0275pipe=Eg({name:"async",type:n,pure:!1})}return n})();var ur=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=si({type:n});static \u0275inj=Qn({})}return n})();function zg(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var ra=class{};var qg="browser";function ia(n){return n===qg}var oa=class{_doc;constructor(e){this._doc=e}manager},sl=(()=>{class n extends oa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(fe(Ft))};static \u0275prov=le({token:n,factory:n.\u0275fac})}return n})(),ul=new $(""),Yg=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof sl));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof sl);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new q(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(fe(ul),fe(ot))};static \u0275prov=le({token:n,factory:n.\u0275fac})}return n})(),Wg="ng-app-id";function zb(n){for(let e of n)e.remove()}function qb(n,e){let t=e.createElement("style");return t.textContent=n,t}function mF(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Wg}="${e}"],link[${Wg}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Wg),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Qg(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Jg=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,mF(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,qb);r?.forEach(i=>this.addUsage(i,this.external,Qg))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(zb(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])zb(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,qb(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Qg(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(fe(Ft),fe(nn),fe(Cu,8),fe(_n))};static \u0275prov=le({token:n,factory:n.\u0275fac})}return n})(),Kg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Zg=/%COMP%/g;var Kb="%COMP%",yF=`_nghost-${Kb}`,vF=`_ngcontent-${Kb}`,_F=!0,EF=new $("",{factory:()=>_F});function IF(n){return vF.replace(Zg,n)}function wF(n){return yF.replace(Zg,n)}function Qb(n,e){return e.map(t=>t.replace(Zg,n))}var Xg=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,c,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=c,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new sa(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof cl?i.applyToHost(t):i instanceof aa&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case Vt.Emulated:o=new cl(u,l,r,this.appId,f,s,c,p,m);break;case Vt.ShadowDom:return new al(u,t,r,s,c,this.nonce,p,m,l);case Vt.ExperimentalIsolatedShadowDom:return new al(u,t,r,s,c,this.nonce,p,m);default:o=new aa(u,l,r,f,s,c,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(fe(Yg),fe(Jg),fe(nn),fe(EF),fe(Ft),fe(ot),fe(Cu),fe(or,8))};static \u0275prov=le({token:n,factory:n.\u0275fac})}return n})(),sa=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Kg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Wb(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Wb(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new q(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Kg[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Kg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(tn.DashCase|tn.Important)?e.style.setProperty(t,r,i&tn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&tn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=cr().getGlobalEventTarget(this.doc,e),!e))throw new q(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function Wb(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var al=class extends sa{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,o,s,c,u,l){super(e,i,o,c,u),this.hostEl=t,this.sharedStylesHost=l,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let f=r.styles;f=Qb(r.id,f);for(let m of f){let y=document.createElement("style");s&&y.setAttribute("nonce",s),y.textContent=m,this.shadowRoot.appendChild(y)}let p=r.getExternalStyles?.();if(p)for(let m of p){let y=Qg(m,i);s&&y.setAttribute("nonce",s),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},aa=class extends sa{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,c,u,l){super(e,o,s,c,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=l?Qb(l,f):f,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&no.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},cl=class extends aa{contentAttr;hostAttr;constructor(e,t,r,i,o,s,c,u,l){let f=i+"-"+r.id;super(e,t,r,o,s,c,u,l,f),this.contentAttr=IF(f),this.hostAttr=wF(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var ll=class n extends ta{supportsDOMEvents=!0;static makeCurrent(){Ug(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=DF();return t==null?null:TF(t)}resetBaseElement(){ca=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return zg(document.cookie,e)}},ca=null;function DF(){return ca=ca||document.head.querySelector("base"),ca?ca.getAttribute("href"):null}function TF(n){return new URL(n,document.baseURI).pathname}var bF=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=le({token:n,factory:n.\u0275fac})}return n})(),Yb=["alt","control","meta","shift"],CF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},SF={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Jb=(()=>{class n extends oa{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),c=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>cr().onAndCancel(t,s.domEventName,c,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),Yb.forEach(l=>{let f=r.indexOf(l);f>-1&&(r.splice(f,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=CF[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Yb.forEach(s=>{if(s!==i){let c=SF[s];c(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(fe(Ft))};static \u0275prov=le({token:n,factory:n.\u0275fac})}return n})();function em(n,e,t){let r=V({rootComponent:n,platformRef:t?.platformRef},AF(e));return Lb(r)}function AF(n){return{appProviders:[...OF,...n?.providers??[]],platformProviders:PF}}function MF(){ll.makeCurrent()}function NF(){return new Yt}function RF(){return Up(document),document}var PF=[{provide:_n,useValue:qg},{provide:bu,useValue:MF,multi:!0},{provide:Ft,useFactory:RF}];var OF=[{provide:ps,useValue:"root"},{provide:Yt,useFactory:NF},{provide:ul,useClass:sl,multi:!0},{provide:ul,useClass:Jb,multi:!0},Xg,Jg,Yg,{provide:ni,useExisting:Xg},{provide:ra,useClass:bF},[]];var ua=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(c=>o.indexOf(c)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var xF="text/plain",kF="application/json",E7=`${kF}, ${xF}, */*`;var nm=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(nm||{}),tm=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(e,t=200,r="OK"){this.headers=e.headers||new ua,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.responseType=e.responseType,this.ok=this.status>=200&&this.status<300}};var dl=class n extends tm{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=nm.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected,responseType:e.responseType??this.responseType})}};var Zb=new $("");var FF=new $(""),LF="b",VF="h",jF="s",BF="st",UF="u",HF="rt",rm=new $(""),$F=["GET","HEAD"];function GF(n,e){let y=B(rm),{isCacheActive:t}=y,r=is(y,["isCacheActive"]),{transferCache:i,method:o}=n;if(!t||i===!1||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!$F.includes(o)||!r.includeRequestsWithAuthHeaders&&zF(n)||r.filter?.(n)===!1)return e(n);let s=B(ii);if(B(FF,{optional:!0}))throw new q(2803,!1);let u=n.url,l=qF(n,u),f=s.get(l,null),p=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(p=i.includeHeaders),f){let{[LF]:S,[HF]:R,[VF]:M,[jF]:j,[BF]:ie,[UF]:ae}=f,Oe=S;switch(R){case"arraybuffer":Oe=new TextEncoder().encode(S).buffer;break;case"blob":Oe=new Blob([S]);break}let Ue=new ua(M);return Qf(new dl({body:Oe,headers:Ue,status:j,statusText:ie,url:ae}))}return e(n)}function zF(n){return n.headers.has("authorization")||n.headers.has("proxy-authorization")}function Xb(n){return[...n.keys()].sort().map(e=>`${e}=${n.getAll(e)}`).join("&")}function qF(n,e){let{params:t,method:r,responseType:i}=n,o=Xb(t),s=n.serializeBody();s instanceof URLSearchParams?s=Xb(s):typeof s!="string"&&(s="");let c=[r,i,e,s,o].join("|"),u=WF(c);return u}function WF(n){let e=0;for(let t of n)e=Math.imul(31,e)+t.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function eC(n){return[{provide:rm,useFactory:()=>(oi("NgHttpTransferCache"),V({isCacheActive:!0},n))},{provide:Zb,useValue:GF,multi:!0},{provide:ao,multi:!0,useFactory:()=>{let e=B(Nt),t=B(rm);return()=>{e.whenStable().then(()=>{t.isCacheActive=!1})}}}]}var fl=(function(n){return n[n.NoHttpTransferCache=0]="NoHttpTransferCache",n[n.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",n[n.I18nSupport=2]="I18nSupport",n[n.EventReplay=3]="EventReplay",n[n.IncrementalHydration=4]="IncrementalHydration",n})(fl||{});function KF(n,e=[],t={}){return{\u0275kind:n,\u0275providers:e}}function tC(){return KF(fl.EventReplay,Vb())}function nC(...n){let e=[],t=new Set;for(let{\u0275providers:i,\u0275kind:o}of n)t.add(o),i.length&&e.push(i);let r=t.has(fl.HttpTransferCacheOptions);return Zn([[],jb(),t.has(fl.NoHttpTransferCache)||r?[]:eC({}),e])}var rC={providers:[tp(),nC(tC())]};var fC=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(se(Us),se(oo))};static \u0275dir=ze({type:n})}return n})(),QF=(()=>{class n extends fC{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Fs(n)))(i||n)}})();static \u0275dir=ze({type:n,features:[Bt]})}return n})(),hC=new $("");var YF={provide:hC,useExisting:pn(()=>Dl),multi:!0};function JF(){let n=cr()?cr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var ZF=new $(""),Dl=(()=>{class n extends fC{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!JF())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(se(Us),se(oo),se(ZF,8))};static \u0275dir=ze({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&sr("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[co([YF]),Bt]})}return n})();function cm(n){return n==null||um(n)===0}function um(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var lm=new $(""),pC=new $(""),XF=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Dn=class{static min(e){return eL(e)}static max(e){return tL(e)}static required(e){return gC(e)}static requiredTrue(e){return nL(e)}static email(e){return rL(e)}static minLength(e){return iL(e)}static maxLength(e){return oL(e)}static pattern(e){return sL(e)}static nullValidator(e){return gl()}static compose(e){return IC(e)}static composeAsync(e){return DC(e)}};function eL(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function tL(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function gC(n){return cm(n.value)?{required:!0}:null}function nL(n){return n.value===!0?null:{required:!0}}function rL(n){return cm(n.value)||XF.test(n.value)?null:{email:!0}}function iL(n){return e=>{let t=e.value?.length??um(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function oL(n){return e=>{let t=e.value?.length??um(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function sL(n){if(!n)return gl;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(cm(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function gl(n){return null}function mC(n){return n!=null}function yC(n){return ai(n)?as(n):n}function vC(n){let e={};return n.forEach(t=>{e=t!=null?V(V({},e),t):e}),Object.keys(e).length===0?null:e}function _C(n,e){return e.map(t=>t(n))}function aL(n){return!n.validate}function EC(n){return n.map(e=>aL(e)?e:t=>e.validate(t))}function IC(n){if(!n)return null;let e=n.filter(mC);return e.length==0?null:function(t){return vC(_C(t,e))}}function wC(n){return n!=null?IC(EC(n)):null}function DC(n){if(!n)return null;let e=n.filter(mC);return e.length==0?null:function(t){let r=_C(t,e).map(yC);return Yf(r).pipe(Vr(vC))}}function TC(n){return n!=null?DC(EC(n)):null}function iC(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function bC(n){return n._rawValidators}function CC(n){return n._rawAsyncValidators}function im(n){return n?Array.isArray(n)?n:[n]:[]}function ml(n,e){return Array.isArray(n)?n.includes(e):n===e}function oC(n,e){let t=im(e);return im(n).forEach(i=>{ml(t,i)||t.push(i)}),t}function sC(n,e){return im(e).filter(t=>!ml(n,t))}var yl=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=wC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=TC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},fo=class extends yl{name;get formDirective(){return null}get path(){return null}},pa=class extends yl{_parent=null;name=null;valueAccessor=null},vl=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var SC=(()=>{class n extends vl{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(se(pa,2))};static \u0275dir=ze({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&wn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Bt]})}return n})(),AC=(()=>{class n extends vl{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(se(fo,10))};static \u0275dir=ze({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&wn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Bt]})}return n})();var la="VALID",hl="INVALID",uo="PENDING",da="DISABLED",lr=class{},_l=class extends lr{value;source;constructor(e,t){super(),this.value=e,this.source=t}},fa=class extends lr{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},ha=class extends lr{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},lo=class extends lr{status;source;constructor(e,t){super(),this.status=e,this.source=t}},om=class extends lr{source;constructor(e){super(),this.source=e}},ga=class extends lr{source;constructor(e){super(),this.source=e}};function dm(n){return(Tl(n)?n.validators:n)||null}function cL(n){return Array.isArray(n)?wC(n):n||null}function fm(n,e){return(Tl(e)?e.asyncValidators:n)||null}function uL(n){return Array.isArray(n)?TC(n):n||null}function Tl(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function MC(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new q(1e3,"");if(!r[t])throw new q(1001,"")}function NC(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new q(1002,"")})}var ho=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return yt(this.statusReactive)}set status(e){yt(()=>this.statusReactive.set(e))}_status=ui(()=>this.statusReactive());statusReactive=ct(void 0);get valid(){return this.status===la}get invalid(){return this.status===hl}get pending(){return this.status==uo}get disabled(){return this.status===da}get enabled(){return this.status!==da}errors;get pristine(){return yt(this.pristineReactive)}set pristine(e){yt(()=>this.pristineReactive.set(e))}_pristine=ui(()=>this.pristineReactive());pristineReactive=ct(!0);get dirty(){return!this.pristine}get touched(){return yt(this.touchedReactive)}set touched(e){yt(()=>this.touchedReactive.set(e))}_touched=ui(()=>this.touchedReactive());touchedReactive=ct(!1);get untouched(){return!this.touched}_events=new Wt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(oC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(oC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(sC(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(sC(e,this._rawAsyncValidators))}hasValidator(e){return ml(this._rawValidators,e)}hasAsyncValidator(e){return ml(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ee(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ha(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new ha(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ee(V({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new fa(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new fa(!0,r))}markAsPending(e={}){this.status=uo;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new lo(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ee(V({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=da,this.errors=null,this._forEachChild(i=>{i.disable(ee(V({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _l(this.value,r)),this._events.next(new lo(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ee(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=la,this._forEachChild(r=>{r.enable(ee(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ee(V({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===la||this.status===uo)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new _l(this.value,t)),this._events.next(new lo(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ee(V({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?da:la}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=uo,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=yC(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new lo(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new it,this.statusChanges=new it}_calculateStatus(){return this._allControlsDisabled()?da:this.errors?hl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(uo)?uo:this._anyControlsHaveStatus(hl)?hl:la}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new fa(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new ha(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Tl(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=cL(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=uL(this._rawAsyncValidators)}},El=class extends ho{constructor(e,t,r){super(dm(t),fm(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){NC(this,!0,e),Object.keys(e).forEach(r=>{MC(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,ee(V({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new ga(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var sm=class extends El{};var RC=new $("",{factory:()=>hm}),hm="always";function lL(n,e){return[...e.path,n]}function aC(n,e,t=hm){pm(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),fL(n,e),pL(n,e),hL(n,e),dL(n,e)}function cC(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),wl(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Il(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function dL(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function pm(n,e){let t=bC(n);e.validator!==null?n.setValidators(iC(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=CC(n);e.asyncValidator!==null?n.setAsyncValidators(iC(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Il(e._rawValidators,i),Il(e._rawAsyncValidators,i)}function wl(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=bC(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=CC(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return Il(e._rawValidators,r),Il(e._rawAsyncValidators,r),t}function fL(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&PC(n,e)})}function hL(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&PC(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function PC(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function pL(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function gL(n,e){n==null,pm(n,e)}function mL(n,e){return wl(n,e)}function yL(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function vL(n){return Object.getPrototypeOf(n.constructor)===QF}function _L(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function EL(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Dl?t=o:vL(o)?r=o:i=o}),i||r||t||null}function IL(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function uC(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function lC(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var pl=class extends ho{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(dm(t),fm(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Tl(t)&&(t.nonNullable||t.initialValueIsDefault)&&(lC(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new ga(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){uC(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){uC(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){lC(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var wL=n=>n instanceof pl;var OC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ze({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var am=class extends ho{constructor(e,t,r){super(dm(t),fm(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){NC(this,!1,e),e.forEach((r,i)=>{MC(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],ee(V({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new ga(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};var DL=(()=>{class n extends fo{callSetDisabledState;get submitted(){return yt(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=ui(()=>this._submittedReactive());_submittedReactive=ct(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this.onChanges(t)}ngOnDestroy(){this.onDestroy()}onChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(wl(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(t){let r=this.form.get(t.path);return aC(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){cC(t.control||null,t,!1),IL(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}getFormArray(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}updateModel(t,r){this.form.get(t.path).setValue(r)}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}onSubmit(t){return this.submitted=!0,_L(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new om(this.control)),t?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(cC(r||null,t),wL(i)&&(aC(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);gL(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&mL(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){pm(this.form,this),this._oldForm&&wl(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(se(lm,10),se(pC,10),se(RC,8))};static \u0275dir=ze({type:n,features:[Bt,io]})}return n})();var xC=new $("");var TL={provide:pa,useExisting:pn(()=>gm)},gm=(()=>{class n extends pa{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new it;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=EL(this,o)}ngOnChanges(t){this._added||this._setUpControl(),yL(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return lL(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(se(fo,13),se(lm,10),se(pC,10),se(hC,10),se(xC,8))};static \u0275dir=ze({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[co([TL]),Bt,io]})}return n})();var bL={provide:fo,useExisting:pn(()=>mm)},mm=(()=>{class n extends DL{form=null;ngSubmit=new it;get control(){return this.form}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Fs(n)))(i||n)}})();static \u0275dir=ze({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&sr("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[co([bL]),Bt]})}return n})();var CL=(()=>{class n{_validator=gl;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):gl,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ze({type:n,features:[io]})}return n})();var SL={provide:lm,useExisting:pn(()=>ym),multi:!0};var ym=(()=>{class n extends CL{required;inputName="required";normalizeInput=Bb;createValidator=t=>gC;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Fs(n)))(i||n)}})();static \u0275dir=ze({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&$u("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[co([SL]),Bt]})}return n})();var AL=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=si({type:n});static \u0275inj=Qn({})}return n})();function dC(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var kC=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return dC(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new El(i,o)}record(t,r=null){let i=this._reduceControls(t);return new sm(i,r)}control(t,r,i){let o={};return this.useNonNullable?(dC(r)?o=r:(o.validators=r,o.asyncValidators=i),new pl(t,ee(V({},o),{nonNullable:!0}))):new pl(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new am(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof pl)return t;if(t instanceof ho)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var FC=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:xC,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:RC,useValue:t.callSetDisabledState??hm}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=si({type:n});static \u0275inj=Qn({imports:[AL]})}return n})();var LC={production:!1,firebaseConfig:{apiKey:"AIzaSyAnMOJo1lf607ygnEeIqi6Rae_7opYJ_Gc",authDomain:"tapajos-kite-vibes.firebaseapp.com",projectId:"tapajos-kite-vibes",storageBucket:"tapajos-kite-vibes.firebasestorage.app",messagingSenderId:"592976390800",appId:"1:592976390800:web:bb521c8d8b6e65e4a04615"}};var VC=()=>{};var UC=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},NL=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],c=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},HC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,c=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,f=o>>2,p=(o&3)<<4|c>>4,m=(c&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(t[f],t[p],t[m],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(UC(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):NL(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],c=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new _m;let m=o<<2|c>>4;if(r.push(m),l!==64){let y=c<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},_m=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},RL=function(n){let e=UC(n);return HC.encodeByteArray(e,!0)},ya=function(n){return RL(n).replace(/\./g,"")},Cl=function(n){try{return HC.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function $C(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var PL=()=>$C().__FIREBASE_DEFAULTS__,OL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},xL=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Cl(n[1]);return e&&JSON.parse(e)},Sl=()=>{try{return VC()||PL()||OL()||xL()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Im=n=>Sl()?.emulatorHosts?.[n],GC=n=>{let e=Im(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},wm=()=>Sl()?.config,Dm=n=>Sl()?.[`_${n}`];var bl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function dr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Al(n){return(await fetch(n,{credentials:"include"})).ok}function zC(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=V({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ya(JSON.stringify(t)),ya(JSON.stringify(s)),""].join(".")}var ma={};function kL(){let n={prod:[],emulator:[]};for(let e of Object.keys(ma))ma[e]?n.emulator.push(e):n.prod.push(e);return n}function FL(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var jC=!1;function Ml(n,e){if(typeof window>"u"||typeof document>"u"||!dr(window.location.host)||ma[n]===e||ma[n]||jC)return;ma[n]=e;function t(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=kL().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{jC=!0,s()},m}function f(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=FL(r),y=t("text"),S=document.getElementById(y)||document.createElement("span"),R=t("learnmore"),M=document.getElementById(R)||document.createElement("a"),j=t("preprendIcon"),ie=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let ae=m.element;c(ae),f(M,R);let Oe=l();u(ie,j),ae.append(ie,S,M,Oe),document.body.appendChild(ae)}o?(S.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Le(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function LL(){let n=Sl()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KC(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function QC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YC(){let n=Le();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function JC(){return!LL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tm(){try{return typeof indexedDB=="object"}catch{return!1}}function ZC(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var VL="FirebaseError",Et=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=VL,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tn.prototype.create)}},Tn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?jL(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new Et(i,c,r)}};function jL(n,e){return n.replace(BL,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var BL=/\{\$([^}]+)}/g;function XC(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function on(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(BC(o)&&BC(s)){if(!on(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function BC(n){return n!==null&&typeof n=="object"}function va(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function e0(n,e){let t=new Em(n,e);return t.subscribe.bind(t)}var Em=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");UL(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=vm),i.error===void 0&&(i.error=vm),i.complete===void 0&&(i.complete=vm);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function UL(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function vm(){}var _K=14400*1e3;function nt(n){return n&&n._delegate?n._delegate:n}var Rt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var di="[DEFAULT]";var bm=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new bl;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($L(e))try{this.getOrInitializeService({instanceIdentifier:di})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=di){return this.instances.has(e)}getOptions(e=di){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:HL(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=di){return this.component?this.component.multipleInstances?e:di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function HL(n){return n===di?void 0:n}function $L(n){return n.instantiationMode==="EAGER"}var Nl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new bm(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var GL=[],te=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(te||{}),zL={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},qL=te.INFO,WL={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},KL=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=WL[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},fr=class{constructor(e){this.name=e,this._logLevel=qL,this._logHandler=KL,this._userLogHandler=null,GL.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}};var QL=(n,e)=>e.some(t=>n instanceof t),t0,n0;function YL(){return t0||(t0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function JL(){return n0||(n0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var r0=new WeakMap,Sm=new WeakMap,i0=new WeakMap,Cm=new WeakMap,Mm=new WeakMap;function ZL(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(sn(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&r0.set(t,n)}).catch(()=>{}),Mm.set(e,n),e}function XL(n){if(Sm.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Sm.set(n,e)}var Am={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Sm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||i0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return sn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function o0(n){Am=n(Am)}function eV(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Rl(this),e,...t);return i0.set(r,e.sort?e.sort():[e]),sn(r)}:JL().includes(n)?function(...e){return n.apply(Rl(this),e),sn(r0.get(this))}:function(...e){return sn(n.apply(Rl(this),e))}}function tV(n){return typeof n=="function"?eV(n):(n instanceof IDBTransaction&&XL(n),QL(n,YL())?new Proxy(n,Am):n)}function sn(n){if(n instanceof IDBRequest)return ZL(n);if(Cm.has(n))return Cm.get(n);let e=tV(n);return e!==n&&(Cm.set(n,e),Mm.set(e,n)),e}var Rl=n=>Mm.get(n);function a0(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),c=sn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(sn(s.result),u.oldVersion,u.newVersion,sn(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var nV=["get","getKey","getAll","getAllKeys","count"],rV=["put","add","delete","clear"],Nm=new Map;function s0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Nm.get(e))return Nm.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=rV.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||nV.includes(t)))return;let o=async function(s,...c){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(await Promise.all([l[t](...c),i&&u.done]))[0]};return Nm.set(e,o),o}o0(n=>ee(V({},n),{get:(e,t,r)=>s0(e,t)||n.get(e,t,r),has:(e,t)=>!!s0(e,t)||n.has(e,t)}));var Pm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(iV(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function iV(n){return n.getComponent()?.type==="VERSION"}var Om="@firebase/app",c0="0.14.6";var bn=new fr("@firebase/app"),oV="@firebase/app-compat",sV="@firebase/analytics-compat",aV="@firebase/analytics",cV="@firebase/app-check-compat",uV="@firebase/app-check",lV="@firebase/auth",dV="@firebase/auth-compat",fV="@firebase/database",hV="@firebase/data-connect",pV="@firebase/database-compat",gV="@firebase/functions",mV="@firebase/functions-compat",yV="@firebase/installations",vV="@firebase/installations-compat",_V="@firebase/messaging",EV="@firebase/messaging-compat",IV="@firebase/performance",wV="@firebase/performance-compat",DV="@firebase/remote-config",TV="@firebase/remote-config-compat",bV="@firebase/storage",CV="@firebase/storage-compat",SV="@firebase/firestore",AV="@firebase/ai",MV="@firebase/firestore-compat",NV="firebase",RV="12.6.0";var xm="[DEFAULT]",PV={[Om]:"fire-core",[oV]:"fire-core-compat",[aV]:"fire-analytics",[sV]:"fire-analytics-compat",[uV]:"fire-app-check",[cV]:"fire-app-check-compat",[lV]:"fire-auth",[dV]:"fire-auth-compat",[fV]:"fire-rtdb",[hV]:"fire-data-connect",[pV]:"fire-rtdb-compat",[gV]:"fire-fn",[mV]:"fire-fn-compat",[yV]:"fire-iid",[vV]:"fire-iid-compat",[_V]:"fire-fcm",[EV]:"fire-fcm-compat",[IV]:"fire-perf",[wV]:"fire-perf-compat",[DV]:"fire-rc",[TV]:"fire-rc-compat",[bV]:"fire-gcs",[CV]:"fire-gcs-compat",[SV]:"fire-fst",[MV]:"fire-fst-compat",[AV]:"fire-vertex","fire-js":"fire-js",[NV]:"fire-js-all"};var Pl=new Map,OV=new Map,km=new Map;function u0(n,e){try{n.container.addComponent(e)}catch(t){bn.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function pr(n){let e=n.name;if(km.has(e))return bn.debug(`There were multiple attempts to register component ${e}.`),!1;km.set(e,n);for(let t of Pl.values())u0(t,n);for(let t of OV.values())u0(t,n);return!0}function Ea(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function It(n){return n==null?!1:n.settings!==void 0}var xV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hr=new Tn("app","Firebase",xV);var Fm=class{constructor(e,t,r){this._isDeleted=!1,this._options=V({},e),this._config=V({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hr.create("app-deleted",{appName:this._name})}};var gr=RV;function jm(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=V({name:xm,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw hr.create("bad-app-name",{appName:String(i)});if(t||(t=wm()),!t)throw hr.create("no-options");let o=Pl.get(i);if(o){if(on(t,o.options)&&on(r,o.config))return o;throw hr.create("duplicate-app",{appName:i})}let s=new Nl(i);for(let u of km.values())s.addComponent(u);let c=new Fm(t,r,s);return Pl.set(i,c),c}function Ol(n=xm){let e=Pl.get(n);if(!e&&n===xm&&wm())return jm();if(!e)throw hr.create("no-app",{appName:n});return e}function Ut(n,e,t){let r=PV[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bn.warn(s.join(" "));return}pr(new Rt(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var kV="firebase-heartbeat-database",FV=1,_a="firebase-heartbeat-store",Rm=null;function h0(){return Rm||(Rm=a0(kV,FV,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(_a)}catch(t){console.warn(t)}}}}).catch(n=>{throw hr.create("idb-open",{originalErrorMessage:n.message})})),Rm}async function LV(n){try{let t=(await h0()).transaction(_a),r=await t.objectStore(_a).get(p0(n));return await t.done,r}catch(e){if(e instanceof Et)bn.warn(e.message);else{let t=hr.create("idb-get",{originalErrorMessage:e?.message});bn.warn(t.message)}}}async function l0(n,e){try{let r=(await h0()).transaction(_a,"readwrite");await r.objectStore(_a).put(e,p0(n)),await r.done}catch(t){if(t instanceof Et)bn.warn(t.message);else{let r=hr.create("idb-set",{originalErrorMessage:t?.message});bn.warn(r.message)}}}function p0(n){return`${n.name}!${n.options.appId}`}var VV=1024,jV=30,Lm=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Vm(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=d0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>jV){let i=UV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){bn.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=d0(),{heartbeatsToSend:t,unsentEntries:r}=BV(this._heartbeatsCache.heartbeats),i=ya(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return bn.warn(e),""}}};function d0(){return new Date().toISOString().substring(0,10)}function BV(n,e=VV){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),f0(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),f0(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Vm=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tm()?ZC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await LV(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return l0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return l0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function f0(n){return ya(JSON.stringify({version:2,heartbeats:n})).length}function UV(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function HV(n){pr(new Rt("platform-logger",e=>new Pm(e),"PRIVATE")),pr(new Rt("heartbeat",e=>new Lm(e),"PRIVATE")),Ut(Om,c0,n),Ut(Om,c0,"esm2020"),Ut("fire-js","")}HV("");var $V="firebase",GV="12.6.0";Ut($V,GV,"app");var g0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},m0={};var Cn,Bm;(function(){var n;function e(w,v){function E(){}E.prototype=v.prototype,w.F=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.D=function(D,I,b){for(var _=Array(arguments.length-2),rt=2;rt<arguments.length;rt++)_[rt-2]=arguments[rt];return v.prototype[I].apply(D,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,E){E||(E=0);let D=Array(16);if(typeof v=="string")for(var I=0;I<16;++I)D[I]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(I=0;I<16;++I)D[I]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],I=w.g[2];let b=w.g[3],_;_=v+(b^E&(I^b))+D[0]+3614090360&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(I^v&(E^I))+D[1]+3905402710&4294967295,b=v+(_<<12&4294967295|_>>>20),_=I+(E^b&(v^E))+D[2]+606105819&4294967295,I=b+(_<<17&4294967295|_>>>15),_=E+(v^I&(b^v))+D[3]+3250441966&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(b^E&(I^b))+D[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(I^v&(E^I))+D[5]+1200080426&4294967295,b=v+(_<<12&4294967295|_>>>20),_=I+(E^b&(v^E))+D[6]+2821735955&4294967295,I=b+(_<<17&4294967295|_>>>15),_=E+(v^I&(b^v))+D[7]+4249261313&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(b^E&(I^b))+D[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(I^v&(E^I))+D[9]+2336552879&4294967295,b=v+(_<<12&4294967295|_>>>20),_=I+(E^b&(v^E))+D[10]+4294925233&4294967295,I=b+(_<<17&4294967295|_>>>15),_=E+(v^I&(b^v))+D[11]+2304563134&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(b^E&(I^b))+D[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=b+(I^v&(E^I))+D[13]+4254626195&4294967295,b=v+(_<<12&4294967295|_>>>20),_=I+(E^b&(v^E))+D[14]+2792965006&4294967295,I=b+(_<<17&4294967295|_>>>15),_=E+(v^I&(b^v))+D[15]+1236535329&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(I^b&(E^I))+D[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^I&(v^E))+D[6]+3225465664&4294967295,b=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(b^v))+D[11]+643717713&4294967295,I=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(I^b))+D[0]+3921069994&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^b&(E^I))+D[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^I&(v^E))+D[10]+38016083&4294967295,b=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(b^v))+D[15]+3634488961&4294967295,I=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(I^b))+D[4]+3889429448&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^b&(E^I))+D[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^I&(v^E))+D[14]+3275163606&4294967295,b=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(b^v))+D[3]+4107603335&4294967295,I=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(I^b))+D[8]+1163531501&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^b&(E^I))+D[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=b+(E^I&(v^E))+D[2]+4243563512&4294967295,b=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(b^v))+D[7]+1735328473&4294967295,I=b+(_<<14&4294967295|_>>>18),_=E+(b^v&(I^b))+D[12]+2368359562&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(E^I^b)+D[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^I)+D[8]+2272392833&4294967295,b=v+(_<<11&4294967295|_>>>21),_=I+(b^v^E)+D[11]+1839030562&4294967295,I=b+(_<<16&4294967295|_>>>16),_=E+(I^b^v)+D[14]+4259657740&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^b)+D[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^I)+D[4]+1272893353&4294967295,b=v+(_<<11&4294967295|_>>>21),_=I+(b^v^E)+D[7]+4139469664&4294967295,I=b+(_<<16&4294967295|_>>>16),_=E+(I^b^v)+D[10]+3200236656&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^b)+D[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^I)+D[0]+3936430074&4294967295,b=v+(_<<11&4294967295|_>>>21),_=I+(b^v^E)+D[3]+3572445317&4294967295,I=b+(_<<16&4294967295|_>>>16),_=E+(I^b^v)+D[6]+76029189&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^b)+D[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=b+(v^E^I)+D[12]+3873151461&4294967295,b=v+(_<<11&4294967295|_>>>21),_=I+(b^v^E)+D[15]+530742520&4294967295,I=b+(_<<16&4294967295|_>>>16),_=E+(I^b^v)+D[2]+3299628645&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(I^(E|~b))+D[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~I))+D[7]+1126891415&4294967295,b=v+(_<<10&4294967295|_>>>22),_=I+(v^(b|~E))+D[14]+2878612391&4294967295,I=b+(_<<15&4294967295|_>>>17),_=E+(b^(I|~v))+D[5]+4237533241&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~b))+D[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~I))+D[3]+2399980690&4294967295,b=v+(_<<10&4294967295|_>>>22),_=I+(v^(b|~E))+D[10]+4293915773&4294967295,I=b+(_<<15&4294967295|_>>>17),_=E+(b^(I|~v))+D[1]+2240044497&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~b))+D[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~I))+D[15]+4264355552&4294967295,b=v+(_<<10&4294967295|_>>>22),_=I+(v^(b|~E))+D[6]+2734768916&4294967295,I=b+(_<<15&4294967295|_>>>17),_=E+(b^(I|~v))+D[13]+1309151649&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~b))+D[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=b+(E^(v|~I))+D[11]+3174756917&4294967295,b=v+(_<<10&4294967295|_>>>22),_=I+(v^(b|~E))+D[2]+718787259&4294967295,I=b+(_<<15&4294967295|_>>>17),_=E+(b^(I|~v))+D[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+b&4294967295}r.prototype.v=function(w,v){v===void 0&&(v=w.length);let E=v-this.blockSize,D=this.C,I=this.h,b=0;for(;b<v;){if(I==0)for(;b<=E;)i(this,w,b),b+=this.blockSize;if(typeof w=="string"){for(;b<v;)if(D[I++]=w.charCodeAt(b++),I==this.blockSize){i(this,D),I=0;break}}else for(;b<v;)if(D[I++]=w[b++],I==this.blockSize){i(this,D),I=0;break}}this.h=I,this.o+=v},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;v=this.o*8;for(var E=w.length-8;E<w.length;++E)w[E]=v&255,v/=256;for(this.v(w),w=Array(16),v=0,E=0;E<4;++E)for(let D=0;D<32;D+=8)w[v++]=this.g[E]>>>D&255;return w};function o(w,v){var E=c;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function s(w,v){this.h=v;let E=[],D=!0;for(let I=w.length-1;I>=0;I--){let b=w[I]|0;D&&b==v||(E[I]=b,D=!1)}this.g=E}var c={};function u(w){return-128<=w&&w<128?o(w,function(v){return new s([v|0],v<0?-1:0)}):new s([w|0],w<0?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return M(l(-w));let v=[],E=1;for(let D=0;w>=E;D++)v[D]=w/E|0,E*=4294967296;return new s(v,0)}function f(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return M(f(w.substring(1),v));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=l(Math.pow(v,8)),D=p;for(let b=0;b<w.length;b+=8){var I=Math.min(8,w.length-b);let _=parseInt(w.substring(b,b+I),v);I<8?(I=l(Math.pow(v,I)),D=D.j(I).add(l(_))):(D=D.j(E),D=D.add(l(_)))}return D}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(R(this))return-M(this).m();let w=0,v=1;for(let E=0;E<this.g.length;E++){let D=this.i(E);w+=(D>=0?D:4294967296+D)*v,v*=4294967296}return w},n.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(S(this))return"0";if(R(this))return"-"+M(this).toString(w);let v=l(Math.pow(w,6));var E=this;let D="";for(;;){let I=Oe(E,v).g;E=j(E,I.j(v));let b=((E.g.length>0?E.g[0]:E.h)>>>0).toString(w);if(E=I,S(E))return b+D;for(;b.length<6;)b="0"+b;D=b+D}},n.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function S(w){if(w.h!=0)return!1;for(let v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function R(w){return w.h==-1}n.l=function(w){return w=j(this,w),R(w)?-1:S(w)?0:1};function M(w){let v=w.g.length,E=[];for(let D=0;D<v;D++)E[D]=~w.g[D];return new s(E,~w.h).add(m)}n.abs=function(){return R(this)?M(this):this},n.add=function(w){let v=Math.max(this.g.length,w.g.length),E=[],D=0;for(let I=0;I<=v;I++){let b=D+(this.i(I)&65535)+(w.i(I)&65535),_=(b>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);D=_>>>16,b&=65535,_&=65535,E[I]=_<<16|b}return new s(E,E[E.length-1]&-2147483648?-1:0)};function j(w,v){return w.add(M(v))}n.j=function(w){if(S(this)||S(w))return p;if(R(this))return R(w)?M(this).j(M(w)):M(M(this).j(w));if(R(w))return M(this.j(M(w)));if(this.l(y)<0&&w.l(y)<0)return l(this.m()*w.m());let v=this.g.length+w.g.length,E=[];for(var D=0;D<2*v;D++)E[D]=0;for(D=0;D<this.g.length;D++)for(let I=0;I<w.g.length;I++){let b=this.i(D)>>>16,_=this.i(D)&65535,rt=w.i(I)>>>16,Ln=w.i(I)&65535;E[2*D+2*I]+=_*Ln,ie(E,2*D+2*I),E[2*D+2*I+1]+=b*Ln,ie(E,2*D+2*I+1),E[2*D+2*I+1]+=_*rt,ie(E,2*D+2*I+1),E[2*D+2*I+2]+=b*rt,ie(E,2*D+2*I+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function ie(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function ae(w,v){this.g=w,this.h=v}function Oe(w,v){if(S(v))throw Error("division by zero");if(S(w))return new ae(p,p);if(R(w))return v=Oe(M(w),v),new ae(M(v.g),M(v.h));if(R(v))return v=Oe(w,M(v)),new ae(M(v.g),v.h);if(w.g.length>30){if(R(w)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,D=v;D.l(w)<=0;)E=Ue(E),D=Ue(D);var I=ke(E,1),b=ke(D,1);for(D=ke(D,2),E=ke(E,2);!S(D);){var _=b.add(D);_.l(w)<=0&&(I=I.add(E),b=_),D=ke(D,1),E=ke(E,1)}return v=j(w,I.j(v)),new ae(I,v)}for(I=p;w.l(v)>=0;){for(E=Math.max(1,Math.floor(w.m()/v.m())),D=Math.ceil(Math.log(E)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),b=l(E),_=b.j(v);R(_)||_.l(w)>0;)E-=D,b=l(E),_=b.j(v);S(b)&&(b=m),I=I.add(b),w=j(w,_)}return new ae(I,w)}n.B=function(w){return Oe(this,w).h},n.and=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let D=0;D<v;D++)E[D]=this.i(D)&w.i(D);return new s(E,this.h&w.h)},n.or=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let D=0;D<v;D++)E[D]=this.i(D)|w.i(D);return new s(E,this.h|w.h)},n.xor=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let D=0;D<v;D++)E[D]=this.i(D)^w.i(D);return new s(E,this.h^w.h)};function Ue(w){let v=w.g.length+1,E=[];for(let D=0;D<v;D++)E[D]=w.i(D)<<1|w.i(D-1)>>>31;return new s(E,w.h)}function ke(w,v){let E=v>>5;v%=32;let D=w.g.length-E,I=[];for(let b=0;b<D;b++)I[b]=v>0?w.i(b+E)>>>v|w.i(b+E+1)<<32-v:w.i(b+E);return new s(I,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Bm=m0.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,Cn=m0.Integer=s}).apply(typeof g0<"u"?g0:typeof self<"u"?self:typeof window<"u"?window:{});var xl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Sn={};var Um,zV,po,Hm,Ia,kl,$m,Gm,zm;(function(){var n,e=Object.defineProperty;function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof xl=="object"&&xl];for(var d=0;d<a.length;++d){var h=a[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(a,d){if(d)e:{var h=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var T=a[g];if(!(T in h))break e;h=h[T]}a=a[a.length-1],g=h[a],d=d(g),d!=g&&d!=null&&e(h,a,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(d){var h=[],g;for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&h.push([g,d[g]]);return h}});var o=o||{},s=this||self;function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function u(a,d,h){return a.call.apply(a.bind,arguments)}function l(a,d,h){return l=u,l.apply(null,arguments)}function f(a,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function p(a,d){function h(){}h.prototype=d.prototype,a.Z=d.prototype,a.prototype=new h,a.prototype.constructor=a,a.Ob=function(g,T,C){for(var P=Array(arguments.length-2),X=2;X<arguments.length;X++)P[X-2]=arguments[X];return d.prototype[T].apply(g,P)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function y(a){let d=a.length;if(d>0){let h=Array(d);for(let g=0;g<d;g++)h[g]=a[g];return h}return[]}function S(a,d){for(let g=1;g<arguments.length;g++){let T=arguments[g];var h=typeof T;if(h=h!="object"?h:T?Array.isArray(T)?"array":h:"null",h=="array"||h=="object"&&typeof T.length=="number"){h=a.length||0;let C=T.length||0;a.length=h+C;for(let P=0;P<C;P++)a[h+P]=T[P]}else a.push(T)}}class R{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function M(a){s.setTimeout(()=>{throw a},0)}function j(){var a=w;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class ie{constructor(){this.h=this.g=null}add(d,h){let g=ae.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var ae=new R(()=>new Oe,a=>a.reset());class Oe{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,ke=!1,w=new ie,v=()=>{let a=Promise.resolve(void 0);Ue=()=>{a.then(E)}};function E(){for(var a;a=j();){try{a.h.call(a.g)}catch(h){M(h)}var d=ae;d.j(a),d.h<100&&(d.h++,a.next=d.g,d.g=a)}ke=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};s.addEventListener("test",h,d),s.removeEventListener("test",h,d)}catch{}return a})();function _(a){return/^[\s\xa0]*$/.test(a)}function rt(a,d){I.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,d)}p(rt,I),rt.prototype.init=function(a,d){let h=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget,d||(h=="mouseover"?d=a.fromElement:h=="mouseout"&&(d=a.toElement)),this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&rt.Z.h.call(this)},rt.prototype.h=function(){rt.Z.h.call(this);let a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ln="closure_listenable_"+(Math.random()*1e6|0),xM=0;function kM(a,d,h,g,T){this.listener=a,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=T,this.key=++xM,this.da=this.fa=!1}function Wa(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ka(a,d,h){for(let g in a)d.call(h,a[g],g,a)}function FM(a,d){for(let h in a)d.call(void 0,a[h],h,a)}function O_(a){let d={};for(let h in a)d[h]=a[h];return d}let x_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k_(a,d){let h,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(h in g)a[h]=g[h];for(let C=0;C<x_.length;C++)h=x_[C],Object.prototype.hasOwnProperty.call(g,h)&&(a[h]=g[h])}}function Qa(a){this.src=a,this.g={},this.h=0}Qa.prototype.add=function(a,d,h,g,T){let C=a.toString();a=this.g[C],a||(a=this.g[C]=[],this.h++);let P=tf(a,d,g,T);return P>-1?(d=a[P],h||(d.fa=!1)):(d=new kM(d,this.src,C,!!g,T),d.fa=h,a.push(d)),d};function ef(a,d){let h=d.type;if(h in a.g){var g=a.g[h],T=Array.prototype.indexOf.call(g,d,void 0),C;(C=T>=0)&&Array.prototype.splice.call(g,T,1),C&&(Wa(d),a.g[h].length==0&&(delete a.g[h],a.h--))}}function tf(a,d,h,g){for(let T=0;T<a.length;++T){let C=a[T];if(!C.da&&C.listener==d&&C.capture==!!h&&C.ha==g)return T}return-1}var nf="closure_lm_"+(Math.random()*1e6|0),rf={};function F_(a,d,h,g,T){if(g&&g.once)return V_(a,d,h,g,T);if(Array.isArray(d)){for(let C=0;C<d.length;C++)F_(a,d[C],h,g,T);return null}return h=cf(h),a&&a[Ln]?a.J(d,h,c(g)?!!g.capture:!!g,T):L_(a,d,h,!1,g,T)}function L_(a,d,h,g,T,C){if(!d)throw Error("Invalid event type");let P=c(T)?!!T.capture:!!T,X=sf(a);if(X||(a[nf]=X=new Qa(a)),h=X.add(d,h,g,P,C),h.proxy)return h;if(g=LM(),h.proxy=g,g.src=a,g.listener=h,a.addEventListener)b||(T=P),T===void 0&&(T=!1),a.addEventListener(d.toString(),g,T);else if(a.attachEvent)a.attachEvent(B_(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function LM(){function a(h){return d.call(a.src,a.listener,h)}let d=VM;return a}function V_(a,d,h,g,T){if(Array.isArray(d)){for(let C=0;C<d.length;C++)V_(a,d[C],h,g,T);return null}return h=cf(h),a&&a[Ln]?a.K(d,h,c(g)?!!g.capture:!!g,T):L_(a,d,h,!0,g,T)}function j_(a,d,h,g,T){if(Array.isArray(d))for(var C=0;C<d.length;C++)j_(a,d[C],h,g,T);else g=c(g)?!!g.capture:!!g,h=cf(h),a&&a[Ln]?(a=a.i,C=String(d).toString(),C in a.g&&(d=a.g[C],h=tf(d,h,g,T),h>-1&&(Wa(d[h]),Array.prototype.splice.call(d,h,1),d.length==0&&(delete a.g[C],a.h--)))):a&&(a=sf(a))&&(d=a.g[d.toString()],a=-1,d&&(a=tf(d,h,g,T)),(h=a>-1?d[a]:null)&&of(h))}function of(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Ln])ef(d.i,a);else{var h=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(h,g,a.capture):d.detachEvent?d.detachEvent(B_(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=sf(d))?(ef(h,a),h.h==0&&(h.src=null,d[nf]=null)):Wa(a)}}}function B_(a){return a in rf?rf[a]:rf[a]="on"+a}function VM(a,d){if(a.da)a=!0;else{d=new rt(d,this);let h=a.listener,g=a.ha||a.src;a.fa&&of(a),a=h.call(g,d)}return a}function sf(a){return a=a[nf],a instanceof Qa?a:null}var af="__closure_events_fn_"+(Math.random()*1e9>>>0);function cf(a){return typeof a=="function"?a:(a[af]||(a[af]=function(d){return a.handleEvent(d)}),a[af])}function He(){D.call(this),this.i=new Qa(this),this.M=this,this.G=null}p(He,D),He.prototype[Ln]=!0,He.prototype.removeEventListener=function(a,d,h,g){j_(this,a,d,h,g)};function Qe(a,d){var h,g=a.G;if(g)for(h=[];g;g=g.G)h.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new I(d,a);else if(d instanceof I)d.target=d.target||a;else{var T=d;d=new I(g,a),k_(d,T)}T=!0;let C,P;if(h)for(P=h.length-1;P>=0;P--)C=d.g=h[P],T=Ya(C,g,!0,d)&&T;if(C=d.g=a,T=Ya(C,g,!0,d)&&T,T=Ya(C,g,!1,d)&&T,h)for(P=0;P<h.length;P++)C=d.g=h[P],T=Ya(C,g,!1,d)&&T}He.prototype.N=function(){if(He.Z.N.call(this),this.i){var a=this.i;for(let d in a.g){let h=a.g[d];for(let g=0;g<h.length;g++)Wa(h[g]);delete a.g[d],a.h--}}this.G=null},He.prototype.J=function(a,d,h,g){return this.i.add(String(a),d,!1,h,g)},He.prototype.K=function(a,d,h,g){return this.i.add(String(a),d,!0,h,g)};function Ya(a,d,h,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();let T=!0;for(let C=0;C<d.length;++C){let P=d[C];if(P&&!P.da&&P.capture==h){let X=P.listener,xe=P.ha||P.src;P.fa&&ef(a.i,P),T=X.call(xe,g)!==!1&&T}}return T&&!g.defaultPrevented}function jM(a,d){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=l(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(a,d||0)}function U_(a){a.g=jM(()=>{a.g=null,a.i&&(a.i=!1,U_(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class BM extends D{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:U_(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ho(a){D.call(this),this.h=a,this.g={}}p(Ho,D);var H_=[];function $_(a){Ka(a.g,function(d,h){this.g.hasOwnProperty(h)&&of(d)},a),a.g={}}Ho.prototype.N=function(){Ho.Z.N.call(this),$_(this)},Ho.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uf=s.JSON.stringify,UM=s.JSON.parse,HM=class{stringify(a){return s.JSON.stringify(a,void 0)}parse(a){return s.JSON.parse(a,void 0)}};function G_(){}function z_(){}var $o={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function lf(){I.call(this,"d")}p(lf,I);function df(){I.call(this,"c")}p(df,I);var Mr={},q_=null;function Ja(){return q_=q_||new He}Mr.Ia="serverreachability";function W_(a){I.call(this,Mr.Ia,a)}p(W_,I);function Go(a){let d=Ja();Qe(d,new W_(d))}Mr.STAT_EVENT="statevent";function K_(a,d){I.call(this,Mr.STAT_EVENT,a),this.stat=d}p(K_,I);function Ye(a){let d=Ja();Qe(d,new K_(d,a))}Mr.Ja="timingevent";function Q_(a,d){I.call(this,Mr.Ja,a),this.size=d}p(Q_,I);function zo(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){a()},d)}function qo(){this.g=!0}qo.prototype.ua=function(){this.g=!1};function $M(a,d,h,g,T,C){a.info(function(){if(a.g)if(C){var P="",X=C.split("&");for(let pe=0;pe<X.length;pe++){var xe=X[pe].split("=");if(xe.length>1){let Fe=xe[0];xe=xe[1];let qt=Fe.split("_");P=qt.length>=2&&qt[1]=="type"?P+(Fe+"="+xe+"&"):P+(Fe+"=redacted&")}}}else P=null;else P=C;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+h+`
`+P})}function GM(a,d,h,g,T,C,P){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+h+`
`+C+" "+P})}function Ri(a,d,h,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+qM(a,h)+(g?" "+g:"")})}function zM(a,d){a.info(function(){return"TIMEOUT: "+d})}qo.prototype.info=function(){};function qM(a,d){if(!a.g)return d;if(!d)return null;try{let C=JSON.parse(d);if(C){for(a=0;a<C.length;a++)if(Array.isArray(C[a])){var h=C[a];if(!(h.length<2)){var g=h[1];if(Array.isArray(g)&&!(g.length<1)){var T=g[0];if(T!="noop"&&T!="stop"&&T!="close")for(let P=1;P<g.length;P++)g[P]=""}}}}return uf(C)}catch{return d}}var Za={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Y_={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},J_;function ff(){}p(ff,G_),ff.prototype.g=function(){return new XMLHttpRequest},J_=new ff;function Wo(a){return encodeURIComponent(String(a))}function WM(a){var d=1;a=a.split(":");let h=[];for(;d>0&&a.length;)h.push(a.shift()),d--;return a.length&&h.push(a.join(":")),h}function Vn(a,d,h,g){this.j=a,this.i=d,this.l=h,this.S=g||1,this.V=new Ho(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Z_}function Z_(){this.i=null,this.g="",this.h=!1}var X_={},hf={};function pf(a,d,h){a.M=1,a.A=ec(zt(d)),a.u=h,a.R=!0,eE(a,null)}function eE(a,d){a.F=Date.now(),Xa(a),a.B=zt(a.A);var h=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),hE(h.i,"t",g),a.C=0,h=a.j.L,a.h=new Z_,a.g=RE(a.j,h?d:null,!a.u),a.P>0&&(a.O=new BM(l(a.Y,a,a.g),a.P)),d=a.V,h=a.g,g=a.ba;var T="readystatechange";Array.isArray(T)||(T&&(H_[0]=T.toString()),T=H_);for(let C=0;C<T.length;C++){let P=F_(h,T[C],g||d.handleEvent,!1,d.h||d);if(!P)break;d.g[P.key]=P}d=a.J?O_(a.J):{},a.u?(a.v||(a.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,d)):(a.v="GET",a.g.ea(a.B,a.v,null,d)),Go(),$M(a.i,a.v,a.B,a.l,a.S,a.u)}Vn.prototype.ba=function(a){a=a.target;let d=this.O;d&&Un(a)==3?d.j():this.Y(a)},Vn.prototype.Y=function(a){try{if(a==this.g)e:{let X=Un(this.g),xe=this.g.ya(),pe=this.g.ca();if(!(X<3)&&(X!=3||this.g&&(this.h.h||this.g.la()||EE(this.g)))){this.K||X!=4||xe==7||(xe==8||pe<=0?Go(3):Go(2)),gf(this);var d=this.g.ca();this.X=d;var h=KM(this);if(this.o=d==200,GM(this.i,this.v,this.B,this.l,this.S,X,d),this.o){if(this.U&&!this.L){t:{if(this.g){var g,T=this.g;if((g=T.g?T.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(g)){var C=g;break t}}C=null}if(a=C)Ri(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,mf(this,a);else{this.o=!1,this.m=3,Ye(12),Nr(this),Ko(this);break e}}if(this.R){a=!0;let Fe;for(;!this.K&&this.C<h.length;)if(Fe=QM(this,h),Fe==hf){X==4&&(this.m=4,Ye(14),a=!1),Ri(this.i,this.l,null,"[Incomplete Response]");break}else if(Fe==X_){this.m=4,Ye(15),Ri(this.i,this.l,h,"[Invalid Chunk]"),a=!1;break}else Ri(this.i,this.l,Fe,null),mf(this,Fe);if(tE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),X!=4||h.length!=0||this.h.h||(this.m=1,Ye(16),a=!1),this.o=this.o&&a,!a)Ri(this.i,this.l,h,"[Invalid Chunked Response]"),Nr(this),Ko(this);else if(h.length>0&&!this.W){this.W=!0;var P=this.j;P.g==this&&P.aa&&!P.P&&(P.j.info("Great, no buffering proxy detected. Bytes received: "+h.length),Df(P),P.P=!0,Ye(11))}}else Ri(this.i,this.l,h,null),mf(this,h);X==4&&Nr(this),this.o&&!this.K&&(X==4?SE(this.j,this):(this.o=!1,Xa(this)))}else uN(this.g),d==400&&h.indexOf("Unknown SID")>0?(this.m=3,Ye(12)):(this.m=0,Ye(13)),Nr(this),Ko(this)}}}catch{}finally{}};function KM(a){if(!tE(a))return a.g.la();let d=EE(a.g);if(d==="")return"";let h="",g=d.length,T=Un(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Nr(a),Ko(a),"";a.h.i=new s.TextDecoder}for(let C=0;C<g;C++)a.h.h=!0,h+=a.h.i.decode(d[C],{stream:!(T&&C==g-1)});return d.length=0,a.h.g+=h,a.C=0,a.h.g}function tE(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function QM(a,d){var h=a.C,g=d.indexOf(`
`,h);return g==-1?hf:(h=Number(d.substring(h,g)),isNaN(h)?X_:(g+=1,g+h>d.length?hf:(d=d.slice(g,g+h),a.C=g+h,d)))}Vn.prototype.cancel=function(){this.K=!0,Nr(this)};function Xa(a){a.T=Date.now()+a.H,nE(a,a.H)}function nE(a,d){if(a.D!=null)throw Error("WatchDog timer not null");a.D=zo(l(a.aa,a),d)}function gf(a){a.D&&(s.clearTimeout(a.D),a.D=null)}Vn.prototype.aa=function(){this.D=null;let a=Date.now();a-this.T>=0?(zM(this.i,this.B),this.M!=2&&(Go(),Ye(17)),Nr(this),this.m=2,Ko(this)):nE(this,this.T-a)};function Ko(a){a.j.I==0||a.K||SE(a.j,a)}function Nr(a){gf(a);var d=a.O;d&&typeof d.dispose=="function"&&d.dispose(),a.O=null,$_(a.V),a.g&&(d=a.g,a.g=null,d.abort(),d.dispose())}function mf(a,d){try{var h=a.j;if(h.I!=0&&(h.g==a||yf(h.h,a))){if(!a.L&&yf(h.h,a)&&h.I==3){try{var g=h.Ba.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!h.v){if(h.g)if(h.g.F+3e3<a.F)sc(h),ic(h);else break e;wf(h),Ye(18)}}else h.xa=T[1],0<h.xa-h.K&&T[2]<37500&&h.F&&h.A==0&&!h.C&&(h.C=zo(l(h.Va,h),6e3));oE(h.h)<=1&&h.ta&&(h.ta=void 0)}else Pr(h,11)}else if((a.L||h.g==a)&&sc(h),!_(d))for(T=h.Ba.g.parse(d),d=0;d<T.length;d++){let pe=T[d],Fe=pe[0];if(!(Fe<=h.K))if(h.K=Fe,pe=pe[1],h.I==2)if(pe[0]=="c"){h.M=pe[1],h.ba=pe[2];let qt=pe[3];qt!=null&&(h.ka=qt,h.j.info("VER="+h.ka));let Or=pe[4];Or!=null&&(h.za=Or,h.j.info("SVER="+h.za));let Hn=pe[5];Hn!=null&&typeof Hn=="number"&&Hn>0&&(g=1.5*Hn,h.O=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let $n=a.g;if($n){let cc=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cc){var C=g.h;C.g||cc.indexOf("spdy")==-1&&cc.indexOf("quic")==-1&&cc.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(vf(C,C.h),C.h=null))}if(g.G){let Tf=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;Tf&&(g.wa=Tf,ve(g.J,g.G,Tf))}}h.I=3,h.l&&h.l.ra(),h.aa&&(h.T=Date.now()-a.F,h.j.info("Handshake RTT: "+h.T+"ms")),g=h;var P=a;if(g.na=NE(g,g.L?g.ba:null,g.W),P.L){sE(g.h,P);var X=P,xe=g.O;xe&&(X.H=xe),X.D&&(gf(X),Xa(X)),g.g=P}else bE(g);h.i.length>0&&oc(h)}else pe[0]!="stop"&&pe[0]!="close"||Pr(h,7);else h.I==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?Pr(h,7):If(h):pe[0]!="noop"&&h.l&&h.l.qa(pe),h.A=0)}}Go(4)}catch{}}var YM=class{constructor(a,d){this.g=a,this.map=d}};function rE(a){this.l=a||10,s.PerformanceNavigationTiming?(a=s.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function iE(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function oE(a){return a.h?1:a.g?a.g.size:0}function yf(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function vf(a,d){a.g?a.g.add(d):a.h=d}function sE(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}rE.prototype.cancel=function(){if(this.i=aE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function aE(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let h of a.g.values())d=d.concat(h.G);return d}return y(a.i)}var cE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function JM(a,d){if(a){a=a.split("&");for(let h=0;h<a.length;h++){let g=a[h].indexOf("="),T,C=null;g>=0?(T=a[h].substring(0,g),C=a[h].substring(g+1)):T=a[h],d(T,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function jn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;a instanceof jn?(this.l=a.l,Qo(this,a.j),this.o=a.o,this.g=a.g,Yo(this,a.u),this.h=a.h,_f(this,pE(a.i)),this.m=a.m):a&&(d=String(a).match(cE))?(this.l=!1,Qo(this,d[1]||"",!0),this.o=Jo(d[2]||""),this.g=Jo(d[3]||"",!0),Yo(this,d[4]),this.h=Jo(d[5]||"",!0),_f(this,d[6]||"",!0),this.m=Jo(d[7]||"")):(this.l=!1,this.i=new Xo(null,this.l))}jn.prototype.toString=function(){let a=[];var d=this.j;d&&a.push(Zo(d,uE,!0),":");var h=this.g;return(h||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Zo(d,uE,!0),"@"),a.push(Wo(h).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.u,h!=null&&a.push(":",String(h))),(h=this.h)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Zo(h,h.charAt(0)=="/"?eN:XM,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Zo(h,nN)),a.join("")},jn.prototype.resolve=function(a){let d=zt(this),h=!!a.j;h?Qo(d,a.j):h=!!a.o,h?d.o=a.o:h=!!a.g,h?d.g=a.g:h=a.u!=null;var g=a.h;if(h)Yo(d,a.u);else if(h=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var T=d.h.lastIndexOf("/");T!=-1&&(g=d.h.slice(0,T+1)+g)}if(T=g,T==".."||T==".")g="";else if(T.indexOf("./")!=-1||T.indexOf("/.")!=-1){g=T.lastIndexOf("/",0)==0,T=T.split("/");let C=[];for(let P=0;P<T.length;){let X=T[P++];X=="."?g&&P==T.length&&C.push(""):X==".."?((C.length>1||C.length==1&&C[0]!="")&&C.pop(),g&&P==T.length&&C.push("")):(C.push(X),g=!0)}g=C.join("/")}else g=T}return h?d.h=g:h=a.i.toString()!=="",h?_f(d,pE(a.i)):h=!!a.m,h&&(d.m=a.m),d};function zt(a){return new jn(a)}function Qo(a,d,h){a.j=h?Jo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Yo(a,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);a.u=d}else a.u=null}function _f(a,d,h){d instanceof Xo?(a.i=d,rN(a.i,a.l)):(h||(d=Zo(d,tN)),a.i=new Xo(d,a.l))}function ve(a,d,h){a.i.set(d,h)}function ec(a){return ve(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Jo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Zo(a,d,h){return typeof a=="string"?(a=encodeURI(a).replace(d,ZM),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function ZM(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var uE=/[#\/\?@]/g,XM=/[#\?:]/g,eN=/[#\?]/g,tN=/[#\?@]/g,nN=/#/g;function Xo(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Rr(a){a.g||(a.g=new Map,a.h=0,a.i&&JM(a.i,function(d,h){a.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}n=Xo.prototype,n.add=function(a,d){Rr(this),this.i=null,a=Pi(this,a);let h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(d),this.h+=1,this};function lE(a,d){Rr(a),d=Pi(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function dE(a,d){return Rr(a),d=Pi(a,d),a.g.has(d)}n.forEach=function(a,d){Rr(this),this.g.forEach(function(h,g){h.forEach(function(T){a.call(d,T,g,this)},this)},this)};function fE(a,d){Rr(a);let h=[];if(typeof d=="string")dE(a,d)&&(h=h.concat(a.g.get(Pi(a,d))));else for(a=Array.from(a.g.values()),d=0;d<a.length;d++)h=h.concat(a[d]);return h}n.set=function(a,d){return Rr(this),this.i=null,a=Pi(this,a),dE(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},n.get=function(a,d){return a?(a=fE(this,a),a.length>0?String(a[0]):d):d};function hE(a,d,h){lE(a,d),h.length>0&&(a.i=null,a.g.set(Pi(a,d),y(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(let g=0;g<d.length;g++){var h=d[g];let T=Wo(h);h=fE(this,h);for(let C=0;C<h.length;C++){let P=T;h[C]!==""&&(P+="="+Wo(h[C])),a.push(P)}}return this.i=a.join("&")};function pE(a){let d=new Xo;return d.i=a.i,a.g&&(d.g=new Map(a.g),d.h=a.h),d}function Pi(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function rN(a,d){d&&!a.j&&(Rr(a),a.i=null,a.g.forEach(function(h,g){let T=g.toLowerCase();g!=T&&(lE(this,g),hE(this,T,h))},a)),a.j=d}function iN(a,d){let h=new qo;if(s.Image){let g=new Image;g.onload=f(Bn,h,"TestLoadImage: loaded",!0,d,g),g.onerror=f(Bn,h,"TestLoadImage: error",!1,d,g),g.onabort=f(Bn,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=f(Bn,h,"TestLoadImage: timeout",!1,d,g),s.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function oN(a,d){let h=new qo,g=new AbortController,T=setTimeout(()=>{g.abort(),Bn(h,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(C=>{clearTimeout(T),C.ok?Bn(h,"TestPingServer: ok",!0,d):Bn(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),Bn(h,"TestPingServer: error",!1,d)})}function Bn(a,d,h,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(h)}catch{}}function sN(){this.g=new HM}function tc(a){this.i=a.Sb||null,this.h=a.ab||!1}p(tc,G_),tc.prototype.g=function(){return new nc(this.i,this.h)};function nc(a,d){He.call(this),this.H=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(nc,He),n=nc.prototype,n.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=d,this.readyState=1,ts(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(d.body=a),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,es(this)),this.readyState=0},n.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ts(this)),this.g&&(this.readyState=3,ts(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;gE(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function gE(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}n.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?es(this):ts(this),this.readyState==3&&gE(this)}},n.Oa=function(a){this.g&&(this.response=this.responseText=a,es(this))},n.Na=function(a){this.g&&(this.response=a,es(this))},n.ga=function(){this.g&&es(this)};function es(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ts(a)}n.setRequestHeader=function(a,d){this.A.append(a,d)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=d.next();return a.join(`\r
`)};function ts(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(nc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function mE(a){let d="";return Ka(a,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function Ef(a,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=mE(h),typeof a=="string"?h!=null&&Wo(h):ve(a,d,h))}function Ie(a){He.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ie,He);var aN=/^https?$/i,cN=["POST","PUT"];n=Ie.prototype,n.Fa=function(a){this.H=a},n.ea=function(a,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():J_.g(),this.g.onreadystatechange=m(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(C){yE(this,C);return}if(a=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)h.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let C of g.keys())h.set(C,g.get(C));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(C=>C.toLowerCase()=="content-type"),T=s.FormData&&a instanceof s.FormData,!(Array.prototype.indexOf.call(cN,d,void 0)>=0)||g||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,P]of h)this.g.setRequestHeader(C,P);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(C){yE(this,C)}};function yE(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.o=5,vE(a),rc(a)}function vE(a){a.A||(a.A=!0,Qe(a,"complete"),Qe(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,Qe(this,"complete"),Qe(this,"abort"),rc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rc(this,!0)),Ie.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?_E(this):this.Xa())},n.Xa=function(){_E(this)};function _E(a){if(a.h&&typeof o<"u"){if(a.v&&Un(a)==4)setTimeout(a.Ca.bind(a),0);else if(Qe(a,"readystatechange"),Un(a)==4){a.h=!1;try{let C=a.ca();e:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=C===0){let P=String(a.D).match(cE)[1]||null;!P&&s.self&&s.self.location&&(P=s.self.location.protocol.slice(0,-1)),g=!aN.test(P?P.toLowerCase():"")}h=g}if(h)Qe(a,"complete"),Qe(a,"success");else{a.o=6;try{var T=Un(a)>2?a.g.statusText:""}catch{T=""}a.l=T+" ["+a.ca()+"]",vE(a)}}finally{rc(a)}}}}function rc(a,d){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);let h=a.g;a.g=null,d||Qe(a,"ready");try{h.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Un(a){return a.g?a.g.readyState:0}n.ca=function(){try{return Un(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),UM(d)}};function EE(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function uN(a){let d={};a=(a.g&&Un(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(_(a[g]))continue;var h=WM(a[g]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let C=d[T]||[];d[T]=C,C.push(h)}FM(d,function(g){return g.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ns(a,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||d}function IE(a){this.za=0,this.i=[],this.j=new qo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ns("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ns("baseRetryDelayMs",5e3,a),this.Za=ns("retryDelaySeedMs",1e4,a),this.Ta=ns("forwardChannelMaxRetries",2,a),this.va=ns("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new rE(a&&a.concurrentRequestLimit),this.Ba=new sN,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=IE.prototype,n.ka=8,n.I=1,n.connect=function(a,d,h,g){Ye(0),this.W=a,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.J=NE(this,null,this.W),oc(this)};function If(a){if(wE(a),a.I==3){var d=a.V++,h=zt(a.J);if(ve(h,"SID",a.M),ve(h,"RID",d),ve(h,"TYPE","terminate"),rs(a,h),d=new Vn(a,a.j,d),d.M=2,d.A=ec(zt(h)),h=!1,s.navigator&&s.navigator.sendBeacon)try{h=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!h&&s.Image&&(new Image().src=d.A,h=!0),h||(d.g=RE(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Xa(d)}ME(a)}function ic(a){a.g&&(Df(a),a.g.cancel(),a.g=null)}function wE(a){ic(a),a.v&&(s.clearTimeout(a.v),a.v=null),sc(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&s.clearTimeout(a.m),a.m=null)}function oc(a){if(!iE(a.h)&&!a.m){a.m=!0;var d=a.Ea;Ue||v(),ke||(Ue(),ke=!0),w.add(d,a),a.D=0}}function lN(a,d){return oE(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=d.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=zo(l(a.Ea,a,d),AE(a,a.D)),a.D++,!0)}n.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;let T=new Vn(this,this.j,a),C=this.o;if(this.U&&(C?(C=O_(C),k_(C,this.U)):C=this.U),this.u!==null||this.R||(T.J=C,C=null),this.S)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,d>4096){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=TE(this,T,d),h=zt(this.J),ve(h,"RID",a),ve(h,"CVER",22),this.G&&ve(h,"X-HTTP-Session-Id",this.G),rs(this,h),C&&(this.R?d="headers="+Wo(mE(C))+"&"+d:this.u&&Ef(h,this.u,C)),vf(this.h,T),this.Ra&&ve(h,"TYPE","init"),this.S?(ve(h,"$req",d),ve(h,"SID","null"),T.U=!0,pf(T,h,null)):pf(T,h,d),this.I=2}}else this.I==3&&(a?DE(this,a):this.i.length==0||iE(this.h)||DE(this))};function DE(a,d){var h;d?h=d.l:h=a.V++;let g=zt(a.J);ve(g,"SID",a.M),ve(g,"RID",h),ve(g,"AID",a.K),rs(a,g),a.u&&a.o&&Ef(g,a.u,a.o),h=new Vn(a,a.j,h,a.D+1),a.u===null&&(h.J=a.o),d&&(a.i=d.G.concat(a.i)),d=TE(a,h,1e3),h.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),vf(a.h,h),pf(h,g,d)}function rs(a,d){a.H&&Ka(a.H,function(h,g){ve(d,g,h)}),a.l&&Ka({},function(h,g){ve(d,g,h)})}function TE(a,d,h){h=Math.min(a.i.length,h);let g=a.l?l(a.l.Ka,a.l,a):null;e:{var T=a.i;let X=-1;for(;;){let xe=["count="+h];X==-1?h>0?(X=T[0].g,xe.push("ofs="+X)):X=0:xe.push("ofs="+X);let pe=!0;for(let Fe=0;Fe<h;Fe++){var C=T[Fe].g;let qt=T[Fe].map;if(C-=X,C<0)X=Math.max(0,T[Fe].g-100),pe=!1;else try{C="req"+C+"_"||"";try{var P=qt instanceof Map?qt:Object.entries(qt);for(let[Or,Hn]of P){let $n=Hn;c(Hn)&&($n=uf(Hn)),xe.push(C+Or+"="+encodeURIComponent($n))}}catch(Or){throw xe.push(C+"type="+encodeURIComponent("_badmap")),Or}}catch{g&&g(qt)}}if(pe){P=xe.join("&");break e}}P=void 0}return a=a.i.splice(0,h),d.G=a,P}function bE(a){if(!a.g&&!a.v){a.Y=1;var d=a.Da;Ue||v(),ke||(Ue(),ke=!0),w.add(d,a),a.A=0}}function wf(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=zo(l(a.Da,a),AE(a,a.A)),a.A++,!0)}n.Da=function(){if(this.v=null,CE(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=zo(l(this.Wa,this),a)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ye(10),ic(this),CE(this))};function Df(a){a.B!=null&&(s.clearTimeout(a.B),a.B=null)}function CE(a){a.g=new Vn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var d=zt(a.na);ve(d,"RID","rpc"),ve(d,"SID",a.M),ve(d,"AID",a.K),ve(d,"CI",a.F?"0":"1"),!a.F&&a.ia&&ve(d,"TO",a.ia),ve(d,"TYPE","xmlhttp"),rs(a,d),a.u&&a.o&&Ef(d,a.u,a.o),a.O&&(a.g.H=a.O);var h=a.g;a=a.ba,h.M=1,h.A=ec(zt(d)),h.u=null,h.R=!0,eE(h,a)}n.Va=function(){this.C!=null&&(this.C=null,ic(this),wf(this),Ye(19))};function sc(a){a.C!=null&&(s.clearTimeout(a.C),a.C=null)}function SE(a,d){var h=null;if(a.g==d){sc(a),Df(a),a.g=null;var g=2}else if(yf(a.h,d))h=d.G,sE(a.h,d),g=1;else return;if(a.I!=0){if(d.o)if(g==1){h=d.u?d.u.length:0,d=Date.now()-d.F;var T=a.D;g=Ja(),Qe(g,new Q_(g,h)),oc(a)}else bE(a);else if(T=d.m,T==3||T==0&&d.X>0||!(g==1&&lN(a,d)||g==2&&wf(a)))switch(h&&h.length>0&&(d=a.h,d.i=d.i.concat(h)),T){case 1:Pr(a,5);break;case 4:Pr(a,10);break;case 3:Pr(a,6);break;default:Pr(a,2)}}}function AE(a,d){let h=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(h*=2),h*d}function Pr(a,d){if(a.j.info("Error code "+d),d==2){var h=l(a.bb,a),g=a.Ua;let T=!g;g=new jn(g||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Qo(g,"https"),ec(g),T?iN(g.toString(),h):oN(g.toString(),h)}else Ye(2);a.I=0,a.l&&a.l.pa(d),ME(a),wE(a)}n.bb=function(a){a?(this.j.info("Successfully pinged google.com"),Ye(2)):(this.j.info("Failed to ping google.com"),Ye(1))};function ME(a){if(a.I=0,a.ja=[],a.l){let d=aE(a.h);(d.length!=0||a.i.length!=0)&&(S(a.ja,d),S(a.ja,a.i),a.h.i.length=0,y(a.i),a.i.length=0),a.l.oa()}}function NE(a,d,h){var g=h instanceof jn?zt(h):new jn(h);if(g.g!="")d&&(g.g=d+"."+g.g),Yo(g,g.u);else{var T=s.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;let C=new jn(null);g&&Qo(C,g),d&&(C.g=d),T&&Yo(C,T),h&&(C.h=h),g=C}return h=a.G,d=a.wa,h&&d&&ve(g,h,d),ve(g,"VER",a.ka),rs(a,g),g}function RE(a,d,h){if(d&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Aa&&!a.ma?new Ie(new tc({ab:h})):new Ie(a.ma),d.Fa(a.L),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function PE(){}n=PE.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ac(){}ac.prototype.g=function(a,d){return new ut(a,d)};function ut(a,d){He.call(this),this.g=new IE(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(a?a["X-WebChannel-Client-Profile"]=d.sa:a={"X-WebChannel-Client-Profile":d.sa}),this.g.U=a,(a=d&&d.Qb)&&!_(a)&&(this.g.u=a),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.G=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Oi(this)}p(ut,He),ut.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ut.prototype.close=function(){If(this.g)},ut.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.v&&(h={},h.__data__=uf(a),a=h);d.i.push(new YM(d.Ya++,a)),d.I==3&&oc(d)},ut.prototype.N=function(){this.g.l=null,delete this.j,If(this.g),delete this.g,ut.Z.N.call(this)};function OE(a){lf.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let h in d){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}p(OE,lf);function xE(){df.call(this),this.status=1}p(xE,df);function Oi(a){this.g=a}p(Oi,PE),Oi.prototype.ra=function(){Qe(this.g,"a")},Oi.prototype.qa=function(a){Qe(this.g,new OE(a))},Oi.prototype.pa=function(a){Qe(this.g,new xE)},Oi.prototype.oa=function(){Qe(this.g,"b")},ac.prototype.createWebChannel=ac.prototype.g,ut.prototype.send=ut.prototype.o,ut.prototype.open=ut.prototype.m,ut.prototype.close=ut.prototype.close,zm=Sn.createWebChannelTransport=function(){return new ac},Gm=Sn.getStatEventTarget=function(){return Ja()},$m=Sn.Event=Mr,kl=Sn.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Za.NO_ERROR=0,Za.TIMEOUT=8,Za.HTTP_ERROR=6,Ia=Sn.ErrorCode=Za,Y_.COMPLETE="complete",Hm=Sn.EventType=Y_,z_.EventType=$o,$o.OPEN="a",$o.CLOSE="b",$o.ERROR="c",$o.MESSAGE="d",He.prototype.listen=He.prototype.J,po=Sn.WebChannel=z_,zV=Sn.FetchXmlHttpFactory=tc,Ie.prototype.listenOnce=Ie.prototype.K,Ie.prototype.getLastError=Ie.prototype.Ha,Ie.prototype.getLastErrorCode=Ie.prototype.ya,Ie.prototype.getStatus=Ie.prototype.ca,Ie.prototype.getResponseJson=Ie.prototype.La,Ie.prototype.getResponseText=Ie.prototype.la,Ie.prototype.send=Ie.prototype.ea,Ie.prototype.setWithCredentials=Ie.prototype.Fa,Um=Sn.XhrIo=Ie}).apply(typeof xl<"u"?xl:typeof self<"u"?self:typeof window<"u"?window:{});var y0="@firebase/firestore",v0="4.9.2";var Ve=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ve.UNAUTHENTICATED=new Ve(null),Ve.GOOGLE_CREDENTIALS=new Ve("google-credentials-uid"),Ve.FIRST_PARTY=new Ve("first-party-uid"),Ve.MOCK_USER=new Ve("mock-user");var Fo="12.3.0";var yi=new fr("@firebase/firestore");function go(){return yi.logLevel}function F(n,...e){if(yi.logLevel<=te.DEBUG){let t=e.map(Fv);yi.debug(`Firestore (${Fo}): ${n}`,...t)}}function Mn(n,...e){if(yi.logLevel<=te.ERROR){let t=e.map(Fv);yi.error(`Firestore (${Fo}): ${n}`,...t)}}function Do(n,...e){if(yi.logLevel<=te.WARN){let t=e.map(Fv);yi.warn(`Firestore (${Fo}): ${n}`,...t)}}function Fv(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function z(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,uS(n,r,t)}function uS(n,e,t){let r=`FIRESTORE (${Fo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Mn(r),new Error(r)}function de(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||uS(e,i,r)}function Q(n,e){return n}var A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},x=class extends Et{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var An=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Hl=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Jm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ve.UNAUTHENTICATED))}shutdown(){}},Zm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Xm=class{constructor(e){this.t=e,this.currentUser=Ve.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){de(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new An;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new An,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new An)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string",31837,{l:r}),new Hl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string",2055,{h:e}),new Ve(e)}},ey=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ve.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},ty=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new ey(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ve.FIRST_PARTY))}shutdown(){}invalidateToken(){}},$l=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ny=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,It(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){de(this.o===void 0,3512);let r=o=>{o.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,F("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $l(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(de(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new $l(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function qV(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Aa=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=qV(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function ne(n,e){return n<e?-1:n>e?1:0}function ry(n,e){let t=Math.min(n.length,e.length);for(let r=0;r<t;r++){let i=n.charAt(r),o=e.charAt(r);if(i!==o)return qm(i)===qm(o)?ne(i,o):qm(i)?1:-1}return ne(n.length,e.length)}var WV=55296,KV=57343;function qm(n){let e=n.charCodeAt(0);return e>=WV&&e<=KV}function To(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var _0="__name__",Gl=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&z(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return ne(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):ry(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Cn.fromString(e.substring(4,e.length-2))}},Ee=class n extends Gl{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new x(A.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},QV=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wt=class n extends Gl{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return QV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_0}static keyField(){return new n([_0])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new x(A.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new x(A.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new x(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new x(A.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var H=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ee.fromString(e))}static fromName(e){return new n(Ee.fromString(e).popFirst(5))}static empty(){return new n(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ee.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ee(e.slice()))}};function lS(n,e,t){if(!t)throw new x(A.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function YV(n,e,t,r){if(e===!0&&r===!0)throw new x(A.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function E0(n){if(!H.isDocumentKey(n))throw new x(A.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function I0(n){if(H.isDocumentKey(n))throw new x(A.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function dS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Id(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z(12329,{type:typeof n})}function Da(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new x(A.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Id(n);throw new x(A.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Re(n,e){let t={typeString:n};return e&&(t.value=e),t}function ja(n,e){if(!dS(n))throw new x(A.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new x(A.INVALID_ARGUMENT,t);return!0}var w0=-62135596800,D0=1e6,Pe=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*D0);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new x(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new x(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<w0)throw new x(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/D0}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ja(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-w0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};Pe._jsonSchemaVersion="firestore/timestamp/1.0",Pe._jsonSchema={type:Re("string",Pe._jsonSchemaVersion),seconds:Re("number"),nanoseconds:Re("number")};var Y=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Pe(0,0))}static max(){return new n(new Pe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ma=-1,iy=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};iy.UNKNOWN_ID=-1;function JV(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new Pe(t+1,0):new Pe(t,r));return new vi(i,H.empty(),e)}function ZV(n){return new vi(n.readTime,n.key,Ma)}var vi=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Y.min(),H.empty(),Ma)}static max(){return new n(Y.max(),H.empty(),Ma)}};function XV(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=H.comparator(n.documentKey,e.documentKey),t!==0?t:ne(n.largestBatchId,e.largestBatchId))}var e2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",oy=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function Lo(n){if(n.code!==A.FAILED_PRECONDITION||n.message!==e2)throw n;F("LocalStore","Unexpectedly lost primary lease")}var N=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(f=>{s[l]=f,++c,c===o&&r(s)},f=>i(f))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function t2(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Vo(n){return n.name==="IndexedDbTransactionError"}var Lv=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ue&&this.ue(t),t}}n.ce=-1;return n})(),Vv=-1;function wd(n){return n==null}function Na(n){return n===0&&1/n==-1/0}function n2(n){return typeof n=="number"&&Number.isInteger(n)&&!Na(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var fS="";function r2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=T0(e)),e=i2(n.get(t),e);return T0(e)}function i2(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case fS:t+="";break;default:t+=o}}return t}function T0(n){return n+fS+""}var o2="remoteDocuments",hS="owner";var pS="mutationQueues";var gS="mutations";var mS="documentMutations",s2="remoteDocumentsV14";var yS="remoteDocumentGlobal";var vS="targets";var _S="targetDocuments";var ES="targetGlobal",IS="collectionParents";var wS="clientMetadata";var DS="bundles";var TS="namedQueries";var a2="indexConfiguration";var c2="indexState";var u2="indexEntries";var bS="documentOverlays";var l2="globals";var d2=[pS,gS,mS,o2,vS,hS,ES,_S,wS,yS,IS,DS,TS],nQ=[...d2,bS],f2=[pS,gS,mS,s2,vS,hS,ES,_S,wS,yS,IS,DS,TS,bS],h2=f2,p2=[...h2,a2,c2,u2];var rQ=[...p2,l2];function b0(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function bi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CS(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var we=class n{constructor(e,t){this.comparator=e,this.root=t||cn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _o(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _o(this.root,e,this.comparator,!1)}getReverseIterator(){return new _o(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _o(this.root,e,this.comparator,!0)}},_o=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},cn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw z(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw z(27949);return e+(this.isRed()?0:1)}};cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw z(57766)}get value(){throw z(16141)}get color(){throw z(16727)}get left(){throw z(29726)}get right(){throw z(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new cn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var je=class n{constructor(e){this.comparator=e,this.data=new we(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new zl(this.data.getIterator())}getIteratorFrom(e){return new zl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},zl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var an=class n{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new n([])}unionWith(e){let t=new je(wt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return To(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var ql=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ke=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ql("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ke.EMPTY_BYTE_STRING=new Ke("");var g2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nn(n){if(de(!!n,39018),typeof n=="string"){let e=0,t=g2.exec(n);if(de(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_e(n.seconds),nanos:_e(n.nanos)}}function _e(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Rn(n){return typeof n=="string"?Ke.fromBase64String(n):Ke.fromUint8Array(n)}var SS="server_timestamp",AS="__type__",MS="__previous_value__",NS="__local_write_time__";function jv(n){return(n?.mapValue?.fields||{})[AS]?.stringValue===SS}function Dd(n){let e=n.mapValue.fields[MS];return jv(e)?Dd(e):e}function Ra(n){let e=Nn(n.mapValue.fields[NS].timestampValue);return new Pe(e.seconds,e.nanos)}var sy=class{constructor(e,t,r,i,o,s,c,u,l,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=f}},Wl="(default)",Kl=class n{constructor(e,t){this.projectId=e,this.database=t||Wl}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Wl}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Bv="__type__",RS="__max__",Fl={mapValue:{fields:{__type__:{stringValue:RS}}}},Uv="__vector__",bo="value";function Er(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jv(n)?4:OS(n)?9007199254740991:PS(n)?10:11:z(28295,{value:n})}function dn(n,e){if(n===e)return!0;let t=Er(n);if(t!==Er(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ra(n).isEqual(Ra(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Nn(i.timestampValue),c=Nn(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return Rn(i.bytesValue).isEqual(Rn(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return _e(i.geoPointValue.latitude)===_e(o.geoPointValue.latitude)&&_e(i.geoPointValue.longitude)===_e(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return _e(i.integerValue)===_e(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=_e(i.doubleValue),c=_e(o.doubleValue);return s===c?Na(s)===Na(c):isNaN(s)&&isNaN(c)}return!1})(n,e);case 9:return To(n.arrayValue.values||[],e.arrayValue.values||[],dn);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(b0(s)!==b0(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!dn(s[u],c[u])))return!1;return!0})(n,e);default:return z(52216,{left:n})}}function Pa(n,e){return(n.values||[]).find(t=>dn(t,e))!==void 0}function Co(n,e){if(n===e)return 0;let t=Er(n),r=Er(e);if(t!==r)return ne(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ne(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let c=_e(o.integerValue||o.doubleValue),u=_e(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(n,e);case 3:return C0(n.timestampValue,e.timestampValue);case 4:return C0(Ra(n),Ra(e));case 5:return ry(n.stringValue,e.stringValue);case 6:return(function(o,s){let c=Rn(o),u=Rn(s);return c.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let f=ne(c[l],u[l]);if(f!==0)return f}return ne(c.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let c=ne(_e(o.latitude),_e(s.latitude));return c!==0?c:ne(_e(o.longitude),_e(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return S0(n.arrayValue,e.arrayValue);case 10:return(function(o,s){let c=o.fields||{},u=s.fields||{},l=c[bo]?.arrayValue,f=u[bo]?.arrayValue,p=ne(l?.values?.length||0,f?.values?.length||0);return p!==0?p:S0(l,f)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Fl.mapValue&&s===Fl.mapValue)return 0;if(o===Fl.mapValue)return 1;if(s===Fl.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let m=ry(u[p],f[p]);if(m!==0)return m;let y=Co(c[u[p]],l[f[p]]);if(y!==0)return y}return ne(u.length,f.length)})(n.mapValue,e.mapValue);default:throw z(23264,{he:t})}}function C0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ne(n,e);let t=Nn(n),r=Nn(e),i=ne(t.seconds,r.seconds);return i!==0?i:ne(t.nanos,r.nanos)}function S0(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Co(t[i],r[i]);if(o)return o}return ne(t.length,r.length)}function So(n){return ay(n)}function ay(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Nn(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Rn(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return H.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=ay(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${ay(t.fields[s])}`;return i+"}"})(n.mapValue):z(61005,{value:n})}function jl(n){switch(Er(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Dd(n);return e?16+jl(e):16;case 5:return 2*n.stringValue.length;case 6:return Rn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+jl(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return bi(r.fields,(o,s)=>{i+=o.length+jl(s)}),i})(n.mapValue);default:throw z(13486,{value:n})}}function A0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function cy(n){return!!n&&"integerValue"in n}function Hv(n){return!!n&&"arrayValue"in n}function M0(n){return!!n&&"nullValue"in n}function N0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Bl(n){return!!n&&"mapValue"in n}function PS(n){return(n?.mapValue?.fields||{})[Bv]?.stringValue===Uv}function Ta(n){if(n.geoPointValue)return{geoPointValue:V({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:V({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return bi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ta(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ta(n.arrayValue.values[t]);return e}return V({},n)}function OS(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===RS}var oQ={mapValue:{fields:{[Bv]:{stringValue:Uv},[bo]:{arrayValue:{}}}}};var Ht=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Bl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ta(t)}setAll(e){let t=wt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!t.isImmediateParentOf(c)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=c.popLast()}s?r[c.lastSegment()]=Ta(s):i.push(c.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Bl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return dn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Bl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){bi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Ta(this.value))}};function xS(n){let e=[];return bi(n.fields,(t,r)=>{let i=new wt([t]);if(Bl(r)){let o=xS(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new an(e)}var $t=class n{constructor(e,t,r,i,o,s,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new n(e,0,Y.min(),Y.min(),Y.min(),Ht.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Y.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Y.min(),Y.min(),Ht.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Y.min(),Y.min(),Ht.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ao=class{constructor(e,t){this.position=e,this.inclusive=t}};function R0(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=H.comparator(H.fromName(s.referenceValue),t.key):r=Co(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function P0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!dn(n.position[t],e.position[t]))return!1;return!0}var _i=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function m2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ql=class{},Ne=class n extends Ql{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new ly(e,t,r):t==="array-contains"?new hy(e,r):t==="in"?new py(e,r):t==="not-in"?new gy(e,r):t==="array-contains-any"?new my(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new dy(e,r):new fy(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Co(t,this.value)):t!==null&&Er(this.value)===Er(t)&&this.matchesComparison(Co(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Gt=class n extends Ql{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n(e,t)}matches(e){return kS(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function kS(n){return n.op==="and"}function FS(n){return y2(n)&&kS(n)}function y2(n){for(let e of n.filters)if(e instanceof Gt)return!1;return!0}function uy(n){if(n instanceof Ne)return n.field.canonicalString()+n.op.toString()+So(n.value);if(FS(n))return n.filters.map(e=>uy(e)).join(",");{let e=n.filters.map(t=>uy(t)).join(",");return`${n.op}(${e})`}}function LS(n,e){return n instanceof Ne?(function(r,i){return i instanceof Ne&&r.op===i.op&&r.field.isEqual(i.field)&&dn(r.value,i.value)})(n,e):n instanceof Gt?(function(r,i){return i instanceof Gt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&LS(s,i.filters[c]),!0):!1})(n,e):void z(19439)}function VS(n){return n instanceof Ne?(function(t){return`${t.field.canonicalString()} ${t.op} ${So(t.value)}`})(n):n instanceof Gt?(function(t){return t.op.toString()+" {"+t.getFilters().map(VS).join(" ,")+"}"})(n):"Filter"}var ly=class extends Ne{constructor(e,t,r){super(e,t,r),this.key=H.fromName(r.referenceValue)}matches(e){let t=H.comparator(e.key,this.key);return this.matchesComparison(t)}},dy=class extends Ne{constructor(e,t){super(e,"in",t),this.keys=jS("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},fy=class extends Ne{constructor(e,t){super(e,"not-in",t),this.keys=jS("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function jS(n,e){return(e.arrayValue?.values||[]).map(t=>H.fromName(t.referenceValue))}var hy=class extends Ne{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Hv(t)&&Pa(t.arrayValue,this.value)}},py=class extends Ne{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Pa(this.value.arrayValue,t)}},gy=class extends Ne{constructor(e,t){super(e,"not-in",t)}matches(e){if(Pa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Pa(this.value.arrayValue,t)}},my=class extends Ne{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Hv(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Pa(this.value.arrayValue,r))}};var yy=class{constructor(e,t=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Te=null}};function O0(n,e=null,t=[],r=[],i=null,o=null,s=null){return new yy(n,e,t,r,i,o,s)}function $v(n){let e=Q(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>uy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),wd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>So(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>So(r)).join(",")),e.Te=t}return e.Te}function Gv(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!m2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!LS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!P0(n.startAt,e.startAt)&&P0(n.endAt,e.endAt)}function vy(n){return H.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ir=class{constructor(e,t=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function v2(n,e,t,r,i,o,s,c){return new Ir(n,e,t,r,i,o,s,c)}function zv(n){return new Ir(n)}function x0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function BS(n){return n.collectionGroup!==null}function ba(n){let e=Q(n);if(e.Ie===null){e.Ie=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new je(wt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new _i(o,r))}),t.has(wt.keyField().canonicalString())||e.Ie.push(new _i(wt.keyField(),r))}return e.Ie}function un(n){let e=Q(n);return e.Ee||(e.Ee=_2(e,ba(n))),e.Ee}function _2(n,e){if(n.limitType==="F")return O0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new _i(i.field,o)});let t=n.endAt?new Ao(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ao(n.startAt.position,n.startAt.inclusive):null;return O0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function _y(n,e){let t=n.filters.concat([e]);return new Ir(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ey(n,e,t){return new Ir(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Td(n,e){return Gv(un(n),un(e))&&n.limitType===e.limitType}function US(n){return`${$v(un(n))}|lt:${n.limitType}`}function mo(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>VS(i)).join(", ")}]`),wd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>So(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>So(i)).join(",")),`Target(${r})`})(un(n))}; limitType=${n.limitType})`}function bd(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):H.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of ba(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,c,u){let l=R0(s,c,u);return s.inclusive?l<=0:l<0})(r.startAt,ba(r),i)||r.endAt&&!(function(s,c,u){let l=R0(s,c,u);return s.inclusive?l>=0:l>0})(r.endAt,ba(r),i))})(n,e)}function E2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function HS(n){return(e,t)=>{let r=!1;for(let i of ba(n)){let o=I2(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function I2(n,e,t){let r=n.field.isKeyField()?H.comparator(e.key,t.key):(function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?Co(u,l):z(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z(19790,{direction:n.dir})}}var Pn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){bi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return CS(this.inner)}size(){return this.innerSize}};var w2=new we(H.comparator);function On(){return w2}var $S=new we(H.comparator);function wa(...n){let e=$S;for(let t of n)e=e.insert(t.key,t);return e}function GS(n){let e=$S;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function fi(){return Ca()}function zS(){return Ca()}function Ca(){return new Pn(n=>n.toString(),(n,e)=>n.isEqual(e))}var D2=new we(H.comparator),T2=new je(H.comparator);function re(...n){let e=T2;for(let t of n)e=e.add(t);return e}var b2=new je(ne);function C2(){return b2}function qv(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Na(e)?"-0":e}}function qS(n){return{integerValue:""+n}}function S2(n,e){return n2(e)?qS(e):qv(n,e)}var Mo=class{constructor(){this._=void 0}};function A2(n,e,t){return n instanceof No?(function(i,o){let s={fields:{[AS]:{stringValue:SS},[NS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&jv(o)&&(o=Dd(o)),o&&(s.fields[MS]=o),{mapValue:s}})(t,e):n instanceof Ei?KS(n,e):n instanceof Ii?QS(n,e):(function(i,o){let s=WS(i,o),c=k0(s)+k0(i.Ae);return cy(s)&&cy(i.Ae)?qS(c):qv(i.serializer,c)})(n,e)}function M2(n,e,t){return n instanceof Ei?KS(n,e):n instanceof Ii?QS(n,e):t}function WS(n,e){return n instanceof Ro?(function(r){return cy(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var No=class extends Mo{},Ei=class extends Mo{constructor(e){super(),this.elements=e}};function KS(n,e){let t=YS(e);for(let r of n.elements)t.some(i=>dn(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ii=class extends Mo{constructor(e){super(),this.elements=e}};function QS(n,e){let t=YS(e);for(let r of n.elements)t=t.filter(i=>!dn(i,r));return{arrayValue:{values:t}}}var Ro=class extends Mo{constructor(e,t){super(),this.serializer=e,this.Ae=t}};function k0(n){return _e(n.integerValue||n.doubleValue)}function YS(n){return Hv(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function N2(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Ei&&i instanceof Ei||r instanceof Ii&&i instanceof Ii?To(r.elements,i.elements,dn):r instanceof Ro&&i instanceof Ro?dn(r.Ae,i.Ae):r instanceof No&&i instanceof No})(n.transform,e.transform)}var Iy=class{constructor(e,t){this.version=e,this.transformResults=t}},gi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ul(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Po=class{};function JS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Yl(n.key,gi.none()):new wi(n.key,n.data,gi.none());{let t=n.data,r=Ht.empty(),i=new je(wt.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new xn(n.key,r,new an(i.toArray()),gi.none())}}function R2(n,e,t){n instanceof wi?(function(i,o,s){let c=i.value.clone(),u=L0(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(n,e,t):n instanceof xn?(function(i,o,s){if(!Ul(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=L0(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(ZS(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function Sa(n,e,t,r){return n instanceof wi?(function(o,s,c,u){if(!Ul(o.precondition,s))return c;let l=o.value.clone(),f=V0(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof xn?(function(o,s,c,u){if(!Ul(o.precondition,s))return c;let l=V0(o.fieldTransforms,u,s),f=s.data;return f.setAll(ZS(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,c){return Ul(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(n,e,t)}function P2(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=WS(r.transform,i||null);o!=null&&(t===null&&(t=Ht.empty()),t.set(r.field,o))}return t||null}function F0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&To(r,i,(o,s)=>N2(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var wi=class extends Po{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},xn=class extends Po{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function ZS(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function L0(n,e,t){let r=new Map;de(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,M2(s,c,t[i]))}return r}function V0(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,A2(o,s,e))}return r}var Yl=class extends Po{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},wy=class extends Po{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Dy=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&R2(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Sa(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Sa(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=zS();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=t.has(i.key)?null:c;let u=JS(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),re())}isEqual(e){return this.batchId===e.batchId&&To(this.mutations,e.mutations,(t,r)=>F0(t,r))&&To(this.baseMutations,e.baseMutations,(t,r)=>F0(t,r))}},Ty=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){de(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return D2})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var by=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Cy=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ae,oe;function O2(n){switch(n){case A.OK:return z(64938);case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return!1;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return!0;default:return z(15467,{code:n})}}function XS(n){if(n===void 0)return Mn("GRPC error has no .code"),A.UNKNOWN;switch(n){case Ae.OK:return A.OK;case Ae.CANCELLED:return A.CANCELLED;case Ae.UNKNOWN:return A.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return A.INTERNAL;case Ae.UNAVAILABLE:return A.UNAVAILABLE;case Ae.UNAUTHENTICATED:return A.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case Ae.NOT_FOUND:return A.NOT_FOUND;case Ae.ALREADY_EXISTS:return A.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return A.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case Ae.ABORTED:return A.ABORTED;case Ae.OUT_OF_RANGE:return A.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return A.UNIMPLEMENTED;case Ae.DATA_LOSS:return A.DATA_LOSS;default:return z(39323,{code:n})}}(oe=Ae||(Ae={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";var x2=null;function k2(){return new TextEncoder}var F2=new Cn([4294967295,4294967295],0);function j0(n){let e=k2().encode(n),t=new Bm;return t.update(e),new Uint8Array(t.digest())}function B0(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Cn([t,r],0),new Cn([i,o],0)]}var Sy=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new hi(`Invalid padding: ${t}`);if(r<0)throw new hi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new hi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new hi(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Cn.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Cn.fromNumber(r)));return i.compare(F2)===1&&(i=new Cn([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let t=j0(e),[r,i]=B0(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.ge===0)return;let t=j0(e),[r,i]=B0(t);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},hi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Jl=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Oa.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Y.min(),i,new we(ne),On(),re())}},Oa=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,re(),re(),re())}};var Eo=class{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}},Zl=class{constructor(e,t){this.targetId=e,this.Ce=t}},Xl=class{constructor(e,t,r=Ke.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},ed=class{constructor(){this.ve=0,this.Fe=U0(),this.Me=Ke.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=re(),t=re(),r=re();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z(38017,{changeType:o})}}),new Oa(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=U0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,de(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},Ay=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=On(),this.Je=Ll(),this.He=Ll(),this.Ye=new we(ne)}Ze(e){for(let t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:z(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((r,i)=>{this.rt(i)&&t(i)})}st(e){let t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){let o=i.target;if(vy(o))if(r===0){let s=new H(o.path);this.et(t,s,$t.newNoDocument(s,Y.min()))}else de(r===1,20013,{expectedCount:r});else{let s=this._t(t);if(s!==r){let c=this.ut(e),u=c?this.ct(c,e,s):1;if(u!==0){this.it(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,l)}x2?.lt((function(f,p,m,y,S){let R={localCacheCount:f,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},M=p.unchangedNames;return M&&(R.bloomFilter={applied:S===0,hashCount:M?.hashCount??0,bitmapLength:M?.bits?.bitmap?.length??0,padding:M?.bits?.padding??0,mightContain:j=>y?.mightContain(j)??!1}),R})(s,e.Ce,this.Ge.ht(),c,u))}}}}ut(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,c;try{s=Rn(r).toUint8Array()}catch(u){if(u instanceof ql)return Do("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Sy(s,i,o)}catch(u){return Do(u instanceof hi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Ge.ht(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(t,o,null),i++)}),i}Tt(e){let t=new Map;this.ze.forEach((o,s)=>{let c=this.ot(s);if(c){if(o.current&&vy(c.target)){let u=new H(c.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,$t.newNoDocument(u,e))}o.Be&&(t.set(s,o.ke()),o.qe())}});let r=re();this.He.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Jl(e,t,this.Ye,this.je,r);return this.je=On(),this.Je=Ll(),this.He=Ll(),this.Ye=new we(ne),i}Xe(e,t){if(!this.rt(e))return;let r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ed,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new je(ne),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new je(ne),this.Je=this.Je.insert(e,t)),t}rt(e){let t=this.ot(e)!==null;return t||F("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ed),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}};function Ll(){return new we(H.comparator)}function U0(){return new we(H.comparator)}var L2={asc:"ASCENDING",desc:"DESCENDING"},V2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},j2={and:"AND",or:"OR"},My=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Ny(n,e){return n.useProto3Json||wd(e)?e:{value:e}}function td(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function B2(n,e){return td(n,e.toTimestamp())}function ln(n){return de(!!n,49232),Y.fromTimestamp((function(t){let r=Nn(t);return new Pe(r.seconds,r.nanos)})(n))}function Wv(n,e){return Ry(n,e).canonicalString()}function Ry(n,e){let t=(function(i){return new Ee(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function tA(n){let e=Ee.fromString(n);return de(sA(e),10190,{key:e.toString()}),e}function Py(n,e){return Wv(n.databaseId,e.path)}function Wm(n,e){let t=tA(e);if(t.get(1)!==n.databaseId.projectId)throw new x(A.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new x(A.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new H(rA(t))}function nA(n,e){return Wv(n.databaseId,e)}function U2(n){let e=tA(n);return e.length===4?Ee.emptyPath():rA(e)}function Oy(n){return new Ee(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function rA(n){return de(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function H0(n,e,t){return{name:Py(n,e),fields:t.value.mapValue.fields}}function H2(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,f){return l.useProto3Json?(de(f===void 0||typeof f=="string",58123),Ke.fromBase64String(f||"")):(de(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Ke.fromUint8Array(f||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(l){let f=l.code===void 0?A.UNKNOWN:XS(l.code);return new x(f,l.message||"")})(s);t=new Xl(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Wm(n,r.document.name),o=ln(r.document.updateTime),s=r.document.createTime?ln(r.document.createTime):Y.min(),c=new Ht({mapValue:{fields:r.document.fields}}),u=$t.newFoundDocument(i,o,s,c),l=r.targetIds||[],f=r.removedTargetIds||[];t=new Eo(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Wm(n,r.document),o=r.readTime?ln(r.readTime):Y.min(),s=$t.newNoDocument(i,o),c=r.removedTargetIds||[];t=new Eo([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Wm(n,r.document),o=r.removedTargetIds||[];t=new Eo([],o,i,null)}else{if(!("filter"in e))return z(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Cy(i,o),c=r.targetId;t=new Zl(c,s)}}return t}function $2(n,e){let t;if(e instanceof wi)t={update:H0(n,e.key,e.value)};else if(e instanceof Yl)t={delete:Py(n,e.key)};else if(e instanceof xn)t={update:H0(n,e.key,e.data),updateMask:Z2(e.fieldMask)};else{if(!(e instanceof wy))return z(16599,{Vt:e.type});t={verify:Py(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let c=s.transform;if(c instanceof No)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ei)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Ii)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ro)return{fieldPath:s.field.canonicalString(),increment:c.Ae};throw z(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:B2(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z(27497)})(n,e.precondition)),t}function G2(n,e){return n&&n.length>0?(de(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?ln(i.updateTime):ln(o);return s.isEqual(Y.min())&&(s=ln(o)),new Iy(s,i.transformResults||[])})(t,e))):[]}function z2(n,e){return{documents:[nA(n,e.path)]}}function q2(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=nA(n,i);let o=(function(l){if(l.length!==0)return oA(Gt.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(f=>(function(m){return{field:yo(m.field),direction:Q2(m.dir)}})(f))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let c=Ny(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:t,parent:i}}function W2(n){let e=U2(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){de(r===1,65062);let f=t.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];t.where&&(o=(function(p){let m=iA(p);return m instanceof Gt&&FS(m)?m.getFilters():[m]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(m=>(function(S){return new _i(vo(S.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(m))})(t.orderBy));let c=null;t.limit&&(c=(function(p){let m;return m=typeof p=="object"?p.value:p,wd(m)?null:m})(t.limit));let u=null;t.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new Ao(y,m)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new Ao(y,m)})(t.endAt)),v2(e,i,s,o,c,"F",u,l)}function K2(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function iA(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=vo(t.unaryFilter.field);return Ne.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=vo(t.unaryFilter.field);return Ne.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=vo(t.unaryFilter.field);return Ne.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=vo(t.unaryFilter.field);return Ne.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return z(61313);default:return z(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ne.create(vo(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return z(58110);default:return z(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Gt.create(t.compositeFilter.filters.map(r=>iA(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z(1026)}})(t.compositeFilter.op))})(n):z(30097,{filter:n})}function Q2(n){return L2[n]}function Y2(n){return V2[n]}function J2(n){return j2[n]}function yo(n){return{fieldPath:n.canonicalString()}}function vo(n){return wt.fromServerFormat(n.fieldPath)}function oA(n){return n instanceof Ne?(function(t){if(t.op==="=="){if(N0(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NAN"}};if(M0(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(N0(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NAN"}};if(M0(t.value))return{unaryFilter:{field:yo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yo(t.field),op:Y2(t.op),value:t.value}}})(n):n instanceof Gt?(function(t){let r=t.getFilters().map(i=>oA(i));return r.length===1?r[0]:{compositeFilter:{op:J2(t.op),filters:r}}})(n):z(54877,{filter:n})}function Z2(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function sA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var xa=class n{constructor(e,t,r,i,o=Y.min(),s=Y.min(),c=Ke.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var xy=class{constructor(e){this.yt=e}};function X2(n){let e=W2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ey(e,e.limit,"L"):e}var nd=class{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(_e(e.integerValue));else if("doubleValue"in e){let r=_e(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),Na(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Nn(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Rn(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?OS(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):PS(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):z(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){let r=e.fields||{};this.Ft(t,55);for(let i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let i=bo,o=r[i].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(_e(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){let r=e.values||[];this.Ft(t,50);for(let i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),H.fromName(e).path.forEach(r=>{this.Ft(t,60),this.Ut(r,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}};nd.Kt=new nd;var ky=class{constructor(){this.Cn=new Fy}addToCollectionParentIndex(e,t){return this.Cn.add(t),N.resolve()}getCollectionParents(e,t){return N.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return N.resolve()}deleteFieldIndex(e,t){return N.resolve()}deleteAllFieldIndexes(e){return N.resolve()}createTargetIndexes(e,t){return N.resolve()}getDocumentsMatchingTarget(e,t){return N.resolve(null)}getIndexType(e,t){return N.resolve(0)}getFieldIndexes(e,t){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,t){return N.resolve(vi.min())}getMinOffsetFromCollectionGroup(e,t){return N.resolve(vi.min())}updateCollectionGroup(e,t,r){return N.resolve()}updateIndexEntries(e,t){return N.resolve()}},Fy=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new je(Ee.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new je(Ee.comparator)).toArray()}};var sQ=new Uint8Array(0);var $0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},aA=41943040,Pt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Pt.DEFAULT_COLLECTION_PERCENTILE=10,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pt.DEFAULT=new Pt(aA,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pt.DISABLED=new Pt(-1,0,0);var ka=class n{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new n(0)}static cr(){return new n(-1)}};var G0="LruGarbageCollector",ej=1048576;function z0([n,e],[t,r]){let i=ne(n,t);return i===0?ne(e,r):i}var Ly=class{constructor(e){this.Ir=e,this.buffer=new je(z0),this.Er=0}dr(){return++this.Er}Ar(e){let t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();z0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Vy=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){F(G0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Vo(t)?F(G0,"Ignoring IndexedDB error during garbage collection: ",t):await Lo(t)}await this.Vr(3e5)})}},jy=class{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return N.resolve(Lv.ce);let r=new Ly(t);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(F("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve($0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(F("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$0):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,o,s,c,u,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(F("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),go()<=te.DEBUG&&F("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-f}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function tj(n,e){return new jy(n,e)}var By=class{constructor(){this.changes=new Pn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?N.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Uy=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Hy=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Sa(r.mutation,i,an.empty(),Pe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,t,r=re()){let i=fi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=wa();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=fi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,re()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{t.set(s,c)})})}computeViews(e,t,r,i){let o=On(),s=Ca(),c=(function(){return Ca()})();return t.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof xn)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),Sa(f.mutation,l,f.mutation.getFieldMask(),Pe.now())):s.set(l.key,an.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),t.forEach((l,f)=>c.set(l,new Uy(f,s.get(l)??null))),c))}recalculateAndSaveOverlays(e,t){let r=Ca(),i=new we((s,c)=>s-c),o=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let f=r.get(u)||an.empty();f=c.applyToLocalView(l,f),r.set(u,f);let p=(i.get(c.batchId)||re()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,f=u.value,p=zS();f.forEach(m=>{if(!o.has(m)){let y=JS(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return N.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return H.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):BS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):N.resolve(fi()),c=Ma,u=o;return s.next(l=>N.forEach(l,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(f)?N.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,re())).next(f=>({batchId:c,changes:GS(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new H(t)).next(r=>{let i=wa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=wa();return this.indexManager.getCollectionParents(e,o).next(c=>N.forEach(c,u=>{let l=(function(p,m){return new Ir(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,$t.newInvalidDocument(f)))});let c=wa();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&Sa(f.mutation,l,an.empty(),Pe.now()),bd(t,l)&&(c=c.insert(u,l))}),c})}};var $y=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return N.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:ln(i.createTime)}})(t)),N.resolve()}getNamedQuery(e,t){return N.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:X2(i.bundledQuery),readTime:ln(i.readTime)}})(t)),N.resolve()}};var Gy=class{constructor(){this.overlays=new we(H.comparator),this.qr=new Map}getOverlay(e,t){return N.resolve(this.overlays.get(t))}getOverlays(e,t){let r=fi();return N.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),N.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),N.resolve()}getOverlaysForCollection(e,t,r){let i=fi(),o=t.length+1,s=new H(t.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return N.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new we((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=fi(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let c=fi(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>c.set(l,f)),!(c.size()>=i)););return N.resolve(c)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new by(t,r));let o=this.qr.get(t);o===void 0&&(o=re(),this.qr.set(t,o)),this.qr.set(t,o.add(r.key))}};var zy=class{constructor(){this.sessionToken=Ke.EMPTY_BYTE_STRING}getSessionToken(e){return N.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,N.resolve()}};var Fa=class{constructor(){this.Qr=new je(Me.$r),this.Ur=new je(Me.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){let r=new Me(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Gr(new Me(e,t))}zr(e,t){e.forEach(r=>this.removeReference(r,t))}jr(e){let t=new H(new Ee([])),r=new Me(t,e),i=new Me(t,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let t=new H(new Ee([])),r=new Me(t,e),i=new Me(t,e+1),o=re();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Me(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Me=class{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return H.comparator(e.key,t.key)||ne(e.Yr,t.Yr)}static Kr(e,t){return ne(e.Yr,t.Yr)||H.comparator(e.key,t.key)}};var qy=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new je(Me.$r)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Dy(o,t,r,i);this.mutationQueue.push(s);for(let c of i)this.Zr=this.Zr.add(new Me(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return N.resolve(s)}lookupMutationBatch(e,t){return N.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.ei(r),o=i<0?0:i;return N.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?Vv:this.tr-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Me(t,0),i=new Me(t,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let c=this.Xr(s.Yr);o.push(c)}),N.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new je(ne);return t.forEach(i=>{let o=new Me(i,0),s=new Me(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],c=>{r=r.add(c.Yr)})}),N.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;H.isDocumentKey(o)||(o=o.child(""));let s=new Me(new H(o),0),c=new je(ne);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Yr)),!0)},s),N.resolve(this.ti(c))}ti(e){let t=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){de(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return N.forEach(t.mutations,i=>{let o=new Me(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,t){let r=new Me(t,0),i=this.Zr.firstAfterOrEqual(r);return N.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Wy=class{constructor(e){this.ri=e,this.docs=(function(){return new we(H.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return N.resolve(r?r.document.mutableCopy():$t.newInvalidDocument(t))}getEntries(e,t){let r=On();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():$t.newInvalidDocument(i))}),N.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=On(),s=t.path,c=new H(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||XV(ZV(f),r)<=0||(i.has(f.key)||bd(t,f))&&(o=o.insert(f.key,f.mutableCopy()))}return N.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z(9500)}ii(e,t){return N.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Ky(this)}getSize(e){return N.resolve(this.size)}},Ky=class extends By{constructor(e){super(),this.Nr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),N.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}};var Qy=class{constructor(e){this.persistence=e,this.si=new Pn(t=>$v(t),Gv),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.oi=0,this._i=new Fa,this.targetCount=0,this.ai=ka.ur()}forEachTarget(e,t){return this.si.forEach((r,i)=>t(i)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),N.resolve()}Pr(e){this.si.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ai=new ka(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,N.resolve()}updateTargetData(e,t){return this.Pr(t),N.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.si.forEach((s,c)=>{c.sequenceNumber<=t&&r.get(c.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),N.waitFor(o).next(()=>i)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,t){let r=this.si.get(t)||null;return N.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),N.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),N.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),N.resolve()}getMatchingKeysForTargetId(e,t){let r=this._i.Hr(t);return N.resolve(r)}containsKey(e,t){return N.resolve(this._i.containsKey(t))}};var rd=class{constructor(e,t){this.ui={},this.overlays={},this.ci=new Lv(0),this.li=!1,this.li=!0,this.hi=new zy,this.referenceDelegate=e(this),this.Pi=new Qy(this),this.indexManager=new ky,this.remoteDocumentCache=(function(i){return new Wy(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new xy(t),this.Ii=new $y(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Gy,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new qy(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){F("MemoryPersistence","Starting transaction:",e);let i=new Yy(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,t){return N.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,t)))}},Yy=class extends oy{constructor(e){super(),this.currentSequenceNumber=e}},Jy=class n{constructor(e){this.persistence=e,this.Ri=new Fa,this.Vi=null}static mi(e){return new n(e)}get fi(){if(this.Vi)return this.Vi;throw z(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),N.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),N.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.fi,r=>{let i=H.fromPath(r);return this.gi(e,i).next(o=>{o||t.removeEntry(i,Y.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return N.or([()=>N.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}},id=class n{constructor(e,t){this.persistence=e,this.pi=new Pn(r=>r2(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=tj(this,t)}static mi(e,t){return new n(e,t)}Ei(){}di(e){return N.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){let t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}wr(e){let t=0;return this.pr(e,r=>{t++}).next(()=>t)}pr(e,t){return N.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?N.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,t).next(c=>{c||(r++,o.removeEntry(s,Y.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),N.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),N.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),N.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),N.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=jl(e.data.value)),t}br(e,t,r){return N.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.pi.get(t);return N.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Zy=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=re(),i=re();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Xy=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ev=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return JC()?8:t2(Le())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ys(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new Xy;return this.Ss(e,t,s).next(c=>{if(o.result=c,this.Vs)return this.bs(e,t,s,c.size)})}).next(()=>o.result)}bs(e,t,r,i){return r.documentReadCount<this.fs?(go()<=te.DEBUG&&F("QueryEngine","SDK will not create cache indexes for query:",mo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),N.resolve()):(go()<=te.DEBUG&&F("QueryEngine","Query:",mo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(go()<=te.DEBUG&&F("QueryEngine","The SDK decides to create cache indexes for query:",mo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,un(t))):N.resolve())}ys(e,t){if(x0(t))return N.resolve(null);let r=un(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Ey(t,null,"F"),r=un(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=re(...o);return this.ps.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(t,c);return this.Cs(t,l,s,u.readTime)?this.ys(e,Ey(t,null,"F")):this.vs(e,l,t,u)}))})))}ws(e,t,r,i){return x0(t)||i.isEqual(Y.min())?N.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(t,o);return this.Cs(t,s,r,i)?N.resolve(null):(go()<=te.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),mo(t)),this.vs(e,s,t,JV(i,Ma)).next(c=>c))})}Ds(e,t){let r=new je(HS(e));return t.forEach((i,o)=>{bd(e,o)&&(r=r.add(o))}),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,t,r){return go()<=te.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",mo(t)),this.ps.getDocumentsMatchingQuery(e,t,vi.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var Kv="LocalStore",nj=3e8,tv=class{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new we(ne),this.xs=new Pn(o=>$v(o),Gv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hy(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}};function rj(n,e,t,r){return new tv(n,e,t,r)}async function cA(n,e){let t=Q(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Bs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=re();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){c.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:c}))})})}function ij(n,e){let t=Q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,l,f){let p=l.batch,m=p.keys(),y=N.resolve();return m.forEach(S=>{y=y.next(()=>f.getEntry(u,S)).next(R=>{let M=l.docVersions.get(S);de(M!==null,48541),R.version.compareTo(M)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),f.addEntry(R)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=re();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function uA(n){let e=Q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Pi.getLastRemoteSnapshotVersion(t))}function oj(n,e){let t=Q(n),r=e.snapshotVersion,i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;let c=[];e.targetChanges.forEach((f,p)=>{let m=i.get(p);if(!m)return;c.push(t.Pi.removeMatchingKeys(o,f.removedDocuments,p).next(()=>t.Pi.addMatchingKeys(o,f.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Ke.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),(function(R,M,j){return R.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=nj?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(m,y,f)&&c.push(t.Pi.updateTargetData(o,y))});let u=On(),l=re();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(sj(o,s,e.documentUpdates).next(f=>{u=f.ks,l=f.qs})),!r.isEqual(Y.min())){let f=t.Pi.getLastRemoteSnapshotVersion(o).next(p=>t.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(f)}return N.waitFor(c).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Ms=i,o))}function sj(n,e,t){let r=re(),i=re();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=On();return t.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):F(Kv,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{ks:s,qs:i}})}function aj(n,e){let t=Q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Vv),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function cj(n,e){let t=Q(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Pi.getTargetData(r,e).next(o=>o?(i=o,N.resolve(i)):t.Pi.allocateTargetId(r).next(s=>(i=new xa(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r})}async function nv(n,e,t){let r=Q(n),i=r.Ms.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Vo(s))throw s;F(Kv,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function q0(n,e,t){let r=Q(n),i=Y.min(),o=re();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,f){let p=Q(u),m=p.xs.get(f);return m!==void 0?N.resolve(p.Ms.get(m)):p.Pi.getTargetData(l,f)})(r,s,un(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,t?i:Y.min(),t?o:re())).next(c=>(uj(r,E2(e),c),{documents:c,Qs:o})))}function uj(n,e,t){let r=n.Os.get(e)||Y.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.Os.set(e,r)}var od=class{constructor(){this.activeTargetIds=C2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var rv=class{constructor(){this.Mo=new od,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new od,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var iv=class{Oo(e){}shutdown(){}};var W0="ConnectivityMonitor",sd=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){F(W0,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){F(W0,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Vl=null;function ov(){return Vl===null?Vl=(function(){return 268435456+Math.round(2147483648*Math.random())})():Vl++,"0x"+Vl.toString(16)}var Km="RestConnection",lj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},sv=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Wl?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,o){let s=ov(),c=this.zo(e,t.toUriEncodedString());F(Km,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:l}=new URL(c),f=dr(l);return this.Jo(e,c,u,r,f).then(p=>(F(Km,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Do(Km,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}Ho(e,t,r,i,o,s){return this.Go(e,t,r,i,o)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Fo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,t){let r=lj[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}};var av=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var qe="WebChannelConnection",cv=class extends sv{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,o){let s=ov();return new Promise((c,u)=>{let l=new Um;l.setWithCredentials(!0),l.listenOnce(Hm.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ia.NO_ERROR:let p=l.getResponseJson();F(qe,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case Ia.TIMEOUT:F(qe,`RPC '${e}' ${s} timed out`),u(new x(A.DEADLINE_EXCEEDED,"Request time out"));break;case Ia.HTTP_ERROR:let m=l.getStatus();if(F(qe,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let R=(function(j){let ie=j.toLowerCase().replace(/_/g,"-");return Object.values(A).indexOf(ie)>=0?ie:A.UNKNOWN})(S.status);u(new x(R,S.message))}else u(new x(A.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new x(A.UNAVAILABLE,"Connection failed."));break;default:z(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{F(qe,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);F(qe,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",f,r,15)})}T_(e,t,r){let i=ov(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=zm(),c=Gm(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let f=o.join("");F(qe,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=s.createWebChannel(f,u);this.I_(p);let m=!1,y=!1,S=new av({Yo:M=>{y?F(qe,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(F(qe,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),F(qe,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},Zo:()=>p.close()}),R=(M,j,ie)=>{M.listen(j,ae=>{try{ie(ae)}catch(Oe){setTimeout(()=>{throw Oe},0)}})};return R(p,po.EventType.OPEN,()=>{y||(F(qe,`RPC '${e}' stream ${i} transport opened.`),S.o_())}),R(p,po.EventType.CLOSE,()=>{y||(y=!0,F(qe,`RPC '${e}' stream ${i} transport closed`),S.a_(),this.E_(p))}),R(p,po.EventType.ERROR,M=>{y||(y=!0,Do(qe,`RPC '${e}' stream ${i} transport errored. Name:`,M.name,"Message:",M.message),S.a_(new x(A.UNAVAILABLE,"The operation could not be completed")))}),R(p,po.EventType.MESSAGE,M=>{if(!y){let j=M.data[0];de(!!j,16349);let ie=j,ae=ie?.error||ie[0]?.error;if(ae){F(qe,`RPC '${e}' stream ${i} received error:`,ae);let Oe=ae.status,Ue=(function(v){let E=Ae[v];if(E!==void 0)return XS(E)})(Oe),ke=ae.message;Ue===void 0&&(Ue=A.INTERNAL,ke="Unknown error status: "+Oe+" with message "+ae.message),y=!0,S.a_(new x(Ue,ke)),p.close()}else F(qe,`RPC '${e}' stream ${i} received:`,j),S.u_(j)}}),R(c,$m.STAT_EVENT,M=>{M.stat===kl.PROXY?F(qe,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===kl.NOPROXY&&F(qe,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.__()},0),S}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}};function Qm(){return typeof document<"u"?document:null}function Cd(n){return new My(n,!0)}var ad=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var K0="PersistentStream",cd=class{constructor(e,t,r,i,o,s,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ad(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===A.RESOURCE_EXHAUSTED?(Mn(t.toString()),Mn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===A.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===t&&this.G_(r,i)},r=>{e(()=>{let i=new x(A.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,t){let r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return F(K0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(F(K0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},uv=class extends cd{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=H2(this.serializer,e),r=(function(o){if(!("targetChange"in o))return Y.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Y.min():s.readTime?ln(s.readTime):Y.min()})(e);return this.listener.H_(t,r)}Y_(e){let t={};t.database=Oy(this.serializer),t.addTarget=(function(o,s){let c,u=s.target;if(c=vy(u)?{documents:z2(o,u)}:{query:q2(o,u).ft},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=eA(o,s.resumeToken);let l=Ny(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(Y.min())>0){c.readTime=td(o,s.snapshotVersion.toTimestamp());let l=Ny(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c})(this.serializer,e);let r=K2(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){let t={};t.database=Oy(this.serializer),t.removeTarget=e,this.q_(t)}},lv=class extends cd{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return de(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){de(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let t=G2(e.writeResults,e.commitTime),r=ln(e.commitTime);return this.listener.na(r,t)}ra(){let e={};e.database=Oy(this.serializer),this.q_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>$2(this.serializer,r))};this.q_(t)}};var dv=class{},fv=class extends dv{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new x(A.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,Ry(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new x(A.UNKNOWN,o.toString())})}Ho(e,t,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Ho(e,Ry(t,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new x(A.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},hv=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Mn(t),this.aa=!1):F("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Di="RemoteStore",pv=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{Ci(this)&&(F(Di,"Restarting streams for network reachability change."),await(async function(u){let l=Q(u);l.Ea.add(4),await Ba(l),l.Ra.set("Unknown"),l.Ea.delete(4),await Sd(l)})(this))})}),this.Ra=new hv(r,i)}};async function Sd(n){if(Ci(n))for(let e of n.da)await e(!0)}async function Ba(n){for(let e of n.da)await e(!1)}function lA(n,e){let t=Q(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Zv(t)?Jv(t):jo(t).O_()&&Yv(t,e))}function Qv(n,e){let t=Q(n),r=jo(t);t.Ia.delete(e),r.O_()&&dA(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ci(t)&&t.Ra.set("Unknown"))}function Yv(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}jo(n).Y_(e)}function dA(n,e){n.Va.Ue(e),jo(n).Z_(e)}function Jv(n){n.Va=new Ay({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),jo(n).start(),n.Ra.ua()}function Zv(n){return Ci(n)&&!jo(n).x_()&&n.Ia.size>0}function Ci(n){return Q(n).Ea.size===0}function fA(n){n.Va=void 0}async function dj(n){n.Ra.set("Online")}async function fj(n){n.Ia.forEach((e,t)=>{Yv(n,e)})}async function hj(n,e){fA(n),Zv(n)?(n.Ra.ha(e),Jv(n)):n.Ra.set("Unknown")}async function pj(n,e,t){if(n.Ra.set("Online"),e instanceof Xl&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let c of o.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,s),i.Ia.delete(c),i.Va.removeTarget(c))})(n,e)}catch(r){F(Di,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ud(n,r)}else if(e instanceof Eo?n.Va.Ze(e):e instanceof Zl?n.Va.st(e):n.Va.tt(e),!t.isEqual(Y.min()))try{let r=await uA(n.localStore);t.compareTo(r)>=0&&await(function(o,s){let c=o.Va.Tt(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.Ia.get(l);f&&o.Ia.set(l,f.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let f=o.Ia.get(u);if(!f)return;o.Ia.set(u,f.withResumeToken(Ke.EMPTY_BYTE_STRING,f.snapshotVersion)),dA(o,u);let p=new xa(f.target,u,l,f.sequenceNumber);Yv(o,p)}),o.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(r){F(Di,"Failed to raise snapshot:",r),await ud(n,r)}}async function ud(n,e,t){if(!Vo(e))throw e;n.Ea.add(1),await Ba(n),n.Ra.set("Offline"),t||(t=()=>uA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{F(Di,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Sd(n)})}function hA(n,e){return e().catch(t=>ud(n,t,e))}async function Ad(n){let e=Q(n),t=wr(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Vv;for(;gj(e);)try{let i=await aj(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,mj(e,i)}catch(i){await ud(e,i)}pA(e)&&gA(e)}function gj(n){return Ci(n)&&n.Ta.length<10}function mj(n,e){n.Ta.push(e);let t=wr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function pA(n){return Ci(n)&&!wr(n).x_()&&n.Ta.length>0}function gA(n){wr(n).start()}async function yj(n){wr(n).ra()}async function vj(n){let e=wr(n);for(let t of n.Ta)e.ea(t.mutations)}async function _j(n,e,t){let r=n.Ta.shift(),i=Ty.from(r,e,t);await hA(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Ad(n)}async function Ej(n,e){e&&wr(n).X_&&await(async function(r,i){if((function(s){return O2(s)&&s!==A.ABORTED})(i.code)){let o=r.Ta.shift();wr(r).B_(),await hA(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Ad(r)}})(n,e),pA(n)&&gA(n)}async function Q0(n,e){let t=Q(n);t.asyncQueue.verifyOperationInProgress(),F(Di,"RemoteStore received new credentials");let r=Ci(t);t.Ea.add(3),await Ba(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Sd(t)}async function Ij(n,e){let t=Q(n);e?(t.Ea.delete(2),await Sd(t)):e||(t.Ea.add(2),await Ba(t),t.Ra.set("Unknown"))}function jo(n){return n.ma||(n.ma=(function(t,r,i){let o=Q(t);return o.sa(),new uv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:dj.bind(null,n),t_:fj.bind(null,n),r_:hj.bind(null,n),H_:pj.bind(null,n)}),n.da.push(async e=>{e?(n.ma.B_(),Zv(n)?Jv(n):n.Ra.set("Unknown")):(await n.ma.stop(),fA(n))})),n.ma}function wr(n){return n.fa||(n.fa=(function(t,r,i){let o=Q(t);return o.sa(),new lv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:yj.bind(null,n),r_:Ej.bind(null,n),ta:vj.bind(null,n),na:_j.bind(null,n)}),n.da.push(async e=>{e?(n.fa.B_(),await Ad(n)):(await n.fa.stop(),n.Ta.length>0&&(F(Di,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))})),n.fa}var gv=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new An,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,c=new n(e,t,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(A.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Xv(n,e){if(Mn("AsyncQueue",`${e}: ${n}`),Vo(n))return new x(A.UNAVAILABLE,`${e}: ${n}`);throw n}var ld=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||H.comparator(t.key,r.key):(t,r)=>H.comparator(t.key,r.key),this.keyedMap=wa(),this.sortedSet=new we(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var dd=class{constructor(){this.ga=new we(H.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):z(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}},Oo=class n{constructor(e,t,r,i,o,s,c,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(c=>{s.push({type:0,doc:c})}),new n(e,t,ld.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Td(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var mv=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},yv=class{constructor(){this.queries=Y0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){let i=Q(t),o=i.queries;i.queries=Y0(),o.forEach((s,c)=>{for(let u of c.Sa)u.onError(r)})})(this,new x(A.ABORTED,"Firestore shutting down"))}};function Y0(){return new Pn(n=>US(n),Td)}async function wj(n,e){let t=Q(n),r=3,i=e.query,o=t.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new mv,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await t.onListen(i,!0);break;case 1:o.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){let c=Xv(s,`Initialization of query '${mo(e.query)}' failed`);return void e.onError(c)}t.queries.set(i,o),o.Sa.push(e),e.va(t.onlineState),o.wa&&e.Fa(o.wa)&&e_(t)}async function Dj(n,e){let t=Q(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function Tj(n,e){let t=Q(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let c of s.Sa)c.Fa(i)&&(r=!0);s.wa=i}}r&&e_(t)}function bj(n,e,t){let r=Q(n),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(t);r.queries.delete(e)}function e_(n){n.Ca.forEach(e=>{e.next()})}var vv,J0;(J0=vv||(vv={})).Ma="default",J0.Cache="cache";var _v=class{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Oo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;let r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vv.Cache}};var fd=class{constructor(e){this.key=e}},hd=class{constructor(e){this.key=e}},Ev=class{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=re(),this.mutatedKeys=re(),this.eu=HS(e),this.tu=new ld(this.eu)}get nu(){return this.Ya}ru(e,t){let r=t?t.iu:new dd,i=t?t.tu:this.tu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let m=i.get(f),y=bd(this.query,p)?p:null,S=!!m&&this.mutatedKeys.has(m.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;m&&y?m.data.isEqual(y.data)?S!==R&&(r.track({type:3,doc:y}),M=!0):this.su(m,y)||(r.track({type:2,doc:y}),M=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(c=!0)),M&&(y?(s=s.add(y),o=R?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Cs:c,mutatedKeys:o}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((f,p)=>(function(y,S){let R=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z(20277,{Rt:M})}};return R(y)-R(S)})(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(r),i=i??!1;let c=t&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,s.length!==0||l?{snapshot:new Oo(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new dd,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(t=>this.Ya=this.Ya.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ya=this.Ya.delete(t)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=re(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let t=[];return e.forEach(r=>{this.Xa.has(r)||t.push(new hd(r))}),this.Xa.forEach(r=>{e.has(r)||t.push(new fd(r))}),t}cu(e){this.Ya=e.Qs,this.Xa=re();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Oo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},t_="SyncEngine",Iv=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},wv=class{constructor(e){this.key=e,this.hu=!1}},Dv=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Pn(c=>US(c),Td),this.Iu=new Map,this.Eu=new Set,this.du=new we(H.comparator),this.Au=new Map,this.Ru=new Fa,this.Vu={},this.mu=new Map,this.fu=ka.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function Cj(n,e,t=!0){let r=IA(n),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await mA(r,e,t,!0),i}async function Sj(n,e){let t=IA(n);await mA(t,e,!0,!1)}async function mA(n,e,t,r){let i=await cj(n.localStore,un(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),c;return r&&(c=await Aj(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&lA(n.remoteStore,i),c}async function Aj(n,e,t,r,i){n.pu=(p,m,y)=>(async function(R,M,j,ie){let ae=M.view.ru(j);ae.Cs&&(ae=await q0(R.localStore,M.query,!1).then(({documents:w})=>M.view.ru(w,ae)));let Oe=ie&&ie.targetChanges.get(M.targetId),Ue=ie&&ie.targetMismatches.get(M.targetId)!=null,ke=M.view.applyChanges(ae,R.isPrimaryClient,Oe,Ue);return X0(R,M.targetId,ke.au),ke.snapshot})(n,p,m,y);let o=await q0(n.localStore,e,!0),s=new Ev(e,o.Qs),c=s.ru(o.documents),u=Oa.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(c,n.isPrimaryClient,u);X0(n,t,l.au);let f=new Iv(e,t,s);return n.Tu.set(e,f),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),l.snapshot}async function Mj(n,e,t){let r=Q(n),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Td(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await nv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Qv(r.remoteStore,i.targetId),Tv(r,i.targetId)}).catch(Lo)):(Tv(r,i.targetId),await nv(r.localStore,i.targetId,!0))}async function Nj(n,e){let t=Q(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Qv(t.remoteStore,r.targetId))}async function Rj(n,e,t){let r=Vj(n);try{let i=await(function(s,c){let u=Q(s),l=Pe.now(),f=c.reduce((y,S)=>y.add(S.key),re()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=On(),R=re();return u.Ns.getEntries(y,f).next(M=>{S=M,S.forEach((j,ie)=>{ie.isValidDocument()||(R=R.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(M=>{p=M;let j=[];for(let ie of c){let ae=P2(ie,p.get(ie.key).overlayedDocument);ae!=null&&j.push(new xn(ie.key,ae,xS(ae.value.mapValue),gi.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,j,c)}).next(M=>{m=M;let j=M.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(y,M.batchId,j)})}).then(()=>({batchId:m.batchId,changes:GS(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,c,u){let l=s.Vu[s.currentUser.toKey()];l||(l=new we(ne)),l=l.insert(c,u),s.Vu[s.currentUser.toKey()]=l})(r,i.batchId,t),await Ua(r,i.changes),await Ad(r.remoteStore)}catch(i){let o=Xv(i,"Failed to persist write");t.reject(o)}}async function yA(n,e){let t=Q(n);try{let r=await oj(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Au.get(o);s&&(de(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?de(s.hu,14607):i.removedDocuments.size>0&&(de(s.hu,42227),s.hu=!1))}),await Ua(t,r,e)}catch(r){await Lo(r)}}function Z0(n,e,t){let r=Q(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Tu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),(function(s,c){let u=Q(s);u.onlineState=c;let l=!1;u.queries.forEach((f,p)=>{for(let m of p.Sa)m.va(c)&&(l=!0)}),l&&e_(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Pj(n,e,t){let r=Q(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new we(H.comparator);s=s.insert(o,$t.newNoDocument(o,Y.min()));let c=re().add(o),u=new Jl(Y.min(),new Map,new we(ne),s,c);await yA(r,u),r.du=r.du.remove(o),r.Au.delete(e),n_(r)}else await nv(r.localStore,e,!1).then(()=>Tv(r,e,t)).catch(Lo)}async function Oj(n,e){let t=Q(n),r=e.batch.batchId;try{let i=await ij(t.localStore,e);_A(t,r,null),vA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Ua(t,i)}catch(i){await Lo(i)}}async function xj(n,e,t){let r=Q(n);try{let i=await(function(s,c){let u=Q(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(de(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})})(r.localStore,e);_A(r,e,t),vA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Ua(r,i)}catch(i){await Lo(i)}}function vA(n,e){(n.mu.get(e)||[]).forEach(t=>{t.resolve()}),n.mu.delete(e)}function _A(n,e,t){let r=Q(n),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Tv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach(r=>{n.Ru.containsKey(r)||EA(n,r)})}function EA(n,e){n.Eu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Qv(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),n_(n))}function X0(n,e,t){for(let r of t)r instanceof fd?(n.Ru.addReference(r.key,e),kj(n,r)):r instanceof hd?(F(t_,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||EA(n,r.key)):z(19791,{wu:r})}function kj(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(F(t_,"New document in limbo: "+t),n.Eu.add(r),n_(n))}function n_(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Eu.values().next().value;n.Eu.delete(e);let t=new H(Ee.fromString(e)),r=n.fu.next();n.Au.set(r,new wv(t)),n.du=n.du.insert(t,r),lA(n.remoteStore,new xa(un(zv(t.path)),r,"TargetPurposeLimboResolution",Lv.ce))}}async function Ua(n,e,t){let r=Q(n),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{s.push(r.pu(u,e,t).then(l=>{if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:t?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=Zy.As(u.targetId,l);o.push(f)}}))}),await Promise.all(s),r.Pu.H_(i),await(async function(u,l){let f=Q(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>N.forEach(l,m=>N.forEach(m.Es,y=>f.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>N.forEach(m.ds,y=>f.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Vo(p))throw p;F(Kv,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=f.Ms.get(m),S=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(S);f.Ms=f.Ms.insert(m,R)}}})(r.localStore,o))}async function Fj(n,e){let t=Q(n);if(!t.currentUser.isEqual(e)){F(t_,"User change. New user:",e.toKey());let r=await cA(t.localStore,e);t.currentUser=e,(function(o,s){o.mu.forEach(c=>{c.forEach(u=>{u.reject(new x(A.CANCELLED,s))})}),o.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ua(t,r.Ls)}}function Lj(n,e){let t=Q(n),r=t.Au.get(e);if(r&&r.hu)return re().add(r.key);{let i=re(),o=t.Iu.get(e);if(!o)return i;for(let s of o){let c=t.Tu.get(s);i=i.unionWith(c.view.nu)}return i}}function IA(n){let e=Q(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Pj.bind(null,e),e.Pu.H_=Tj.bind(null,e.eventManager),e.Pu.yu=bj.bind(null,e.eventManager),e}function Vj(n){let e=Q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Oj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xj.bind(null,e),e}var wA=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Cd(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return rj(this.persistence,new ev,t.initialUser,this.serializer)}Cu(t){return new rd(Jy.mi,this.serializer)}Du(t){return new rv}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),bv=class extends wA{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){de(this.persistence.referenceDelegate instanceof id,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new Vy(r,e.asyncQueue,t)}Cu(e){let t=this.cacheSizeBytes!==void 0?Pt.withCacheSize(this.cacheSizeBytes):Pt.DEFAULT;return new rd(r=>id.mi(r,t),this.serializer)}};var jj=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Z0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Fj.bind(null,this.syncEngine),await Ij(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new yv})()}createDatastore(t){let r=Cd(t.databaseInfo.databaseId),i=(function(s){return new cv(s)})(t.databaseInfo);return(function(s,c,u,l){return new fv(s,c,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,c,u){return new pv(i,o,s,c,u)})(this.localStore,this.datastore,t.asyncQueue,r=>Z0(this.syncEngine,r,0),(function(){return sd.v()?new sd:new iv})())}createSyncEngine(t,r){return(function(o,s,c,u,l,f,p){let m=new Dv(o,s,c,u,l,f);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=Q(r);F(Di,"RemoteStore shutting down."),i.Ea.add(5),await Ba(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return n.provider={build:()=>new n},n})();var Cv=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Mn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Dr="FirestoreClient",Sv=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ve.UNAUTHENTICATED,this.clientId=Aa.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{F(Dr,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(F(Dr,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new An;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Xv(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function Ym(n,e){n.asyncQueue.verifyOperationInProgress(),F(Dr,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await cA(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function eS(n,e){n.asyncQueue.verifyOperationInProgress();let t=await Bj(n);F(Dr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Q0(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Q0(e.remoteStore,i)),n._onlineComponents=e}async function Bj(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){F(Dr,"Using user provided OfflineComponentProvider");try{await Ym(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===A.FAILED_PRECONDITION||i.code===A.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;Do("Error using user provided cache. Falling back to memory cache: "+t),await Ym(n,new wA)}}else F(Dr,"Using default OfflineComponentProvider"),await Ym(n,new bv(void 0));return n._offlineComponents}async function DA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(F(Dr,"Using user provided OnlineComponentProvider"),await eS(n,n._uninitializedComponentsProvider._online)):(F(Dr,"Using default OnlineComponentProvider"),await eS(n,new jj))),n._onlineComponents}function Uj(n){return DA(n).then(e=>e.syncEngine)}async function tS(n){let e=await DA(n),t=e.eventManager;return t.onListen=Cj.bind(null,e.syncEngine),t.onUnlisten=Mj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Sj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Nj.bind(null,e.syncEngine),t}function TA(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var nS=new Map;var bA="firestore.googleapis.com",rS=!0,pd=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new x(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=bA,this.ssl=rS}else this.host=e.host,this.ssl=e.ssl??rS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=aA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ej)throw new x(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TA(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new x(A.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new x(A.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new x(A.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},xo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pd({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new x(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new x(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pd(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Jm;switch(r.type){case"firstParty":return new ty(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new x(A.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=nS.get(t);r&&(F("ComponentProvider","Removing Datastore"),nS.delete(t),r.terminate())})(this),Promise.resolve()}};function Hj(n,e,t,r={}){n=Da(n,xo);let i=dr(e),o=n._getSettings(),s=ee(V({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;i&&(Al(`https://${c}`),Ml("Firestore",!0)),o.host!==bA&&o.host!==c&&Do("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=ee(V({},o),{host:c,ssl:i,emulatorOptions:r});if(!on(u,s)&&(n._setSettings(u),r.mockUserToken)){let l,f;if(typeof r.mockUserToken=="string")l=r.mockUserToken,f=Ve.MOCK_USER;else{l=zC(r.mockUserToken,n._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new x(A.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ve(p)}n._authCredentials=new Zm(new Hl(l,f))}}var Ti=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},We=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ja(t,n._jsonSchema))return new n(e,r||null,new H(Ee.fromString(t.referencePath)))}};We._jsonSchemaVersion="firestore/documentReference/1.0",We._jsonSchema={type:Re("string",We._jsonSchemaVersion),referencePath:Re("string")};var mr=class n extends Ti{constructor(e,t,r){super(e,t,zv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new We(this.firestore,null,new H(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function r_(n,e,...t){if(n=nt(n),lS("collection","path",e),n instanceof xo){let r=Ee.fromString(e,...t);return I0(r),new mr(n,null,r)}{if(!(n instanceof We||n instanceof mr))throw new x(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ee.fromString(e,...t));return I0(r),new mr(n.firestore,null,r)}}function $j(n,e,...t){if(n=nt(n),arguments.length===1&&(e=Aa.newId()),lS("doc","path",e),n instanceof xo){let r=Ee.fromString(e,...t);return E0(r),new We(n,null,new H(r))}{if(!(n instanceof We||n instanceof mr))throw new x(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ee.fromString(e,...t));return E0(r),new We(n.firestore,n instanceof mr?n.converter:null,new H(r))}}var iS="AsyncQueue",gd=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ad(this,"async_queue_retry"),this._c=()=>{let r=Qm();r&&F(iS,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let t=Qm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=Qm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new An;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Vo(e))throw e;F(iS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Mn("INTERNAL UNHANDLED ERROR: ",oS(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let i=gv.createAndSchedule(this,e,t,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&z(47125,{Pc:oS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}};function oS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function sS(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1})(n,["next","error","complete"])}var ko=class extends xo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new gd,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new gd(e),this._firestoreClient=void 0,await e}}};function CA(n,e){let t=typeof n=="object"?n:Ol(),r=typeof n=="string"?n:e||Wl,i=Ea(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=GC("firestore");o&&Hj(i,...o)}return i}function SA(n){if(n._terminated)throw new x(A.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Gj(n),n._firestoreClient}function Gj(n){let e=n._freezeSettings(),t=(function(i,o,s,c){return new sy(i,o,s,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,TA(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new Sv(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(n._componentsProvider))}var yr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ke.fromBase64String(e))}catch(t){throw new x(A.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ke.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ja(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};yr._jsonSchemaVersion="firestore/bytes/1.0",yr._jsonSchema={type:Re("string",yr._jsonSchemaVersion),bytes:Re("string")};var La=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new x(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var md=class{constructor(e){this._methodName=e}};var vr=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new x(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new x(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(ja(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};vr._jsonSchemaVersion="firestore/geoPoint/1.0",vr._jsonSchema={type:Re("string",vr._jsonSchemaVersion),latitude:Re("number"),longitude:Re("number")};var _r=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ja(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new x(A.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};_r._jsonSchemaVersion="firestore/vectorValue/1.0",_r._jsonSchema={type:Re("string",_r._jsonSchemaVersion),vectorValues:Re("object")};var zj=/^__.*__$/,Av=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new xn(e,this.data,this.fieldMask,t,this.fieldTransforms):new wi(e,this.data,t,this.fieldTransforms)}};function AA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z(40011,{Ac:n})}}var Mv=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new n(V(V({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){let t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return yd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(AA(this.Ac)&&zj.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},Nv=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Cd(e)}Cc(e,t,r,i=!1){return new Mv({Ac:e,methodName:t,Dc:r,path:wt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function MA(n){let e=n._freezeSettings(),t=Cd(n._databaseId);return new Nv(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qj(n,e,t,r,i,o={}){let s=n.Cc(o.merge||o.mergeFields?2:0,e,t,i);PA("Data must be an object, but it was:",s,r);let c=NA(r,s),u,l;if(o.merge)u=new an(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let m=Kj(e,p,t);if(!s.contains(m))throw new x(A.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Yj(f,m)||f.push(m)}u=new an(f),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Av(new Ht(c),u,l)}function Wj(n,e,t,r=!1){return i_(t,n.Cc(r?4:3,e))}function i_(n,e){if(RA(n=nt(n)))return PA("Unsupported field value:",e,n),NA(n,e);if(n instanceof md)return(function(r,i){if(!AA(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let c of r){let u=i_(c,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return S2(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Pe.fromDate(r);return{timestampValue:td(i.serializer,o)}}if(r instanceof Pe){let o=new Pe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:td(i.serializer,o)}}if(r instanceof vr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yr)return{bytesValue:eA(i.serializer,r._byteString)};if(r instanceof We){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Wv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof _r)return(function(s,c){return{mapValue:{fields:{[Bv]:{stringValue:Uv},[bo]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.Sc("VectorValues must only contain numeric values.");return qv(c.serializer,l)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Id(r)}`)})(n,e)}function NA(n,e){let t={};return CS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bi(n,(r,i)=>{let o=i_(i,e.mc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function RA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Pe||n instanceof vr||n instanceof yr||n instanceof We||n instanceof md||n instanceof _r)}function PA(n,e,t){if(!RA(t)||!dS(t)){let r=Id(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Kj(n,e,t){if((e=nt(e))instanceof La)return e._internalPath;if(typeof e=="string")return OA(n,e);throw yd("Field path arguments must be of type string or ",n,!1,void 0,t)}var Qj=new RegExp("[~\\*/\\[\\]]");function OA(n,e,t){if(e.search(Qj)>=0)throw yd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new La(...e.split("."))._internalPath}catch{throw yd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function yd(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new x(A.INVALID_ARGUMENT,c+n+u)}function Yj(n,e){return n.some(t=>t.isEqual(e))}var vd=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new We(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Rv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(o_("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Rv=class extends vd{data(){return super.data()}};function o_(n,e){return typeof e=="string"?OA(n,e):e instanceof La?e._internalPath:e._delegate._internalPath}function Jj(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new x(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Va=class{},_d=class extends Va{};function xA(n,e,...t){let r=[];e instanceof Va&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(u=>u instanceof Ov).length,c=o.filter(u=>u instanceof Pv).length;if(s>1||s>0&&c>0)throw new x(A.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var Pv=class n extends _d{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return FA(e._query,t),new Ti(e.firestore,e.converter,_y(e._query,t))}_parse(e){let t=MA(e.firestore);return(function(o,s,c,u,l,f,p){let m;if(l.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new x(A.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){cS(p,f);let S=[];for(let R of p)S.push(aS(u,o,R));m={arrayValue:{values:S}}}else m=aS(u,o,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||cS(p,f),m=Wj(c,s,p,f==="in"||f==="not-in");return Ne.create(l,f,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var Ov=class n extends Va{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Gt.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,c=o.getFlattenedFilters();for(let u of c)FA(s,u),s=_y(s,u)})(e._query,t),new Ti(e.firestore,e.converter,_y(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var xv=class n extends _d{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new x(A.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new x(A.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _i(o,s)})(e._query,this._field,this._direction);return new Ti(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new Ir(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function kA(n,e="asc"){let t=e,r=o_("orderBy",n);return xv._create(r,t)}function aS(n,e,t){if(typeof(t=nt(t))=="string"){if(t==="")throw new x(A.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!BS(e)&&t.indexOf("/")!==-1)throw new x(A.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ee.fromString(t));if(!H.isDocumentKey(r))throw new x(A.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return A0(n,new H(r))}if(t instanceof We)return A0(n,t._key);throw new x(A.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Id(t)}.`)}function cS(n,e){if(!Array.isArray(n)||n.length===0)throw new x(A.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FA(n,e){let t=(function(i,o){for(let s of i)for(let c of s.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new x(A.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new x(A.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var kv=class{convertValue(e,t="none"){switch(Er(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return bi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){let t=e.fields?.[bo].arrayValue?.values?.map(r=>_e(r.doubleValue));return new _r(t)}convertGeoPoint(e){return new vr(_e(e.latitude),_e(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Dd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ra(e));default:return null}}convertTimestamp(e){let t=Nn(e);return new Pe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ee.fromString(e);de(sA(r),9688,{name:e});let i=new Kl(r.get(1),r.get(3)),o=new H(r.popFirst(5));return i.isEqual(t)||Mn(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Zj(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var pi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},mi=class n extends vd{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Io(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(o_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new x(A.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};mi._jsonSchemaVersion="firestore/documentSnapshot/1.0",mi._jsonSchema={type:Re("string",mi._jsonSchemaVersion),bundleSource:Re("string","DocumentSnapshot"),bundleName:Re("string"),bundle:Re("string")};var Io=class extends mi{data(e={}){return super.data(e)}},wo=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new pi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Io(this._firestore,this._userDataWriter,r.key,r,new pi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new x(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new Io(i._firestore,i._userDataWriter,c.doc.key,c.doc,new pi(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new Io(i._firestore,i._userDataWriter,c.doc.key,c.doc,new pi(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),f=s.indexOf(c.doc.key)),{type:Xj(c.type),doc:u,oldIndex:l,newIndex:f}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new x(A.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Aa.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function Xj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z(61501,{type:n})}}wo._jsonSchemaVersion="firestore/querySnapshot/1.0",wo._jsonSchema={type:Re("string",wo._jsonSchemaVersion),bundleSource:Re("string","QuerySnapshot"),bundleName:Re("string"),bundle:Re("string")};var Ed=class extends kv{constructor(e){super(),this.firestore=e}convertBytes(e){return new yr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,t)}};function LA(n,e){let t=Da(n.firestore,ko),r=$j(n),i=Zj(n.converter,e);return eB(t,[qj(MA(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,gi.exists(!1))]).then(()=>r)}function VA(n,...e){n=nt(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||sS(e[r])||(t=e[r++]);let i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(sS(e[r])){let u=e[r];e[r]=u.next?.bind(u),e[r+1]=u.error?.bind(u),e[r+2]=u.complete?.bind(u)}let o,s,c;if(n instanceof We)s=Da(n.firestore,ko),c=zv(n._key.path),o={next:u=>{e[r]&&e[r](tB(s,n,u))},error:e[r+1],complete:e[r+2]};else{let u=Da(n,Ti);s=Da(u.firestore,ko),c=u._query;let l=new Ed(s);o={next:f=>{e[r]&&e[r](new wo(s,l,u,f))},error:e[r+1],complete:e[r+2]},Jj(n._query)}return(function(l,f,p,m){let y=new Cv(m),S=new _v(f,y,p);return l.asyncQueue.enqueueAndForget(async()=>wj(await tS(l),S)),()=>{y.Nu(),l.asyncQueue.enqueueAndForget(async()=>Dj(await tS(l),S))}})(SA(s),c,i,o)}function eB(n,e){return(function(r,i){let o=new An;return r.asyncQueue.enqueueAndForget(async()=>Rj(await Uj(r),i,o)),o.promise})(SA(n),e)}function tB(n,e,t){let r=t.docs.get(e._key),i=new Ed(n);return new mi(n,i,e._key,r,new pi(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Fo=i})(gr),pr(new Rt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new ko(new Xm(r.getProvider("auth-internal")),new ny(s,r.getProvider("app-check-internal")),(function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new x(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kl(l.options.projectId,f)})(s,i),s);return o=V({useFetchStreams:t},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Ut(y0,v0,e),Ut(y0,v0,"esm2020")})();function XA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var eM=XA,tM=new Tn("auth","Firebase",XA());var xd=new fr("@firebase/auth");function nB(n,...e){xd.logLevel<=te.WARN&&xd.warn(`Auth (${gr}): ${n}`,...e)}function Nd(n,...e){xd.logLevel<=te.ERROR&&xd.error(`Auth (${gr}): ${n}`,...e)}function Sr(n,...e){throw b_(n,...e)}function Si(n,...e){return b_(n,...e)}function nM(n,e,t){let r=ee(V({},eM()),{[e]:t});return new Tn("auth","Firebase",r).create(e,{appName:n.name})}function Cr(n){return nM(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function b_(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return tM.create(n,...e)}function W(n,e,...t){if(!n)throw b_(e,...t)}function kn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Nd(e),new Error(e)}function Ar(n,e){n||kn(e)}function u_(){return typeof self<"u"&&self.location?.href||""}function rB(){return jA()==="http:"||jA()==="https:"}function jA(){return typeof self<"u"&&self.location?.protocol||null}function iB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(rB()||KC()||"connection"in navigator)?navigator.onLine:!0}function oB(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ai=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ar(t>e,"Short delay should be less than long delay!"),this.isMobile=qC()||QC()}get(){return iB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function C_(n,e){Ar(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var kd=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var sB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var aB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cB=new Ai(3e4,6e4);function qd(n,e){return n.tenantId&&!e.tenantId?ee(V({},e),{tenantId:n.tenantId}):e}async function Bo(n,e,t,r,i={}){return rM(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let c=va(V({key:n.config.apiKey},s)).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);let l=V({method:e,headers:u},o);return WC()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&dr(n.emulatorConfig.host)&&(l.credentials="include"),kd.fetch()(await oM(n,n.config.apiHost,t,c),l)})}async function rM(n,e,t){n._canInitEmulator=!1;let r=V(V({},sB),e);try{let i=new l_(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw Md(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let c=o.ok?s.errorMessage:s.error.message,[u,l]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Md(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Md(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw Md(n,"user-disabled",s);let f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw nM(n,f,l);Sr(n,f)}}catch(i){if(i instanceof Et)throw i;Sr(n,"network-request-failed",{message:String(i)})}}async function iM(n,e,t,r,i={}){let o=await Bo(n,e,t,r,i);return"mfaPendingCredential"in o&&Sr(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function oM(n,e,t,r){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?C_(n.config,i):`${n.config.apiScheme}://${i}`;return aB.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}var l_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Si(this.auth,"network-request-failed")),cB.get())})}};function Md(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Si(n,e,r);return i.customData._tokenResponse=t,i}async function uB(n,e){return Bo(n,"POST","/v1/accounts:delete",e)}async function Fd(n,e){return Bo(n,"POST","/v1/accounts:lookup",e)}function Ha(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sM(n,e=!1){let t=nt(n),r=await t.getIdToken(e),i=S_(r);W(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Ha(s_(i.auth_time)),issuedAtTime:Ha(s_(i.iat)),expirationTime:Ha(s_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function s_(n){return Number(n)*1e3}function S_(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Nd("JWT malformed, contained fewer than 3 sections"),null;try{let i=Cl(t);return i?JSON.parse(i):(Nd("Failed to decode base64 JWT payload"),null)}catch(i){return Nd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function BA(n){let e=S_(n);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ga(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Et&&lB(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function lB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var d_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var za=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ha(this.lastLoginAt),this.creationTime=Ha(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Ld(n){let e=n.auth,t=await n.getIdToken(),r=await Ga(n,Fd(e,{idToken:t}));W(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let o=i.providerUserInfo?.length?cM(i.providerUserInfo):[],s=dB(n.providerData,o),c=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!s?.length,l=c?u:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new za(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(n,f)}async function aM(n){let e=nt(n);await Ld(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dB(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function cM(n){return n.map(r=>{var i=r,{providerId:e}=i,t=is(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function fB(n,e){let t=await rM(n,{},async()=>{let r=va({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await oM(n,i,"/v1/token",`key=${o}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:c,body:r};return n.emulatorConfig&&dr(n.emulatorConfig.host)&&(u.credentials="include"),kd.fetch()(s,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function hB(n,e){return Bo(n,"POST","/v2/accounts:revokeToken",qd(n,e))}var $a=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):BA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){W(e.length!==0,"internal-error");let t=BA(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:o}=await fB(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(W(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(W(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return kn("not implemented")}};function Tr(n,e){W(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var br=class n{constructor(o){var s=o,{uid:e,auth:t,stsTokenManager:r}=s,i=is(s,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new d_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new za(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await Ga(this,this.stsTokenManager.getToken(this.auth,e));return W(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return sM(this,e)}reload(){return aM(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>V({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(ee(V({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Ld(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(It(this.auth.app))return Promise.reject(Cr(this.auth));let e=await this.getIdToken();return await Ga(this,uB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return ee(V({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>V({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,o=t.phoneNumber??void 0,s=t.photoURL??void 0,c=t.tenantId??void 0,u=t._redirectEventId??void 0,l=t.createdAt??void 0,f=t.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:y,providerData:S,stsTokenManager:R}=t;W(p&&R,e,"internal-error");let M=$a.fromJSON(this.name,R);W(typeof p=="string",e,"internal-error"),Tr(r,e.name),Tr(i,e.name),W(typeof m=="boolean",e,"internal-error"),W(typeof y=="boolean",e,"internal-error"),Tr(o,e.name),Tr(s,e.name),Tr(c,e.name),Tr(u,e.name),Tr(l,e.name),Tr(f,e.name);let j=new n({uid:p,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:y,photoURL:s,phoneNumber:o,tenantId:c,stsTokenManager:M,createdAt:l,lastLoginAt:f});return S&&Array.isArray(S)&&(j.providerData=S.map(ie=>V({},ie))),u&&(j._redirectEventId=u),j}static async _fromIdTokenResponse(e,t,r=!1){let i=new $a;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ld(o),o}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];W(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?cM(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,c=new $a;c.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new za(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var UA=new Map;function Fn(n){Ar(n instanceof Function,"Expected a class definition");let e=UA.get(n);return e?(Ar(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,UA.set(n,e),e)}var pB=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),f_=pB;function Rd(n,e,t){return`firebase:${n}:${e}:${t}`}var Vd=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Rd(this.userKey,i.apiKey,o),this.fullPersistenceKey=Rd("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await Fd(this.auth,{idToken:e}).catch(()=>{});return t?br._fromGetAccountInfoResponse(this.auth,t,e):null}return br._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(Fn(f_),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||Fn(f_),s=Rd(r,e.config.apiKey,e.name),c=null;for(let l of t)try{let f=await l._get(s);if(f){let p;if(typeof f=="string"){let m=await Fd(e,{idToken:f}).catch(()=>{});if(!m)break;p=await br._fromGetAccountInfoResponse(e,m,f)}else p=br._fromJSON(e,f);l!==o&&(c=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],c&&await o._set(s,c.toJSON()),await Promise.all(t.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new n(o,e,r))}};function HA(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pM(e))return"Blackberry";if(gM(e))return"Webos";if(lM(e))return"Safari";if((e.includes("chrome/")||dM(e))&&!e.includes("edge/"))return"Chrome";if(hM(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function uM(n=Le()){return/firefox\//i.test(n)}function lM(n=Le()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dM(n=Le()){return/crios\//i.test(n)}function fM(n=Le()){return/iemobile/i.test(n)}function hM(n=Le()){return/android/i.test(n)}function pM(n=Le()){return/blackberry/i.test(n)}function gM(n=Le()){return/webos/i.test(n)}function A_(n=Le()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function gB(n=Le()){return A_(n)&&!!window.navigator?.standalone}function mB(){return YC()&&document.documentMode===10}function mM(n=Le()){return A_(n)||hM(n)||gM(n)||pM(n)||/windows phone/i.test(n)||fM(n)}function yM(n,e=[]){let t;switch(n){case"Browser":t=HA(Le());break;case"Worker":t=`${HA(Le())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${gr}/${r}`}var h_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,c)=>{try{let u=e(o);s(u)}catch(u){c(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function yB(n,e={}){return Bo(n,"GET","/v2/passwordPolicy",qd(n,e))}var vB=6,p_=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??vB,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var g_=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jd(this),this.idTokenSubscription=new jd(this),this.beforeStateQueue=new h_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fn(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Vd.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await Fd(this,{idToken:e}),r=await br._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(It(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(s=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(s,s))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=this.redirectUser?._redirectEventId,s=r?._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===s)&&c?.user&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ld(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=oB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(It(this.app))return Promise.reject(Cr(this));let t=e?nt(e):null;return t&&W(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return It(this.app)?Promise.reject(Cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return It(this.app)?Promise.reject(Cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await yB(this),t=new p_(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Tn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await hB(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&Fn(e)||this._popupRedirectResolver;W(t,this,"argument-error"),this.redirectPersistenceManager=await Vd.create(this,[Fn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(c,this,"internal-error"),c.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(It(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&nB(`Error while retrieving App Check token: ${e.error}`),e?.token}};function Wd(n){return nt(n)}var jd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=e0(t=>this.observer=t)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var M_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _B(n){M_=n}function EB(n){return M_.loadJS(n)}function IB(){return M_.gapiScript}function vM(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function _M(n,e){let t=Ea(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(on(o,e??{}))return i;Sr(i,"already-initialized")}return t.initialize({options:e})}function wB(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Fn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function EM(n,e,t){let r=Wd(n);W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=IM(e),{host:s,port:c}=DB(e),u=c===null?"":`:${c}`,l={url:`${o}//${s}${u}/`},f=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){W(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),W(on(l,r.config.emulator)&&on(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,dr(s)?(Al(`${o}//${s}${u}`),Ml("Auth",!0)):i||TB()}function IM(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function DB(n){let e=IM(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:$A(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:$A(s)}}}function $A(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function TB(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Bd=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return kn("not implemented")}_getIdTokenResponse(e){return kn("not implemented")}_linkToIdToken(e,t){return kn("not implemented")}_getReauthenticationResolver(e){return kn("not implemented")}};async function a_(n,e){return iM(n,"POST","/v1/accounts:signInWithIdp",qd(n,e))}var Ud=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var m_=class extends Ud{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};async function bB(n,e){return iM(n,"POST","/v1/accounts:signUp",qd(n,e))}var Mi=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let o=await br._fromIdTokenResponse(e,r,i),s=GA(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=GA(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function GA(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}async function N_(n){if(It(n.app))return Promise.reject(Cr(n));let e=Wd(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Mi({user:e.currentUser,providerId:null,operationType:"signIn"});let t=await bB(e,{returnSecureToken:!0}),r=await Mi._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}var y_=class n extends Et{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function wM(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?y_._fromErrorAndOperation(n,o,e,r):o})}async function CB(n,e,t=!1){let r=await Ga(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Mi._forOperation(n,"link",r)}async function SB(n,e,t=!1){let{auth:r}=n;if(It(r.app))return Promise.reject(Cr(r));let i="reauthenticate";try{let o=await Ga(n,wM(r,i,e,n),t);W(o.idToken,r,"internal-error");let s=S_(o.idToken);W(s,r,"internal-error");let{sub:c}=s;return W(n.uid===c,r,"user-mismatch"),Mi._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Sr(r,"user-mismatch"),o}}async function AB(n,e,t=!1){if(It(n.app))return Promise.reject(Cr(n));let r="signIn",i=await wM(n,r,e),o=await Mi._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}function DM(n,e,t,r){return nt(n).onIdTokenChanged(e,t,r)}function TM(n,e,t){return nt(n).beforeAuthStateChanged(e,t)}var Hd="__sak";var $d=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Hd,"1"),this.storage.removeItem(Hd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var MB=1e3,NB=10,RB=(()=>{class n extends $d{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mM(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((c,u,l)=>{this.notifyListeners(c,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let c=this.storage.getItem(i);!r&&this.localCache[i]===c||this.notifyListeners(i,c)},s=this.storage.getItem(i);mB()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,NB):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},MB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),bM=RB;var PB=(()=>{class n extends $d{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),R_=PB;function OB(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var xB=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:o,data:s}=r.data,c=this.handlersMap[o];if(!c?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(c).map(async f=>f(r.origin,s)),l=await OB(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function CM(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var v_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((c,u)=>{let l=CM("",20);i.port1.start();let f=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(m.data.response);break;default:clearTimeout(f),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function fn(){return window}function kB(n){fn().location.href=n}function SM(){return typeof fn().WorkerGlobalScope<"u"&&typeof fn().importScripts=="function"}async function FB(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LB(){return navigator?.serviceWorker?.controller||null}function VB(){return SM()?self:null}var AM="firebaseLocalStorageDb",jB=1,Gd="firebaseLocalStorage",MM="fbase_key",Ni=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Kd(n,e){return n.transaction([Gd],e?"readwrite":"readonly").objectStore(Gd)}function BB(){let n=indexedDB.deleteDatabase(AM);return new Ni(n).toPromise()}function __(){let n=indexedDB.open(AM,jB);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Gd,{keyPath:MM})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(Gd)?e(r):(r.close(),await BB(),e(await __()))})})}async function zA(n,e,t){let r=Kd(n,!0).put({[MM]:e,value:t});return new Ni(r).toPromise()}async function UB(n,e){let t=Kd(n,!1).get(e),r=await new Ni(t).toPromise();return r===void 0?null:r.value}function qA(n,e){let t=Kd(n,!0).delete(e);return new Ni(t).toPromise()}var HB=800,$B=3,GB=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await __(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>$B)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return SM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xB._getInstance(VB()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await FB(),!this.activeServiceWorker)return;this.sender=new v_(this.activeServiceWorker);let t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||LB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await __();return await zA(t,Hd,"1"),await qA(t,Hd),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>zA(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>UB(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>qA(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(o=>{let s=Kd(o,!1).getAll();return new Ni(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),HB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),NM=GB;var yQ=vM("rcb"),vQ=new Ai(3e4,6e4);function zB(n,e){return e?Fn(e):(W(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var qa=class extends Bd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return a_(e,this._buildIdpRequest())}_linkToIdToken(e,t){return a_(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return a_(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function qB(n){return AB(n.auth,new qa(n),n.bypassAuthState)}function WB(n){let{auth:e,user:t}=n;return W(t,e,"internal-error"),SB(t,new qa(n),n.bypassAuthState)}async function KB(n){let{auth:e,user:t}=n;return W(t,e,"internal-error"),CB(t,new qa(n),n.bypassAuthState)}var E_=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:c}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qB;case"linkViaPopup":case"linkViaRedirect":return KB;case"reauthViaPopup":case"reauthViaRedirect":return WB;default:Sr(this.auth,"internal-error")}}resolve(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var _Q=new Ai(2e3,1e4);var QB="pendingRedirect",Pd=new Map,I_=class extends E_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Pd.get(this.auth._key());if(!e){try{let r=await YB(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Pd.set(this.auth._key(),e)}return this.bypassAuthState||Pd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function YB(n,e){let t=XB(e),r=ZB(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function JB(n,e){Pd.set(n._key(),e)}function ZB(n){return Fn(n._redirectPersistence)}function XB(n){return Rd(QB,n.config.apiKey,n.name)}async function eU(n,e,t=!1){if(It(n.app))return Promise.reject(Cr(n));let r=Wd(n),i=zB(r,e),s=await new I_(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var tU=600*1e3,w_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!RM(e)){let r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Si(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tU&&this.cachedEventUids.clear(),this.cachedEventUids.has(WA(e))}saveEventToCache(e){this.cachedEventUids.add(WA(e)),this.lastProcessedEventTime=Date.now()}};function WA(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function RM({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function nU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RM(n);default:return!1}}async function rU(n,e={}){return Bo(n,"GET","/v1/projects",e)}var iU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oU=/^https?/;async function sU(n){if(n.config.emulator)return;let{authorizedDomains:e}=await rU(n);for(let t of e)try{if(aU(t))return}catch{}Sr(n,"unauthorized-domain")}function aU(n){let e=u_(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!oU.test(t))return!1;if(iU.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var cU=new Ai(3e4,6e4);function KA(){let n=fn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function uU(n){return new Promise((e,t)=>{function r(){KA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{KA(),t(Si(n,"network-request-failed"))},timeout:cU.get()})}if(fn().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(fn().gapi?.load)r();else{let i=vM("iframefcb");return fn()[i]=()=>{gapi.load?r():t(Si(n,"network-request-failed"))},EB(`${IB()}?onload=${i}`).catch(o=>t(o))}}).catch(e=>{throw Od=null,e})}var Od=null;function lU(n){return Od=Od||uU(n),Od}var dU=new Ai(5e3,15e3),fU="__/auth/iframe",hU="emulator/auth/iframe",pU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mU(n){let e=n.config;W(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?C_(e,hU):`https://${n.config.authDomain}/${fU}`,r={apiKey:e.apiKey,appName:n.name,v:gr},i=gU.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${va(r).slice(1)}`}async function yU(n){let e=await lU(n),t=fn().gapi;return W(t,n,"internal-error"),e.open({where:document.body,url:mU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pU,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=Si(n,"network-request-failed"),c=fn().setTimeout(()=>{o(s)},dU.get());function u(){fn().clearTimeout(c),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var vU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_U=500,EU=600,IU="_blank",wU="http://localhost",zd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function DU(n,e,t,r=_U,i=EU){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),c="",u=ee(V({},vU),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Le().toLowerCase();t&&(c=dM(l)?IU:t),uM(l)&&(e=e||wU,u.scrollbars="yes");let f=Object.entries(u).reduce((m,[y,S])=>`${m}${y}=${S},`,"");if(gB(l)&&c!=="_self")return TU(e||"",c),new zd(null);let p=window.open(e||"",c,f);W(p,n,"popup-blocked");try{p.focus()}catch{}return new zd(p)}function TU(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var bU="__/auth/handler",CU="emulator/auth/handler",SU=encodeURIComponent("fac");async function QA(n,e,t,r,i,o){W(n.config.authDomain,n,"auth-domain-config-required"),W(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:gr,eventId:i};if(e instanceof Ud){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",XC(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,p]of Object.entries(o||{}))s[f]=p}if(e instanceof m_){let f=e.getScopes().filter(p=>p!=="");f.length>0&&(s.scopes=f.join(","))}n.tenantId&&(s.tid=n.tenantId);let c=s;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let u=await n._getAppCheckToken(),l=u?`#${SU}=${encodeURIComponent(u)}`:"";return`${AU(n)}?${va(c).slice(1)}${l}`}function AU({config:n}){return n.emulator?C_(n,CU):`https://${n.authDomain}/${bU}`}var c_="webStorageSupport",D_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=R_,this._completeRedirectFn=eU,this._overrideRedirectResult=JB}async _openPopup(e,t,r,i){Ar(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");let o=await QA(e,t,r,u_(),i);return DU(e,o,CM())}async _openRedirect(e,t,r,i){await this._originValidation(e);let o=await QA(e,t,r,u_(),i);return kB(o),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Ar(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await yU(e),r=new w_(e);return t.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(c_,{type:c_},i=>{let o=i?.[0]?.[c_];o!==void 0&&t(!!o),Sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return mM()||lM()||A_()}},PM=D_;var YA="@firebase/auth",JA="1.11.1";var T_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function MU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NU(n){pr(new Rt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:c}=r.options;W(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yM(n)},l=new g_(r,i,o,u);return wB(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),pr(new Rt("auth-internal",e=>{let t=Wd(e.getProvider("auth").getImmediate());return(r=>new T_(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ut(YA,JA,MU(n)),Ut(YA,JA,"esm2020")}var RU=300,PU=Dm("authIdTokenMaxAge")||RU,ZA=null,OU=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>PU)return;let i=t?.token;ZA!==i&&(ZA=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function P_(n=Ol()){let e=Ea(n,"auth");if(e.isInitialized())return e.getImmediate();let t=_M(n,{popupRedirectResolver:PM,persistence:[NM,bM,R_]}),r=Dm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=OU(o.toString());TM(t,s,()=>s(t.currentUser)),DM(t,c=>s(c))}}let i=Im("auth");return i&&EM(t,`http://${i}`),t}function xU(){return document.getElementsByTagName("head")?.[0]??document}_B({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Si("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",xU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NU("Browser");var Uo=class n{db;auth;guestsSubject=new Fr([]);guests$=this.guestsSubject.asObservable();constructor(){this.initFirebase()}async initFirebase(){try{let e=jm(LC.firebaseConfig);this.db=CA(e),this.auth=P_(e),console.log("Firebase initialized successfully"),await N_(this.auth),console.log("Signed in anonymously"),this.listenToGuests()}catch(e){console.error("Firebase initialization error:",e)}}listenToGuests(){try{let e=xA(r_(this.db,"guests"),kA("timestamp","desc"));VA(e,t=>{let r=[];t.forEach(i=>{r.push(i.data())}),console.log("Guests updated:",r.length,"guests"),this.guestsSubject.next(r)},t=>{console.error("Error listening to guests:",t)})}catch(e){console.error("Error setting up listener:",e)}}async addGuest(e){try{await LA(r_(this.db,"guests"),ee(V({},e),{timestamp:new Date}))}catch(t){throw console.error("Error adding guest:",t),t}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=le({token:n,factory:n.\u0275fac,providedIn:"root"})};function kU(n,e){n&1&&(O(0,"span",13),L(1," Nome deve ter pelo menos 3 caracteres "),k())}function FU(n,e){n&1&&(O(0,"span",13),L(1," E-mail inv\xE1lido "),k())}function LU(n,e){n&1&&(O(0,"span",13),L(1," Telefone deve ter 10 ou 11 d\xEDgitos "),k())}function VU(n,e){if(n&1&&(O(0,"div",14),L(1),k()),n&2){let t=In(2);Ce(),Js(" ",t.error()," ")}}function jU(n,e){n&1&&(O(0,"span"),L(1,"\u{1FA81} Confirmar Presen\xE7a"),k())}function BU(n,e){n&1&&(O(0,"span"),L(1,"Enviando..."),k())}function UU(n,e){if(n&1){let t=Gu();O(0,"div")(1,"h3",3),L(2,"\u2728 Confirme sua presen\xE7a!"),k(),O(3,"form",4),sr("ngSubmit",function(){Ts(t);let i=In();return bs(i.onSubmit())}),O(4,"label"),L(5," Nome Completo * "),Se(6,"input",5),_t(7,kU,2,0,"span",6),k(),O(8,"label"),L(9," E-mail * "),Se(10,"input",7),_t(11,FU,2,0,"span",6),k(),O(12,"label"),L(13," WhatsApp * "),Se(14,"input",8),_t(15,LU,2,0,"span",6),k(),O(16,"label"),L(17," Mensagem (opcional) "),Se(18,"textarea",9),k(),_t(19,VU,2,1,"div",10),O(20,"button",11),_t(21,jU,2,0,"span",12)(22,BU,2,0,"span",12),k()()()}if(n&2){let t,r,i,o,s,c,u=In();Ce(3),tt("formGroup",u.form),Ce(3),wn("invalid",((t=u.form.get("name"))==null?null:t.invalid)&&((t=u.form.get("name"))==null?null:t.touched)),Ce(),tt("ngIf",((r=u.form.get("name"))==null?null:r.invalid)&&((r=u.form.get("name"))==null?null:r.touched)),Ce(3),wn("invalid",((i=u.form.get("email"))==null?null:i.invalid)&&((i=u.form.get("email"))==null?null:i.touched)),Ce(),tt("ngIf",((o=u.form.get("email"))==null?null:o.invalid)&&((o=u.form.get("email"))==null?null:o.touched)),Ce(3),wn("invalid",((s=u.form.get("phone"))==null?null:s.invalid)&&((s=u.form.get("phone"))==null?null:s.touched)),Ce(),tt("ngIf",((c=u.form.get("phone"))==null?null:c.invalid)&&((c=u.form.get("phone"))==null?null:c.touched)),Ce(4),tt("ngIf",u.error()),Ce(),tt("disabled",u.loading()),Ce(),tt("ngIf",!u.loading()),Ce(),tt("ngIf",u.loading())}}function HU(n,e){if(n&1){let t=Gu();O(0,"div",15)(1,"h3"),L(2,"\u{1F389} Presen\xE7a Confirmada!"),k(),O(3,"p"),L(4,"Obrigado por confirmar! Nos vemos nas areias do Tapaj\xF3s para aproveitar o p\xF4r do sol e as boas vibes!"),k(),O(5,"button",16),sr("click",function(){Ts(t);let i=In();return bs(i.submitted.set(!1))}),L(6,"Confirmar outra pessoa"),k()()}}var Qd=class n{constructor(e,t){this.fb=e;this.firebaseService=t;this.form=this.fb.group({name:["",[Dn.required,Dn.minLength(3)]],email:["",[Dn.required,Dn.email]],phone:["",[Dn.required,Dn.pattern(/^\d{10,11}$/)]],message:[""]})}form;submitted=ct(!1);loading=ct(!1);error=ct("");async onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading.set(!0),this.error.set("");try{await this.firebaseService.addGuest(this.form.value),this.submitted.set(!0),this.form.reset()}catch(e){this.error.set("Erro ao confirmar presen\xE7a. Tente novamente."),console.error(e)}finally{this.loading.set(!1)}}static \u0275fac=function(t){return new(t||n)(se(kC),se(Uo))};static \u0275cmp=jt({type:n,selectors:[["app-rsvp"]],decls:4,vars:2,consts:[["confirmed",""],[1,"rsvp-container"],[4,"ngIf","ngIfElse"],[1,"rsvp-title"],[3,"ngSubmit","formGroup"],["type","text","formControlName","name","placeholder","Seu nome","required",""],["class","error",4,"ngIf"],["type","email","formControlName","email","placeholder","seu@email.com","required",""],["type","tel","formControlName","phone","placeholder","91999999999","required",""],["formControlName","message","rows","3","placeholder","Alguma observa\xE7\xE3o? Restri\xE7\xE3o alimentar?"],["class","error-message",4,"ngIf"],["type","submit",3,"disabled"],[4,"ngIf"],[1,"error"],[1,"error-message"],[1,"confirmation"],[3,"click"]],template:function(t,r){if(t&1&&(O(0,"div",1),_t(1,UU,23,14,"div",2)(2,HU,7,0,"ng-template",null,0,Zs),k()),t&2){let i=Qs(3);Ce(),tt("ngIf",!r.submitted())("ngIfElse",i)}},dependencies:[ur,na,FC,OC,Dl,SC,AC,ym,mm,gm],styles:['@charset "UTF-8";.rsvp-container[_ngcontent-%COMP%]{max-width:600px;margin:3em auto;padding:2em;background:linear-gradient(145deg,#0a0e27f2,#0096c71a);border-radius:var(--radius);box-shadow:0 8px 32px #00d9c066,0 0 60px #b537f233;border:1px solid rgba(0,217,192,.4);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.rsvp-title[_ngcontent-%COMP%]{text-align:center;font-size:2em;background:linear-gradient(90deg,var(--cyan-neon),var(--neon-purple));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:1em;font-weight:900;filter:drop-shadow(0 0 20px var(--cyan-neon))}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5em}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-weight:600;color:#ffffffe6;gap:.5em}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.8em;border:2px solid rgba(0,217,192,.3);border-radius:8px;font-size:1em;transition:all .3s;background:#ffffff0d;color:var(--white)}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#fff6}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--cyan-neon);background:#ffffff1a;box-shadow:0 0 20px #00d9c04d}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   textarea.invalid[_ngcontent-%COMP%]{border-color:var(--neon-pink);box-shadow:0 0 15px #ff006e4d}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}form[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--neon-pink);font-size:.9em;font-weight:400;margin-top:.3em;text-shadow:0 0 10px var(--neon-pink)}form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{background:#ff006e33;color:var(--neon-pink);padding:1em;border-radius:8px;text-align:center;font-weight:600;border:1px solid rgba(255,0,110,.4)}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1em 2em;background:linear-gradient(135deg,var(--aqua-tapaj\\f3s) 0%,var(--sky-electric) 100%);color:var(--white);font-size:1.1em;font-weight:700;border-radius:8px;box-shadow:0 4px 20px #00d9c066;transition:all .3s ease;border:1px solid rgba(0,217,192,.5);text-shadow:0 2px 4px rgba(0,0,0,.3);position:relative;overflow:hidden}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left .5s}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 30px #00d9c099}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled):before{left:100%}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.confirmation[_ngcontent-%COMP%]{text-align:center}.confirmation[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2.2em;background:linear-gradient(90deg,var(--neon-yellow),var(--sunset-orange));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:.5em;font-weight:900;filter:drop-shadow(0 0 20px var(--neon-yellow))}.confirmation[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2em;color:#ffffffe6;line-height:1.8;margin-bottom:1.5em}.confirmation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.8em 1.5em;background:linear-gradient(135deg,var(--neon-purple),var(--neon-pink));color:var(--white);font-size:1em;font-weight:700;border-radius:8px;box-shadow:0 4px 20px #b537f266;border:1px solid rgba(181,55,242,.5)}.confirmation[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 30px #b537f299}@media(max-width:768px){.rsvp-container[_ngcontent-%COMP%]{margin:2em 1em;padding:1.5em}.rsvp-title[_ngcontent-%COMP%]{font-size:1.6em}}']})};function $U(n,e){if(n&1&&(O(0,"li")(1,"span",5),L(2),k(),O(3,"span",6),L(4),k(),O(5,"span",7),L(6,"\u2713"),k()()),n&2){let t=e.$implicit,r=In(2);Ce(2),Ys(r.getInitial(t.name)),Ce(2),Ys(t.name)}}function GU(n,e){if(n&1&&(O(0,"ul"),_t(1,$U,7,2,"li",4),zu(2,"async"),k()),n&2){let t=In();Ce(),tt("ngForOf",qu(2,1,t.guests$))}}function zU(n,e){n&1&&(O(0,"p",8),L(1,"Seja o primeiro a confirmar presen\xE7a! \u{1F31F}"),k())}var Yd=class n{constructor(e){this.firebaseService=e;this.guests$=this.firebaseService.guests$}guests$;getInitial(e){return e.charAt(0).toUpperCase()}static \u0275fac=function(t){return new(t||n)(se(Uo))};static \u0275cmp=jt({type:n,selectors:[["app-guest-list"]],decls:8,vars:4,consts:[["noGuests",""],[1,"guestlist"],[1,"guests-container"],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[1,"avatar"],[1,"name"],[1,"status"],[1,"no-guests"]],template:function(t,r){if(t&1&&(O(0,"div",1)(1,"h4"),L(2,"\u{1F38A} LISTA DE VIBES CONFIRMADOS"),k(),O(3,"div",2),_t(4,GU,3,3,"ul",3),zu(5,"async"),_t(6,zU,2,0,"ng-template",null,0,Zs),k()()),t&2){let i,o=Qs(7);Ce(4),tt("ngIf",(i=qu(5,2,r.guests$))==null?null:i.length)("ngIfElse",o)}},dependencies:[ur,ol,na,Gg],styles:['@charset "UTF-8";.guestlist[_ngcontent-%COMP%]{max-width:600px;margin:2em auto 3em;padding:2em;background:linear-gradient(145deg,#0a0e27f2,#0096c71a);border-radius:var(--radius);box-shadow:0 8px 32px #00d9c066;border:1px solid rgba(0,217,192,.4);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.guestlist[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{text-align:center;font-size:1.5em;background:linear-gradient(90deg,var(--neon-yellow),var(--cyan-neon));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:1.5em;padding-bottom:.5em;border-bottom:3px solid var(--aqua-tapaj\\f3s);font-weight:900;filter:drop-shadow(0 0 15px var(--cyan-neon))}.guestlist[_ngcontent-%COMP%]   .guests-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}.guestlist[_ngcontent-%COMP%]   .guests-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.guestlist[_ngcontent-%COMP%]   .guests-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}.guestlist[_ngcontent-%COMP%]   .guests-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(180deg,var(--aqua-tapaj\\f3s),var(--neon-purple));border-radius:4px}.guestlist[_ngcontent-%COMP%]   .guests-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(180deg,var(--cyan-neon),var(--neon-pink))}.guestlist[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.guestlist[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1em;padding:1em;margin-bottom:.8em;background:linear-gradient(90deg,#00d9c01a,#b537f20d);border-radius:8px;border-left:4px solid var(--cyan-neon);transition:all .3s ease;box-shadow:0 2px 10px #00d9c033}.guestlist[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{transform:translate(10px);box-shadow:0 4px 20px #00d9c066;border-left-color:var(--neon-purple);background:linear-gradient(90deg,#00d9c033,#b537f21a)}.guestlist[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,var(--aqua-tapaj\\f3s),var(--neon-purple));color:var(--white);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.2em;flex-shrink:0;box-shadow:0 0 20px #00d9c080;text-shadow:0 2px 4px rgba(0,0,0,.3)}.guestlist[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex:1;font-weight:600;color:#fffffff2;font-size:1.05em}.guestlist[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{color:var(--neon-yellow);font-size:1.5em;flex-shrink:0;filter:drop-shadow(0 0 10px var(--neon-yellow))}.guestlist[_ngcontent-%COMP%]   .no-guests[_ngcontent-%COMP%]{text-align:center;color:#ffffff80;font-size:1.1em;padding:2em;font-style:italic}@media(max-width:768px){.guestlist[_ngcontent-%COMP%]{margin:2em 1em;padding:1.5em}.guestlist[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.2em}.guestlist[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:.8em}.guestlist[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:35px;height:35px;font-size:1em}.guestlist[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:1em}}']})};var Jd=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=jt({type:n,selectors:[["app-home"]],decls:78,vars:0,consts:[[1,"hero"],["src","/images/kite-hero.jpg","alt","Kitesurf Sunset"],[1,"hero-title"],[1,"when-where"],[1,"event-icons"],[1,"icon-card"],[1,"icon-circle"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M5 12h14"],["d","M12 5v14"],["d","M8 9l4-4 4 4"],["d","M16 15l-4 4-4-4"],["cx","12","cy","12","r","10"],["d","M12 6v6l4 2"],["d","M9 18V5l12-2v13"],["cx","6","cy","18","r","3"],["cx","18","cy","16","r","3"],[1,"about"],[1,"event-notice"],[1,"highlights"]],template:function(t,r){t&1&&(O(0,"section",0),Se(1,"img",1),O(2,"div",2)(3,"h2"),L(4,"Tapaj\xF3s Kite Vibes "),O(5,"span"),L(6,"Sunset Party"),k()(),O(7,"p"),L(8,"Velejo de final de tarde \xB7 DJ Set \xB7 Natureza \xB7 Kitesurf \xB7 Amigos"),k(),O(9,"p",3),L(10,"\u{1F4C5} Em breve: Final da tarde - Praia do Tapaj\xF3s, Santar\xE9m/PA"),k()()(),O(11,"section",4)(12,"div",5)(13,"div",6),tr(),O(14,"svg",7),Se(15,"path",8)(16,"path",9)(17,"path",10)(18,"path",11),k()(),Qi(),O(19,"h3"),L(20,"Kitesurf"),k(),O(21,"p"),L(22,"Ventos perfeitos da tarde no Rio Tapaj\xF3s"),k()(),O(23,"div",5)(24,"div",6),tr(),O(25,"svg",7),Se(26,"circle",12)(27,"path",13),k()(),Qi(),O(28,"h3"),L(29,"Praia & Tapaj\xF3s"),k(),O(30,"p"),L(31,"Vista amaz\xF4nica privilegiada ao p\xF4r do sol"),k()(),O(32,"div",5)(33,"div",6),tr(),O(34,"svg",7),Se(35,"path",14)(36,"circle",15)(37,"circle",16),k()(),Qi(),O(38,"h3"),L(39,"M\xFAsica Eletr\xF4nica"),k(),O(40,"p"),L(41,"DJ set com as melhores vibes"),k()()(),O(42,"section",17)(43,"h3"),L(44,"\u{1F305} Sobre o Evento"),k(),O(45,"p"),L(46," Prepare-se para um final de tarde inesquec\xEDvel \xE0s margens do Rio Tapaj\xF3s! Combinando kitesurf, m\xFAsica, natureza e boas vibes, este evento \xE9 perfeito para quem ama a energia do vento e a paz do p\xF4r do sol amaz\xF4nico. "),k(),O(47,"div",18)(48,"p"),L(49,"\u{1F4E2} "),O(50,"strong"),L(51,"Importante:"),k(),L(52," Esta \xE9 uma pr\xE9-lista de confirma\xE7\xE3o de interesse!"),k(),O(53,"p"),L(54,"Os detalhes completos do evento (valores, local exato e hor\xE1rios) ser\xE3o divulgados em breve. Confirme sua presen\xE7a agora para receber todas as informa\xE7\xF5es assim que dispon\xEDveis."),k()(),O(55,"ul",19)(56,"li"),L(57,"\u{1FA81} "),O(58,"strong"),L(59,"Kitesurf Session:"),k(),L(60," Ventos perfeitos da tarde"),k(),O(61,"li"),L(62,"\u{1F3B5} "),O(63,"strong"),L(64,"DJ Set:"),k(),L(65," M\xFAsica ao vivo com as melhores vibes"),k(),O(66,"li"),L(67,"\u{1F379} "),O(68,"strong"),L(69,"Drinks & Food:"),k(),L(70," Petiscos e bebidas refrescantes"),k(),O(71,"li"),L(72,"\u{1F334} "),O(73,"strong"),L(74,"Natureza:"),k(),L(75," Vista privilegiada do rio e da floresta"),k()()(),Se(76,"app-rsvp")(77,"app-guest-list"))},dependencies:[ur,Qd,Yd],styles:['@charset "UTF-8";.hero[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;border-radius:var(--radius);box-shadow:0 8px 32px #00d9c066,0 0 80px #b537f233;overflow:hidden;background:linear-gradient(145deg,#0a0e27f2,#023e8af2);margin:2em auto;max-width:900px;border:1px solid rgba(0,217,192,.3)}.hero[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:400px;object-fit:cover}.hero[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{padding:2em;text-align:center;background:linear-gradient(135deg,var(--neon-purple) 0%,var(--neon-pink) 50%,var(--sunset-orange) 100%);color:var(--white);width:100%;position:relative;overflow:hidden}.hero[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:linear-gradient(45deg,transparent 30%,rgba(255,255,255,.1) 50%,transparent 70%);animation:shine 3s infinite}.hero[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5em;margin-bottom:.3em;text-shadow:0 0 10px var(--neon-yellow),0 0 20px var(--neon-yellow),2px 2px 8px rgba(0,0,0,.5);font-weight:900;position:relative;z-index:1}.hero[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;font-size:.6em;font-weight:400;margin-top:.2em}.hero[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1em;margin:.5em 0}.hero[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]   .when-where[_ngcontent-%COMP%]{font-size:1em;margin-top:1em;padding:.5em;background:#fff3;border-radius:8px;display:inline-block}.event-icons[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:2em;max-width:1000px;margin:3em auto;padding:0 1em}.event-icons[_ngcontent-%COMP%]   .icon-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,#0a0e27cc,#0096c726);border-radius:var(--radius);padding:2em 1.5em;text-align:center;border:2px solid transparent;transition:all .4s cubic-bezier(.175,.885,.32,1.275);position:relative;overflow:hidden;box-shadow:0 4px 20px #00d9c033}.event-icons[_ngcontent-%COMP%]   .icon-card[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,#00d9c01a,#b537f21a);opacity:0;transition:opacity .4s ease;z-index:0}.event-icons[_ngcontent-%COMP%]   .icon-card[_ngcontent-%COMP%]:hover{transform:translateY(-10px) scale(1.05);border-color:var(--cyan-neon);box-shadow:0 10px 40px #00d9c066,0 0 60px #b537f24d}.event-icons[_ngcontent-%COMP%]   .icon-card[_ngcontent-%COMP%]:hover:before{opacity:1}.event-icons[_ngcontent-%COMP%]   .icon-card[_ngcontent-%COMP%]:hover   .icon-circle[_ngcontent-%COMP%]{transform:scale(1.1) rotate(10deg);box-shadow:0 0 40px var(--cyan-neon),0 0 80px var(--neon-purple)}.event-icons[_ngcontent-%COMP%]   .icon-card[_ngcontent-%COMP%]:nth-child(1)   .icon-circle[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--cyan-neon),var(--aqua-tapaj\\f3s))}.event-icons[_ngcontent-%COMP%]   .icon-card[_ngcontent-%COMP%]:nth-child(2)   .icon-circle[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--neon-purple),var(--neon-pink))}.event-icons[_ngcontent-%COMP%]   .icon-card[_ngcontent-%COMP%]:nth-child(3)   .icon-circle[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--neon-pink),var(--neon-yellow))}.event-icons[_ngcontent-%COMP%]   .icon-card[_ngcontent-%COMP%]   .icon-circle[_ngcontent-%COMP%]{width:120px;height:120px;margin:0 auto 1.5em;border-radius:50%;display:flex;align-items:center;justify-content:center;transition:all .4s cubic-bezier(.175,.885,.32,1.275);box-shadow:0 8px 30px #00d9c066;position:relative;z-index:1}.event-icons[_ngcontent-%COMP%]   .icon-card[_ngcontent-%COMP%]   .icon-circle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:60px;height:60px;color:var(--white);filter:drop-shadow(0 0 10px rgba(255,255,255,.5))}.event-icons[_ngcontent-%COMP%]   .icon-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em;font-weight:800;background:linear-gradient(90deg,var(--cyan-neon),var(--neon-purple));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:.5em;position:relative;z-index:1}.event-icons[_ngcontent-%COMP%]   .icon-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1em;color:#ffffffd9;line-height:1.6;position:relative;z-index:1}.about[_ngcontent-%COMP%]{max-width:800px;margin:3em auto;padding:2em;background:linear-gradient(145deg,#0a0e27e6,#0096c71a);border-radius:var(--radius);box-shadow:0 8px 32px #00d9c04d;border:1px solid rgba(0,217,192,.4);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}.about[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:2em;background:linear-gradient(90deg,var(--cyan-neon),var(--neon-purple));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:.5em;text-align:center;font-weight:800;text-shadow:0 0 30px var(--cyan-neon)}.about[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1em;line-height:1.8;color:#ffffffe6;margin-bottom:1.5em}.about[_ngcontent-%COMP%]   .event-notice[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffbe0b26,#ff006e26);border-left:4px solid var(--neon-yellow);border-radius:8px;padding:1.5em;margin:1.5em 0;box-shadow:0 4px 20px #ffbe0b33}.about[_ngcontent-%COMP%]   .event-notice[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.8em;font-size:1.05em;color:#fffffff2}.about[_ngcontent-%COMP%]   .event-notice[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.about[_ngcontent-%COMP%]   .event-notice[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--neon-yellow);text-shadow:0 0 10px var(--neon-yellow)}.about[_ngcontent-%COMP%]   .highlights[_ngcontent-%COMP%]{list-style:none;padding:0}.about[_ngcontent-%COMP%]   .highlights[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:1em;margin:.8em 0;background:linear-gradient(90deg,#00d9c01a,#b537f21a);border-left:4px solid var(--cyan-neon);border-radius:8px;font-size:1.05em;box-shadow:0 4px 12px #00d9c033;transition:all .3s ease;color:#fffffff2}.about[_ngcontent-%COMP%]   .highlights[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{transform:translate(10px);box-shadow:0 6px 20px #00d9c066;border-left-color:var(--neon-purple)}.about[_ngcontent-%COMP%]   .highlights[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--cyan-neon);text-shadow:0 0 10px var(--cyan-neon)}@media(max-width:768px){.hero[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:250px}.hero[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]{padding:1.5em 1em}.hero[_ngcontent-%COMP%]   .hero-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8em}.event-icons[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:1.5em;margin:2em 1em}.event-icons[_ngcontent-%COMP%]   .icon-card[_ngcontent-%COMP%]{padding:1.5em 1em}.event-icons[_ngcontent-%COMP%]   .icon-card[_ngcontent-%COMP%]   .icon-circle[_ngcontent-%COMP%]{width:100px;height:100px}.event-icons[_ngcontent-%COMP%]   .icon-card[_ngcontent-%COMP%]   .icon-circle[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:50px;height:50px}.event-icons[_ngcontent-%COMP%]   .icon-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3em}.event-icons[_ngcontent-%COMP%]   .icon-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95em}.about[_ngcontent-%COMP%]{margin:2em 1em;padding:1.5em}.about[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5em}.about[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1em}}']})};var Zd=class n{platformId=B(_n);ngOnInit(){ia(this.platformId)&&window.addEventListener("scroll",this.handleScroll)}ngOnDestroy(){ia(this.platformId)&&window.removeEventListener("scroll",this.handleScroll)}handleScroll=()=>{let e=document.querySelector(".floating-kite");if(e){let t=window.scrollY,r=window.innerHeight,i=t*.3%r,o=Math.sin(t*.002)*100;e.style.transform=`translate(${o}px, ${i}px) rotate(${o*.2}deg)`}};static \u0275fac=function(t){return new(t||n)};static \u0275cmp=jt({type:n,selectors:[["app-kite-animation"]],decls:14,vars:0,consts:[[1,"floating-kite"],["viewBox","0 0 100 120","xmlns","http://www.w3.org/2000/svg"],["d","M 50 10 L 30 50 L 50 70 L 70 50 Z","fill","url(#kiteGradient)","stroke","var(--cyan-neon)","stroke-width","2"],["x1","30","y1","50","x2","70","y2","50","stroke","var(--neon-yellow)","stroke-width","1.5"],["x1","50","y1","10","x2","50","y2","70","stroke","var(--neon-yellow)","stroke-width","1.5"],["d","M 50 70 Q 55 85, 60 100 Q 65 110, 70 115","stroke","var(--white)","stroke-width","1.5","fill","none","opacity","0.7"],["cx","58","cy","95","r","2","fill","var(--neon-pink)"],["cx","62","cy","105","r","2","fill","var(--neon-purple)"],["cx","68","cy","113","r","2","fill","var(--cyan-neon)"],["id","kiteGradient","x1","0%","y1","0%","x2","100%","y2","100%"],["offset","0%",2,"stop-color","var(--cyan-neon)","stop-opacity","0.9"],["offset","50%",2,"stop-color","var(--neon-purple)","stop-opacity","0.8"],["offset","100%",2,"stop-color","var(--neon-pink)","stop-opacity","0.9"]],template:function(t,r){t&1&&(ci(0,"div",0),tr(),ci(1,"svg",1),Ws(2,"path",2)(3,"line",3)(4,"line",4)(5,"path",5)(6,"circle",6)(7,"circle",7)(8,"circle",8),ci(9,"defs")(10,"linearGradient",9),Ws(11,"stop",10)(12,"stop",11)(13,"stop",12),qs()()()())},styles:[".floating-kite[_ngcontent-%COMP%]{position:fixed;top:10%;right:5%;width:80px;height:100px;z-index:100;pointer-events:none;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite;filter:drop-shadow(0 0 10px var(--cyan-neon));transition:transform .1s ease-out}.floating-kite[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0) rotate(0)}50%{transform:translateY(-20px) rotate(5deg)}}@media(max-width:768px){.floating-kite[_ngcontent-%COMP%]{width:50px;height:65px;right:2%}}"]})};var Xd=class n{platformId=B(_n);currentSlide=ct(0);totalSlides=3;autoplayInterval;autoplayDelay=5e3;ngOnInit(){ia(this.platformId)&&this.initCarousel()}ngOnDestroy(){this.autoplayInterval&&clearInterval(this.autoplayInterval)}initCarousel(){setTimeout(()=>{let e=document.querySelector(".carousel-btn.prev"),t=document.querySelector(".carousel-btn.next"),r=document.querySelectorAll(".indicator");e?.addEventListener("click",()=>this.previousSlide()),t?.addEventListener("click",()=>this.nextSlide()),r.forEach((i,o)=>{i.addEventListener("click",()=>this.goToSlide(o))}),this.startAutoplay()},100)}goToSlide(e){let t=document.querySelectorAll(".carousel-slide"),r=document.querySelectorAll(".indicator");t[this.currentSlide()]?.classList.remove("active"),r[this.currentSlide()]?.classList.remove("active"),this.currentSlide.set(e),t[this.currentSlide()]?.classList.add("active"),r[this.currentSlide()]?.classList.add("active")}nextSlide(){let e=(this.currentSlide()+1)%this.totalSlides;this.goToSlide(e)}previousSlide(){let e=(this.currentSlide()-1+this.totalSlides)%this.totalSlides;this.goToSlide(e)}startAutoplay(){this.autoplayInterval=setInterval(()=>{this.nextSlide()},this.autoplayDelay)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=jt({type:n,selectors:[["app-root"]],decls:49,vars:0,consts:[[1,"carousel"],[1,"carousel-track"],[1,"carousel-slide","active"],[1,"slide-overlay"],["src","/images/kite1.jpg","alt","Kitesurf Tapaj\xF3s","loading","eager"],[1,"slide-content"],[1,"carousel-slide"],["src","/images/kite2.jpg","alt","Vibes & Kite","loading","lazy"],["src","/images/kite3.jpg","alt","Sunset Party","loading","lazy"],[1,"carousel-controls"],["aria-label","Anterior",1,"carousel-btn","prev"],["aria-label","Pr\xF3ximo",1,"carousel-btn","next"],[1,"carousel-indicators"],["data-slide","0",1,"indicator","active"],["data-slide","1",1,"indicator"],["data-slide","2",1,"indicator"],[1,"header-content"],[1,"footer-note"]],template:function(t,r){t&1&&(Se(0,"app-kite-animation"),O(1,"header")(2,"div",0)(3,"div",1)(4,"div",2),Se(5,"div",3)(6,"img",4),O(7,"div",5)(8,"h2"),L(9,"\u{1FA81} Tapaj\xF3s Kite Vibes"),k(),O(10,"p"),L(11,"Sunset Party \xB7 Kitesurf \xB7 Music \xB7 Nature"),k()()(),O(12,"div",6),Se(13,"div",3)(14,"img",7),O(15,"div",5)(16,"h2"),L(17,"\u{1F30A} Aventura nas \xC1guas"),k(),O(18,"p"),L(19,"Ventos perfeitos \xB7 \xC1guas cristalinas"),k()()(),O(20,"div",6),Se(21,"div",3)(22,"img",8),O(23,"div",5)(24,"h2"),L(25,"\u{1F3B5} Vibes Eletr\xF4nicas"),k(),O(26,"p"),L(27,"DJ Set \xB7 Drinks \xB7 Amigos"),k()()()(),O(28,"div",9)(29,"button",10),L(30,"\u2039"),k(),O(31,"button",11),L(32,"\u203A"),k()(),O(33,"div",12),Se(34,"span",13)(35,"span",14)(36,"span",15),k()(),O(37,"div",16)(38,"h1"),L(39,"\u{1FA81} Tapaj\xF3s Kite Vibes"),k(),O(40,"p"),L(41,"Sunset Party \xB7 Kitesurf \xB7 Music \xB7 Nature"),k()()(),O(42,"main"),Se(43,"app-home"),k(),O(44,"footer")(45,"p"),L(46,"\xA9 2025 Tapaj\xF3s Kite Vibes \xB7 Santar\xE9m, Par\xE1 \xB7 Brasil"),k(),O(47,"p",17),L(48,"Feito com \u2764\uFE0F e muita energia do vento!"),k()())},dependencies:[Jd,Zd],styles:['@charset "UTF-8";header[_ngcontent-%COMP%]{position:relative;overflow:hidden}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]{position:relative;width:100%;height:600px;overflow:hidden}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-track[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-slide[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;transition:opacity 1s ease-in-out}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-slide.active[_ngcontent-%COMP%]{opacity:1;z-index:1}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-slide[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;object-position:center}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-slide[_ngcontent-%COMP%]   .slide-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(135deg,#0a0e27b3,#0096c766,#b537f24d);z-index:1}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-slide[_ngcontent-%COMP%]   .slide-content[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);text-align:center;z-index:2;color:var(--white);max-width:900px;padding:2em}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-slide[_ngcontent-%COMP%]   .slide-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:4em;margin-bottom:.3em;text-shadow:0 0 20px var(--cyan-neon),0 0 40px var(--cyan-neon),4px 4px 8px rgba(0,0,0,.5);font-weight:900;letter-spacing:2px;animation:_ngcontent-%COMP%_fadeInUp 1s ease-out}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-slide[_ngcontent-%COMP%]   .slide-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.8em;text-shadow:0 4px 8px rgba(0,0,0,.5);opacity:.95;animation:_ngcontent-%COMP%_fadeInUp 1s ease-out .3s both}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]   .carousel-btn[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);background:#00d9c04d;color:var(--white);border:2px solid rgba(0,217,192,.5);width:60px;height:60px;border-radius:50%;font-size:3em;cursor:pointer;z-index:3;transition:all .3s ease;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);display:flex;align-items:center;justify-content:center;line-height:1;padding:0}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]   .carousel-btn[_ngcontent-%COMP%]:hover{background:#00d9c099;transform:translateY(-50%) scale(1.1);box-shadow:0 0 30px var(--cyan-neon)}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]   .carousel-btn.prev[_ngcontent-%COMP%]{left:2em}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]   .carousel-btn.next[_ngcontent-%COMP%]{right:2em}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-indicators[_ngcontent-%COMP%]{position:absolute;bottom:2em;left:50%;transform:translate(-50%);display:flex;gap:1em;z-index:3}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-indicators[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{width:50px;height:6px;background:#ffffff4d;border-radius:3px;cursor:pointer;transition:all .3s ease}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-indicators[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]:hover{background:#fff9}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-indicators[_ngcontent-%COMP%]   .indicator.active[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--cyan-neon),var(--neon-purple));box-shadow:0 0 20px var(--cyan-neon)}header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:none}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}main[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:1em}footer[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--dark-night) 0%,var(--deep-blue) 100%);color:var(--white);text-align:center;padding:2em;margin-top:4em;border-top:2px solid var(--aqua-tapaj\\f3s);box-shadow:0 -4px 20px #00d9c033}footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5em 0;font-size:1em;color:#ffffffe6}footer[_ngcontent-%COMP%]   .footer-note[_ngcontent-%COMP%]{font-style:italic;opacity:.8;color:var(--cyan-neon)}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1);opacity:.2}50%{transform:scale(1.1);opacity:.3}}@keyframes _ngcontent-%COMP%_shine{0%{transform:translate(-100%)}to{transform:translate(100%)}}@media(max-width:768px){header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]{height:500px}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-slide[_ngcontent-%COMP%]   .slide-content[_ngcontent-%COMP%]{padding:1em}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-slide[_ngcontent-%COMP%]   .slide-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.5em}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-slide[_ngcontent-%COMP%]   .slide-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2em}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]   .carousel-btn[_ngcontent-%COMP%]{width:45px;height:45px;font-size:2em}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]   .carousel-btn.prev[_ngcontent-%COMP%]{left:1em}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-controls[_ngcontent-%COMP%]   .carousel-btn.next[_ngcontent-%COMP%]{right:1em}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-indicators[_ngcontent-%COMP%]{bottom:1em;gap:.5em}header[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .carousel-indicators[_ngcontent-%COMP%]   .indicator[_ngcontent-%COMP%]{width:35px;height:5px}footer[_ngcontent-%COMP%]{padding:1.5em 1em}footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em}}']})};em(Xd,rC).catch(n=>console.error(n));
